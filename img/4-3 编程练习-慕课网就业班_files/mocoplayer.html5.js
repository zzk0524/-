!function(t){var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.videojs=function(){var t;return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r||t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){},{}],2:[function(t,e,r){"use strict";var n=t("object-keys"),i=t("foreach"),o="function"==typeof Symbol&&"symbol"==typeof Symbol(),a=Object.prototype.toString,s=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)},l=Object.defineProperty&&function(){var t={};try{Object.defineProperty(t,"x",{enumerable:!1,value:t});for(var e in t)return!1;return t.x===t}catch(t){return!1}}(),u=function(t,e,r,n){(!(e in t)||s(n)&&n())&&(l?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r)},c=function(t,e){var r=arguments.length>2?arguments[2]:{},a=n(e);o&&(a=a.concat(Object.getOwnPropertySymbols(e))),i(a,function(n){u(t,n,e[n],r[n])})};c.supportsDescriptors=!!l,e.exports=c},{foreach:4,"object-keys":49}],3:[function(t,e,r){function n(t,e,r){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===l.call(t)?i(t,e,r):"string"==typeof t?o(t,e,r):a(t,e,r)}function i(t,e,r){for(var n=0,i=t.length;n<i;n++)u.call(t,n)&&e.call(r,t[n],n,t)}function o(t,e,r){for(var n=0,i=t.length;n<i;n++)e.call(r,t.charAt(n),n,t)}function a(t,e,r){for(var n in t)u.call(t,n)&&e.call(r,t[n],n,t)}var s=t("is-function");e.exports=n;var l=Object.prototype.toString,u=Object.prototype.hasOwnProperty},{"is-function":9}],4:[function(t,e,r){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=function(t,e,r){if("[object Function]"!==i.call(e))throw new TypeError("iterator must be a function");var o=t.length;if(o===+o)for(var a=0;a<o;a++)e.call(r,t[a],a,t);else for(var s in t)n.call(t,s)&&e.call(r,t[s],s,t)}},{}],5:[function(t,e,r){var n=Array.prototype.slice,i=Object.prototype.toString;e.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==i.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,o=n.call(arguments,1),a=function(){if(this instanceof r){var i=e.apply(this,o.concat(n.call(arguments)));return Object(i)===i?i:this}return e.apply(t,o.concat(n.call(arguments)))},s=Math.max(0,e.length-o.length),l=[],u=0;u<s;u++)l.push("$"+u);if(r=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var c=function(){};c.prototype=e.prototype,r.prototype=new c,c.prototype=null}return r}},{}],6:[function(t,e,r){var n=t("./implementation");e.exports=Function.prototype.bind||n},{"./implementation":5}],7:[function(t,e,r){(function(r){var n=void 0!==r?r:"undefined"!=typeof window?window:{},i=t("min-document");if("undefined"!=typeof document)e.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":1}],8:[function(t,e,r){(function(t){"undefined"!=typeof window?e.exports=window:void 0!==t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,r){function n(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=n;var i=Object.prototype.toString},{}],10:[function(t,e,r){var n=t("../internal/getNative"),i=n(Date,"now"),o=i||function(){return(new Date).getTime()};e.exports=o},{"../internal/getNative":26}],11:[function(t,e,r){function n(t,e,r){function n(){v&&clearTimeout(v),h&&clearTimeout(h),_=0,h=v=m=void 0}function l(e,r){r&&clearTimeout(r),h=v=m=void 0,e&&(_=o(),p=t.apply(y,f),v||h||(f=y=void 0))}function u(){var t=e-(o()-g);t<=0||t>e?l(m,h):v=setTimeout(u,t)}function c(){l(T,v)}function d(){if(f=arguments,g=o(),y=this,m=T&&(v||!E),!1===b)var r=E&&!v;else{h||E||(_=g);var n=b-(g-_),i=n<=0||n>b;i?(h&&(h=clearTimeout(h)),_=g,p=t.apply(y,f)):h||(h=setTimeout(c,n))}return i&&v?v=clearTimeout(v):v||e===b||(v=setTimeout(u,e)),r&&(i=!0,p=t.apply(y,f)),!i||v||h||(f=y=void 0),p}var f,h,p,g,y,v,m,_=0,b=!1,T=!0;if("function"!=typeof t)throw new TypeError(a);if(e=e<0?0:+e||0,!0===r){var E=!0;T=!1}else i(r)&&(E=!!r.leading,b="maxWait"in r&&s(+r.maxWait||0,e),T="trailing"in r?!!r.trailing:T);return d.cancel=n,d}var i=t("../lang/isObject"),o=t("../date/now"),a="Expected a function",s=Math.max;e.exports=n},{"../date/now":10,"../lang/isObject":39}],12:[function(t,e,r){function n(t,e){if("function"!=typeof t)throw new TypeError(i);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=o(r.length-e,0),a=Array(i);++n<i;)a[n]=r[e+n];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var s=Array(e+1);for(n=-1;++n<e;)s[n]=r[n];return s[e]=a,t.apply(this,s)}}var i="Expected a function",o=Math.max;e.exports=n},{}],13:[function(t,e,r){function n(t,e,r){var n=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return!1===r?n=!1:o(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),i(t,e,{leading:n,maxWait:+e,trailing:s})}var i=t("./debounce"),o=t("../lang/isObject"),a="Expected a function";e.exports=n},{"../lang/isObject":39,"./debounce":11}],14:[function(t,e,r){function n(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}e.exports=n},{}],15:[function(t,e,r){function n(t,e){for(var r=-1,n=t.length;++r<n&&!1!==e(t[r],r,t););return t}e.exports=n},{}],16:[function(t,e,r){function n(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}e.exports=n},{}],17:[function(t,e,r){var n=t("./createBaseFor"),i=n();e.exports=i},{"./createBaseFor":24}],18:[function(t,e,r){function n(t,e){return i(t,e,o)}var i=t("./baseFor"),o=t("../object/keysIn");e.exports=n},{"../object/keysIn":45,"./baseFor":17}],19:[function(t,e,r){function n(t,e,r,f,h){if(!l(t))return t;var p=s(e)&&(a(e)||c(e)),g=p?void 0:d(e);return i(g||e,function(i,a){if(g&&(a=i,i=e[a]),u(i))f||(f=[]),h||(h=[]),o(t,e,a,n,r,f,h);else{var s=t[a],l=r?r(s,i,a,t,e):void 0,c=void 0===l;c&&(l=i),void 0===l&&(!p||a in t)||!c&&(l===l?l===s:s!==s)||(t[a]=l)}}),t}var i=t("./arrayEach"),o=t("./baseMergeDeep"),a=t("../lang/isArray"),s=t("./isArrayLike"),l=t("../lang/isObject"),u=t("./isObjectLike"),c=t("../lang/isTypedArray"),d=t("../object/keys");e.exports=n},{"../lang/isArray":36,"../lang/isObject":39,"../lang/isTypedArray":42,"../object/keys":44,"./arrayEach":15,"./baseMergeDeep":20,"./isArrayLike":27,"./isObjectLike":32}],20:[function(t,e,r){function n(t,e,r,n,d,f,h){for(var p=f.length,g=e[r];p--;)if(f[p]==g)return void(t[r]=h[p]);var y=t[r],v=d?d(y,g,r,t,e):void 0,m=void 0===v;m&&(v=g,s(g)&&(a(g)||u(g))?v=a(y)?y:s(y)?i(y):[]:l(g)||o(g)?v=o(y)?c(y):l(y)?y:{}:m=!1),f.push(g),h.push(v),m?t[r]=n(v,g,d,f,h):(v===v?v!==y:y===y)&&(t[r]=v)}var i=t("./arrayCopy"),o=t("../lang/isArguments"),a=t("../lang/isArray"),s=t("./isArrayLike"),l=t("../lang/isPlainObject"),u=t("../lang/isTypedArray"),c=t("../lang/toPlainObject");e.exports=n},{"../lang/isArguments":35,"../lang/isArray":36,"../lang/isPlainObject":40,"../lang/isTypedArray":42,"../lang/toPlainObject":43,"./arrayCopy":14,"./isArrayLike":27}],21:[function(t,e,r){function n(t){return function(e){return null==e?void 0:i(e)[t]}}var i=t("./toObject");e.exports=n},{"./toObject":34}],22:[function(t,e,r){function n(t,e,r){if("function"!=typeof t)return i;if(void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,a){return t.call(e,r,n,i,o,a)}}return function(){return t.apply(e,arguments)}}var i=t("../utility/identity");e.exports=n},{"../utility/identity":48}],23:[function(t,e,r){function n(t){return a(function(e,r){var n=-1,a=null==e?0:r.length,s=a>2?r[a-2]:void 0,l=a>2?r[2]:void 0,u=a>1?r[a-1]:void 0;for("function"==typeof s?(s=i(s,u,5),a-=2):(s="function"==typeof u?u:void 0,a-=s?1:0),l&&o(r[0],r[1],l)&&(s=a<3?void 0:s,a=1);++n<a;){var c=r[n];c&&t(e,c,s)}return e})}var i=t("./bindCallback"),o=t("./isIterateeCall"),a=t("../function/restParam");e.exports=n},{"../function/restParam":12,"./bindCallback":22,"./isIterateeCall":30}],24:[function(t,e,r){function n(t){return function(e,r,n){for(var o=i(e),a=n(e),s=a.length,l=t?s:-1;t?l--:++l<s;){var u=a[l];if(!1===r(o[u],u,o))break}return e}}var i=t("./toObject");e.exports=n},{"./toObject":34}],25:[function(t,e,r){var n=t("./baseProperty"),i=n("length");e.exports=i},{"./baseProperty":21}],26:[function(t,e,r){function n(t,e){var r=null==t?void 0:t[e];return i(r)?r:void 0}var i=t("../lang/isNative");e.exports=n},{"../lang/isNative":38}],27:[function(t,e,r){function n(t){return null!=t&&o(i(t))}var i=t("./getLength"),o=t("./isLength");e.exports=n},{"./getLength":25,"./isLength":31}],28:[function(t,e,r){var n=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();e.exports=n},{}],29:[function(t,e,r){function n(t,e){return t="number"==typeof t||i.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&t<e}var i=/^\d+$/,o=9007199254740991;e.exports=n},{}],30:[function(t,e,r){function n(t,e,r){if(!a(r))return!1;var n=typeof e;if("number"==n?i(r)&&o(e,r.length):"string"==n&&e in r){var s=r[e];return t===t?t===s:s!==s}return!1}var i=t("./isArrayLike"),o=t("./isIndex"),a=t("../lang/isObject");e.exports=n},{"../lang/isObject":39,"./isArrayLike":27,"./isIndex":29}],31:[function(t,e,r){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}var i=9007199254740991;e.exports=n},{}],32:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}e.exports=n},{}],33:[function(t,e,r){function n(t){for(var e=u(t),r=e.length,n=r&&t.length,c=!!n&&s(n)&&(o(t)||i(t)||l(t)),f=-1,h=[];++f<r;){var p=e[f];(c&&a(p,n)||d.call(t,p))&&h.push(p)}return h}var i=t("../lang/isArguments"),o=t("../lang/isArray"),a=t("./isIndex"),s=t("./isLength"),l=t("../lang/isString"),u=t("../object/keysIn"),c=Object.prototype,d=c.hasOwnProperty;e.exports=n},{"../lang/isArguments":35,"../lang/isArray":36,"../lang/isString":41,"../object/keysIn":45,"./isIndex":29,"./isLength":31}],34:[function(t,e,r){function n(t){if(a.unindexedChars&&o(t)){for(var e=-1,r=t.length,n=Object(t);++e<r;)n[e]=t.charAt(e);return n}return i(t)?t:Object(t)}var i=t("../lang/isObject"),o=t("../lang/isString"),a=t("../support");e.exports=n},{"../lang/isObject":39,"../lang/isString":41,"../support":47}],35:[function(t,e,r){function n(t){return o(t)&&i(t)&&s.call(t,"callee")&&!l.call(t,"callee")}var i=t("../internal/isArrayLike"),o=t("../internal/isObjectLike"),a=Object.prototype,s=a.hasOwnProperty,l=a.propertyIsEnumerable;e.exports=n},{"../internal/isArrayLike":27,"../internal/isObjectLike":32}],36:[function(t,e,r){var n=t("../internal/getNative"),i=t("../internal/isLength"),o=t("../internal/isObjectLike"),a=Object.prototype,s=a.toString,l=n(Array,"isArray"),u=l||function(t){return o(t)&&i(t.length)&&"[object Array]"==s.call(t)};e.exports=u},{"../internal/getNative":26,"../internal/isLength":31,"../internal/isObjectLike":32}],37:[function(t,e,r){function n(t){return i(t)&&s.call(t)==o}var i=t("./isObject"),o="[object Function]",a=Object.prototype,s=a.toString;e.exports=n},{"./isObject":39}],38:[function(t,e,r){function n(t){return null!=t&&(i(t)?d.test(u.call(t)):a(t)&&(o(t)?d:s).test(t))}var i=t("./isFunction"),o=t("../internal/isHostObject"),a=t("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},{"../internal/isHostObject":28,"../internal/isObjectLike":32,"./isFunction":37}],39:[function(t,e,r){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=n},{}],40:[function(t,e,r){function n(t){var e;if(!s(t)||f.call(t)!=u||a(t)||o(t)||!d.call(t,"constructor")&&"function"==typeof(e=t.constructor)&&!(e instanceof e))return!1;var r;return l.ownLast?(i(t,function(t,e,n){return r=d.call(n,e),!1}),!1!==r):(i(t,function(t,e){r=e}),void 0===r||d.call(t,r))}var i=t("../internal/baseForIn"),o=t("./isArguments"),a=t("../internal/isHostObject"),s=t("../internal/isObjectLike"),l=t("../support"),u="[object Object]",c=Object.prototype,d=c.hasOwnProperty,f=c.toString;e.exports=n},{"../internal/baseForIn":18,"../internal/isHostObject":28,"../internal/isObjectLike":32,"../support":47,"./isArguments":35}],41:[function(t,e,r){function n(t){return"string"==typeof t||i(t)&&s.call(t)==o}var i=t("../internal/isObjectLike"),o="[object String]",a=Object.prototype,s=a.toString;e.exports=n},{"../internal/isObjectLike":32}],42:[function(t,e,r){function n(t){return o(t)&&i(t.length)&&!!a[l.call(t)]}var i=t("../internal/isLength"),o=t("../internal/isObjectLike"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=Object.prototype,l=s.toString;e.exports=n},{"../internal/isLength":31,"../internal/isObjectLike":32}],43:[function(t,e,r){function n(t){return i(t,o(t))}var i=t("../internal/baseCopy"),o=t("../object/keysIn");e.exports=n},{"../internal/baseCopy":16,"../object/keysIn":45}],44:[function(t,e,r){var n=t("../internal/getNative"),i=t("../internal/isArrayLike"),o=t("../lang/isObject"),a=t("../internal/shimKeys"),s=t("../support"),l=n(Object,"keys"),u=l?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||("function"==typeof t?s.enumPrototypes:i(t))?a(t):o(t)?l(t):[]}:a;e.exports=u},{"../internal/getNative":26,"../internal/isArrayLike":27,"../internal/shimKeys":33,"../lang/isObject":39,"../support":47}],45:[function(t,e,r){function n(t){if(null==t)return[];c(t)||(t=Object(t));var e=t.length;e=e&&u(e)&&(a(t)||o(t)||d(t))&&e||0;for(var r=t.constructor,n=-1,i=s(r)&&r.prototype||m,S=i===t,w=Array(e),O=e>0,A=f.enumErrorProps&&(t===v||t instanceof Error),j=f.enumPrototypes&&s(t);++n<e;)w[n]=n+"";for(var k in t)j&&"prototype"==k||A&&("message"==k||"name"==k)||O&&l(k,e)||"constructor"==k&&(S||!b.call(t,k))||w.push(k);if(f.nonEnumShadows&&t!==m){var C=t===_?g:t===v?h:T.call(t),R=E[C]||E[p];for(C==p&&(i=m),e=y.length;e--;){k=y[e];var x=R[k];S&&x||(x?!b.call(t,k):t[k]===i[k])||w.push(k)}}return w}var i=t("../internal/arrayEach"),o=t("../lang/isArguments"),a=t("../lang/isArray"),s=t("../lang/isFunction"),l=t("../internal/isIndex"),u=t("../internal/isLength"),c=t("../lang/isObject"),d=t("../lang/isString"),f=t("../support"),h="[object Error]",p="[object Object]",g="[object String]",y=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],v=Error.prototype,m=Object.prototype,_=String.prototype,b=m.hasOwnProperty,T=m.toString,E={};E["[object Array]"]=E["[object Date]"]=E["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},E["[object Boolean]"]=E[g]={constructor:!0,toString:!0,valueOf:!0},E[h]=E["[object Function]"]=E["[object RegExp]"]={constructor:!0,toString:!0},E[p]={constructor:!0},i(y,function(t){for(var e in E)if(b.call(E,e)){var r=E[e];r[t]=b.call(r,t)}}),e.exports=n},{"../internal/arrayEach":15,"../internal/isIndex":29,"../internal/isLength":31,"../lang/isArguments":35,"../lang/isArray":36,"../lang/isFunction":37,"../lang/isObject":39,"../lang/isString":41,"../support":47}],46:[function(t,e,r){var n=t("../internal/baseMerge"),i=t("../internal/createAssigner"),o=i(n);e.exports=o},{"../internal/baseMerge":19,"../internal/createAssigner":23}],47:[function(t,e,r){var n=Array.prototype,i=Error.prototype,o=Object.prototype,a=o.propertyIsEnumerable,s=n.splice,l={};!function(t){var e=function(){this.x=1},r={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var o in new e)n.push(o);l.enumErrorProps=a.call(i,"message")||a.call(i,"name"),l.enumPrototypes=a.call(e,"prototype"),l.nonEnumShadows=!/valueOf/.test(n),l.ownLast="x"!=n[0],l.spliceObjects=(s.call(r,0,1),!r[0]),l.unindexedChars="x"[0]+Object("x")[0]!="xx"}(),e.exports=l},{}],48:[function(t,e,r){function n(t){return t}e.exports=n},{}],49:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Array.prototype.slice,a=t("./isArguments"),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},f={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!f["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{d(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),p=function(t){if("undefined"==typeof window||!h)return d(t);try{return d(t)}catch(t){return!1}},g=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===i.call(t),o=a(t),s=e&&"[object String]"===i.call(t),d=[];if(!e&&!r&&!o)throw new TypeError("Object.keys called on a non-object");var f=u&&r;if(s&&t.length>0&&!n.call(t,0))for(var h=0;h<t.length;++h)d.push(String(h));if(o&&t.length>0)for(var g=0;g<t.length;++g)d.push(String(g));else for(var y in t)f&&"prototype"===y||!n.call(t,y)||d.push(String(y));if(l)for(var v=p(t),m=0;m<c.length;++m)v&&"constructor"===c[m]||!n.call(t,c[m])||d.push(c[m]);return d};g.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return t(a(e)?o.call(e):e)}}}else Object.keys=g;return Object.keys||g},e.exports=g},{"./isArguments":50}],50:[function(t,e,r){"use strict";var n=Object.prototype.toString;e.exports=function(t){var e=n.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),r}},{}],51:[function(t,e,r){"use strict";var n=t("object-keys");e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;t[e]=42;for(e in t)return!1;if(0!==n(t).length)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},{"object-keys":49}],52:[function(t,e,r){"use strict";var n=t("object-keys"),i=t("function-bind"),o=function(t){return void 0!==t&&null!==t},a=t("./hasSymbols")(),s=Object,l=i.call(Function.call,Array.prototype.push),u=i.call(Function.call,Object.prototype.propertyIsEnumerable),c=a?Object.getOwnPropertySymbols:null;e.exports=function(t,e){if(!o(t))throw new TypeError("target must be an object");var r,i,d,f,h,p,g,y=s(t);for(r=1;r<arguments.length;++r){i=s(arguments[r]),f=n(i);var v=a&&(Object.getOwnPropertySymbols||c);if(v)for(h=v(i),d=0;d<h.length;++d)g=h[d],u(i,g)&&l(f,g);for(d=0;d<f.length;++d)g=f[d],p=i[g],u(i,g)&&(y[g]=p)}return y}},{"./hasSymbols":51,"function-bind":6,"object-keys":49}],53:[function(t,e,r){"use strict";var n=t("define-properties"),i=t("./implementation"),o=t("./polyfill"),a=t("./shim"),s=o();n(s,{implementation:i,getPolyfill:o,shim:a}),e.exports=s},{"./implementation":52,"./polyfill":54,"./shim":55,"define-properties":2}],54:[function(t,e,r){"use strict";var n=t("./implementation"),i=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var i=Object.assign({},r),o="";for(var a in i)o+=a;return t!==o},o=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1};e.exports=function(){return Object.assign?i()?n:o()?n:Object.assign:n}},{"./implementation":52}],55:[function(t,e,r){"use strict";var n=t("define-properties"),i=t("./polyfill");e.exports=function(){var t=i();return n(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}},{"./polyfill":54,"define-properties":2}],56:[function(t,e,r){var n=t("trim"),i=t("for-each"),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return i(n(t).split("\n"),function(t){var r=t.indexOf(":"),i=n(t.slice(0,r)).toLowerCase(),a=n(t.slice(r+1));void 0===e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},{"for-each":3,trim:58}],57:[function(t,e,r){function n(t,e){var r,n=null;try{r=JSON.parse(t,e)}catch(t){n=t}return[n,r]}e.exports=n},{}],58:[function(t,e,r){function n(t){return t.replace(/^\s*|\s*$/g,"")}r=e.exports=n,r.left=function(t){return t.replace(/^\s*/,"")},r.right=function(t){return t.replace(/\s*$/,"")}},{}],59:[function(t,e,r){function n(t){return t.replace(/\n\r?\s*/g,"")}e.exports=function(t){for(var e="",r=0;r<arguments.length;r++)e+=n(t[r])+(arguments[r+1]||"");return e}},{}],60:[function(t,e,r){"use strict";function n(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e,r){var n=t;return c(e)?(r=e,"string"==typeof t&&(n={uri:t})):n=f(e,{uri:t}),n.callback=r,n}function o(t,e,r){return e=i(t,e,r),a(e)}function a(t){function e(){4===f.readyState&&a()}function r(){var t=void 0;if(t=f.response?f.response:f.responseText||s(f),T)try{t=JSON.parse(t)}catch(t){}return t}function i(t){return clearTimeout(g),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,u(t,c)}function a(){if(!p){var e;clearTimeout(g),e=t.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var n=c,i=null;return 0!==e?(n={body:r(),statusCode:e,method:v,headers:{},url:y,rawRequest:f},f.getAllResponseHeaders&&(n.headers=d(f.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,n,n.body)}}if(void 0===t.callback)throw new Error("callback argument missing");var l=!1,u=function(e,r,n){l||(l=!0,t.callback(e,r,n))},c={body:void 0,headers:{},statusCode:0,method:v,url:y,rawRequest:f},f=t.xhr||null;f||(f=t.cors||t.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var h,p,g,y=f.url=t.uri||t.url,v=f.method=t.method||"GET",m=t.body||t.data||null,_=f.headers=t.headers||{},b=!!t.sync,T=!1;if("json"in t&&(T=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),m=JSON.stringify(t.json))),f.onreadystatechange=e,f.onload=a,f.onerror=i,f.onprogress=function(){},f.ontimeout=i,f.open(v,y,!b,t.username,t.password),b||(f.withCredentials=!!t.withCredentials),!b&&t.timeout>0&&(g=setTimeout(function(){p=!0,f.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",i(t)},t.timeout)),f.setRequestHeader)for(h in _)_.hasOwnProperty(h)&&f.setRequestHeader(h,_[h]);else if(t.headers&&!n(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(f.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(f),f.send(m),f}function s(t){if("document"===t.responseType)return t.responseXML;var e=204===t.status&&t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function l(){}var u=t("global/window"),c=t("is-function"),d=t("parse-headers"),f=t("xtend");e.exports=o,o.XMLHttpRequest=u.XMLHttpRequest||l,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:u.XDomainRequest,function(t,e){for(var r=0;r<t.length;r++)e(t[r])}(["get","put","post","patch","head","delete"],function(t){o["delete"===t?"del":t]=function(e,r,n){return r=i(e,r,n),r.method=t.toUpperCase(),a(r)}})},{"global/window":8,"is-function":9,"parse-headers":56,xtend:61}],61:[function(t,e,r){function n(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var n in r)i.call(r,n)&&(t[n]=r[n])}return t}e.exports=n;var i=Object.prototype.hasOwnProperty},{}],62:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("./button.js"),s=n(a),l=t("./component.js"),u=n(l),c=function(t){function e(r,n){i(this,e),t.call(this,r,n)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-bigPlay-button"},e.prototype.handleClick=function(){this.player_.play()},e}(s.default);c.prototype.controlText_="Play Video",u.default.registerComponent("BigPlayButton",c),r.default=c,e.exports=r.default},{"./button.js":63,"./component.js":65}],63:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./clickable-component.js"),l=i(s),u=t("./component"),c=i(u),d=t("./utils/events.js"),f=(n(d),t("./utils/fn.js")),h=(n(f),t("./utils/log.js")),p=i(h),g=t("global/document"),y=(i(g),t("object.assign")),v=i(y),m=function(t){function e(r,n){o(this,e),t.call(this,r,n)}return a(e,t),e.prototype.createEl=function(){var t=arguments.length<=0||void 0===arguments[0]?"button":arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];e=v.default({className:this.buildCSSClass()},e),"button"!==t&&(p.default.warn("Creating a Button with an HTML element of "+t+" is deprecated; use ClickableComponent instead."),e=v.default({tabIndex:0},e),r=v.default({role:"button"},r)),r=v.default({type:"button","aria-live":"polite"},r);var n=c.default.prototype.createEl.call(this,t,e,r);return this.createControlTextEl(n),n},e.prototype.addChild=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=this.constructor.name;return p.default.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),c.default.prototype.addChild.call(this,t,e)},e.prototype.handleKeyPress=function(e){13===e.which||t.prototype.handleKeyPress.call(this,e)},e}(l.default);c.default.registerComponent("Button",m),r.default=m,e.exports=r.default},{"./clickable-component.js":64,"./component":65,"./utils/events.js":116,"./utils/fn.js":117,"./utils/log.js":120,"global/document":7,"object.assign":53}],64:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./component"),l=i(s),u=t("./utils/dom.js"),c=n(u),d=t("./utils/events.js"),f=n(d),h=t("./utils/fn.js"),p=n(h),g=t("./utils/log.js"),y=i(g),v=t("global/document"),m=i(v),_=t("object.assign"),b=i(_),T=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.emitTapEvents(),this.on("tap",this.handleClick),this.on("click",this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur)}return a(e,t),e.prototype.createEl=function(){var e=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];r=b.default({className:this.buildCSSClass(),tabIndex:0},r),"button"===e&&y.default.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=b.default({role:"button","aria-live":"polite"},n);var i=t.prototype.createEl.call(this,e,r,n);return this.createControlTextEl(i),i},e.prototype.createControlTextEl=function(t){return this.controlTextEl_=c.createEl("span",{className:"vjs-control-text"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_),this.controlTextEl_},e.prototype.controlText=function(t){return t?(this.controlText_=t,this.controlTextEl_.innerHTML=this.localize(this.controlText_),this):this.controlText_||"Need Text"},e.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},e.prototype.addChild=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.prototype.addChild.call(this,e,r)},e.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),this},e.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),this},e.prototype.handleClick=function(){},e.prototype.handleFocus=function(){f.on(m.default,"keydown",p.bind(this,this.handleKeyPress))},e.prototype.handleKeyPress=function(e){13===e.which?(e.preventDefault(),this.handleClick(e)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e.prototype.handleBlur=function(){f.off(m.default,"keydown",p.bind(this,this.handleKeyPress))},e}(l.default);l.default.registerComponent("ClickableComponent",T),r.default=T,e.exports=r.default},{"./component":65,
"./utils/dom.js":115,"./utils/events.js":116,"./utils/fn.js":117,"./utils/log.js":120,"global/document":7,"object.assign":53}],65:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=t("global/window"),s=i(a),l=t("./utils/dom.js"),u=n(l),c=t("./utils/fn.js"),d=n(c),f=t("./utils/guid.js"),h=n(f),p=t("./utils/events.js"),g=n(p),y=t("./utils/log.js"),v=i(y),m=t("./utils/to-title-case.js"),_=i(m),b=t("object.assign"),T=i(b),E=t("./utils/merge-options.js"),S=i(E),w=function(){function t(e,r,n){if(o(this,t),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=S.default({},this.options_),r=this.options_=S.default(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+h.newGUID()}this.name_=r.name||null,r.el?this.el_=r.el:!1!==r.createEl&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},!1!==r.initChildren&&this.initChildren(),this.ready(n),!1!==r.reportTouchActivity&&this.enableTouchActivity()}return t.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),u.removeElData(this.el_),this.el_=null},t.prototype.player=function(){return this.player_},t.prototype.options=function(t){return v.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t?(this.options_=S.default(this.options_,t),this.options_):this.options_},t.prototype.el=function(){return this.el_},t.prototype.createEl=function(t,e,r){return u.createEl(t,e,r)},t.prototype.localize=function(t){var e=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages();if(!e||!r)return t;var n=r[e];if(n&&n[t])return n[t];var i=e.split("-")[0],o=r[i];return o&&o[t]?o[t]:t},t.prototype.contentEl=function(){return this.contentEl_||this.el_},t.prototype.id=function(){return this.id_},t.prototype.name=function(){return this.name_},t.prototype.children=function(){return this.children_},t.prototype.getChildById=function(t){return this.childIndex_[t]},t.prototype.getChild=function(t){return this.childNameIndex_[t]},t.prototype.addChild=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?this.children_.length:arguments[2],i=void 0,o=void 0;if("string"==typeof e){o=e,r||(r={}),!0===r&&(v.default.warn("Initializing a child component with `true` is deprecated. Children should be defined in an array when possible, but if necessary use an object instead of `true`."),r={});var a=r.componentClass||_.default(o);r.name=o;var s=t.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,r)}else i=e;if(this.children_.splice(n,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),o=o||i.name&&i.name(),o&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var l=this.contentEl().children,u=l[n]||null;this.contentEl().insertBefore(i.el(),u)}return i},t.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===t){e=!0,this.children_.splice(r,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var n=t.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},t.prototype.initChildren=function(){var e=this,r=this.options_.children;r&&function(){var n=e.options_,i=function(t){var r=t.name,i=t.opts;if(void 0!==n[r]&&(i=n[r]),!1!==i){!0===i&&(i={}),i.playerOptions=e.options_.playerOptions;var o=e.addChild(r,i);o&&(e[r]=o)}},o=void 0,a=t.getComponent("Tech");o=Array.isArray(r)?r:Object.keys(r),o.concat(Object.keys(e.options_).filter(function(t){return!o.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(t){var n=void 0,i=void 0;return"string"==typeof t?(n=t,i=r[n]||e.options_[n]||{}):(n=t.name,i=t),{name:n,opts:i}}).filter(function(e){var r=t.getComponent(e.opts.componentClass||_.default(e.name));return r&&!a.isTech(r)}).forEach(i)}()},t.prototype.buildCSSClass=function(){return""},t.prototype.on=function(t,e,r){var n=this;return"string"==typeof t||Array.isArray(t)?g.on(this.el_,t,d.bind(this,e)):function(){var i=t,o=e,a=d.bind(n,r),s=function(){return n.off(i,o,a)};s.guid=a.guid,n.on("dispose",s);var l=function(){return n.off("dispose",s)};l.guid=a.guid,t.nodeName?(g.on(i,o,a),g.on(i,"dispose",l)):"function"==typeof t.on&&(i.on(o,a),i.on("dispose",l))}(),this},t.prototype.off=function(t,e,r){if(!t||"string"==typeof t||Array.isArray(t))g.off(this.el_,t,e);else{var n=t,i=e,o=d.bind(this,r);this.off("dispose",o),t.nodeName?(g.off(n,i,o),g.off(n,"dispose",o)):(n.off(i,o),n.off("dispose",o))}return this},t.prototype.one=function(t,e,r){var n=this,i=arguments;return"string"==typeof t||Array.isArray(t)?g.one(this.el_,t,d.bind(this,e)):function(){var o=t,a=e,s=d.bind(n,r),l=function t(){n.off(o,a,t),s.apply(null,i)};l.guid=s.guid,n.on(o,a,l)}(),this},t.prototype.trigger=function(t,e){return g.trigger(this.el_,t,e),this},t.prototype.ready=function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return t&&(this.isReady_?e?t.call(this):this.setTimeout(t,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t))),this},t.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},t.prototype.$=function(t,e){return u.$(t,e||this.contentEl())},t.prototype.$$=function(t,e){return u.$$(t,e||this.contentEl())},t.prototype.hasClass=function(t){return u.hasElClass(this.el_,t)},t.prototype.addClass=function(t){return u.addElClass(this.el_,t),this},t.prototype.removeClass=function(t){return u.removeElClass(this.el_,t),this},t.prototype.toggleClass=function(t,e){return u.toggleElClass(this.el_,t,e),this},t.prototype.show=function(){return this.removeClass("vjs-hidden"),this},t.prototype.hide=function(){return this.addClass("vjs-hidden"),this},t.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},t.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},t.prototype.width=function(t,e){return this.dimension("width",t,e)},t.prototype.height=function(t,e){return this.dimension("height",t,e)},t.prototype.dimensions=function(t,e){return this.width(t,!0).height(e)},t.prototype.dimension=function(t,e,r){if(void 0!==e)return null!==e&&e===e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",r||this.trigger("resize"),this;if(!this.el_)return 0;var n=this.el_.style[t],i=n.indexOf("px");return-1!==i?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+_.default(t)],10)},t.prototype.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s.default.getComputedStyle){var r=s.default.getComputedStyle(this.el_);e=r.getPropertyValue(t)||r[t]}else if(this.el_.currentStyle){var n="offset"+_.default(t);e=this.el_[n]}return e=parseFloat(e)},t.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.prototype.currentWidth=function(){return this.currentDimension("width")},t.prototype.currentHeight=function(){return this.currentDimension("height")},t.prototype.emitTapEvents=function(){var t=0,e=null,r=void 0;this.on("touchstart",function(n){1===n.touches.length&&(e=T.default({},n.touches[0]),t=(new Date).getTime(),r=!0)}),this.on("touchmove",function(t){if(t.touches.length>1)r=!1;else if(e){var n=t.touches[0].pageX-e.pageX,i=t.touches[0].pageY-e.pageY,o=Math.sqrt(n*n+i*i);o>10&&(r=!1)}});var n=function(){r=!1};this.on("touchleave",n),this.on("touchcancel",n),this.on("touchend",function(n){if(e=null,!0===r){(new Date).getTime()-t<200&&(n.preventDefault(),this.trigger("tap"))}})},t.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=d.bind(this.player(),this.player().reportUserActivity),e=void 0;this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var r=function(r){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}},t.prototype.setTimeout=function(t,e){t=d.bind(this,t);var r=s.default.setTimeout(t,e),n=function(){this.clearTimeout(r)};return n.guid="vjs-timeout-"+r,this.on("dispose",n),r},t.prototype.clearTimeout=function(t){s.default.clearTimeout(t);var e=function(){};return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},t.prototype.setInterval=function(t,e){t=d.bind(this,t);var r=s.default.setInterval(t,e),n=function(){this.clearInterval(r)};return n.guid="vjs-interval-"+r,this.on("dispose",n),r},t.prototype.clearInterval=function(t){s.default.clearInterval(t);var e=function(){};return e.guid="vjs-interval-"+t,this.off("dispose",e),t},t.registerComponent=function(e,r){return t.components_||(t.components_={}),t.components_[e]=r,r},t.getComponent=function(e){return t.components_&&t.components_[e]?t.components_[e]:s.default&&s.default.videojs&&s.default.videojs[e]?(v.default.warn("The "+e+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s.default.videojs[e]):void 0},t.extend=function(e){e=e||{},v.default.warn("Component.extend({}) has been deprecated, use videojs.extend(Component, {}) instead");var r=e.init||e.init||this.prototype.init||this.prototype.init||function(){},n=function(){r.apply(this,arguments)};n.prototype=Object.create(this.prototype),n.prototype.constructor=n,n.extend=t.extend;for(var i in e)e.hasOwnProperty(i)&&(n.prototype[i]=e[i]);return n},t}();w.registerComponent("Component",w),r.default=w,e.exports=r.default},{"./utils/dom.js":115,"./utils/events.js":116,"./utils/fn.js":117,"./utils/guid.js":119,"./utils/log.js":120,"./utils/merge-options.js":121,"./utils/to-title-case.js":124,"global/window":8,"object.assign":53}],66:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component.js"),s=n(a),l=t("./play-toggle.js"),u=(n(l),t("./time-controls/current-time-display.js")),c=(n(u),t("./time-controls/duration-display.js")),d=(n(c),t("./time-controls/time-divider.js")),f=(n(d),t("./time-controls/remaining-time-display.js")),h=(n(f),t("./live-display.js")),p=(n(h),t("./progress-control/progress-control.js")),g=(n(p),t("./fullscreen-toggle.js")),y=(n(g),t("./volume-control/volume-control.js")),v=(n(y),t("./volume-menu-button.js")),m=(n(v),t("./mute-toggle.js")),_=(n(m),t("./text-track-controls/descriptions-button.js")),b=(n(_),t("./playback-rate-menu/playback-rate-menu-button.js")),T=(n(b),t("./set-controls/control-set-display.js")),E=(n(T),function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},e}(s.default));E.prototype.options_={loadEvent:"play",children:["playToggle","remainingTimeDisplay","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","volumeMenuButton","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","setToggle","fullscreenToggle"]},s.default.registerComponent("ControlBar",E),r.default=E,e.exports=r.default},{"../component.js":65,"./fullscreen-toggle.js":67,"./live-display.js":202,"./mute-toggle.js":68,"./play-toggle.js":69,"./playback-rate-menu/playback-rate-menu-button.js":70,"./progress-control/progress-control.js":75,"./set-controls/control-set-display.js":78,"./time-controls/current-time-display.js":79,"./time-controls/duration-display.js":80,"./time-controls/remaining-time-display.js":81,"./time-controls/time-divider.js":82,"./volume-control/volume-control.js":84,"./volume-menu-button.js":86,"./text-track-controls/descriptions-button.js":200}],67:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../button.js"),s=n(a),l=t("../component.js"),u=n(l),c=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){t.target.blur(),this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText("Fullscreen")):(this.player_.requestFullscreen(),this.controlText("Non-Fullscreen"))},e}(s.default);c.prototype.controlText_="Fullscreen",u.default.registerComponent("FullscreenToggle",c),r.default=c,e.exports=r.default},{"../button.js":63,"../component.js":65}],202:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component"),s=n(a),l=t("../utils/dom.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t("global/document"),d=n(c),f=t("global/window"),h=n(f),p=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.parentel=r.el_;var o=h.default.mocoplayer.config.get().ManualSwitchCdn;this.line=o?n.playerOptions.cdn:"auto"}return o(e,t),e.prototype.createEl=function(){var e=this,r=t.prototype.createEl.call(this,"div",{className:"vjs-switchCdnLine-control"},{title:"线路选择"});return this.contentEl_=u.createEl("div",{className:"vjs-switchCdnLine-display",innerHTML:""}),this.contentEl_.onclick=function(){var t=d.default.getElementsByClassName("switch-cdn-line-wrap")[0],r=d.default.getElementById("setoverlay");"visible"===r.style.visibility&&(r.style.visibility="hidden"),t?t.parentNode.removeChild(t):e.parentel.appendChild(e.CdnSwitchDOM(e.line))},r.appendChild(this.contentEl_),r},e.prototype.CdnSwitchDOM=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e='<iframe class="report-wrap" src="/mocoplayer/report2.html?cdn='+t+'"></iframe>';return u.createEl("div",{className:"switch-cdn-line-wrap",id:"switchCdnLineWrap",innerHTML:e})},e}(s.default);s.default.registerComponent("LiveDisplay",p),r.default=p,e.exports=r.default},{"../component":65,"../utils/dom.js":115,"global/document":7,"global/window":8}],68:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../button"),s=n(a),l=t("../component"),u=n(l),c=t("../utils/dom.js"),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(c),f=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"volumechange",this.update),r.tech_&&!1===r.tech_.featuresVolumeControl&&this.addClass("vjs-hidden"),this.on(r,"loadstart",function(){this.update(),!1===r.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(){this.player_.muted(!this.player_.muted())},e.prototype.update=function(){var t=this.player_.volume(),e=3;0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);var r=this.player_.muted()?"Unmute":"Mute";this.controlText()!==r&&this.controlText(r);for(var n=0;n<4;n++)d.removeElClass(this.el_,"vjs-vol-"+n);d.addElClass(this.el_,"vjs-vol-"+e)},e}(s.default);f.prototype.controlText_="Mute",u.default.registerComponent("MuteToggle",f),r.default=f,e.exports=r.default},{"../button":63,"../component":65,"../utils/dom.js":115}],69:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../button.js"),s=n(a),l=t("../component.js"),u=n(l),c=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"play",this.handlePlay),this.on(r,"pause",this.handlePause)}return o(e,t),e.prototype.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(t){t.target.blur(),this.player_.clickFlag="click",this.player_.paused()?this.player_.play():this.player_.pause()},e.prototype.handlePlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},e.prototype.handlePause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},e}(s.default);c.prototype.controlText_="Play",u.default.registerComponent("PlayToggle",c),r.default=c,e.exports=r.default},{"../button.js":63,"../component.js":65}],70:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../menu/menu-button.js"),s=n(a),l=t("../../menu/menu.js"),u=n(l),c=t("./playback-rate-menu-item.js"),d=n(c),f=t("../../component.js"),h=n(f),p=t("../../utils/dom.js"),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(p),y=t("global/window"),v=(n(y),function(t){function e(r,n){i(this,e),t.call(this,r,n),this.updateVisibility(),this.updateLabel(),this.on(r,"loadstart",this.updateVisibility),this.on(r,"ratechange",this.updateLabel)}return o(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this),r=this.playbackRates()[0];return this.labelEl_=g.createEl("div",{className:"vjs-playback-rate-value rate"+r.replace(".","")+"x",innerHTML:""}),e.appendChild(this.labelEl_),e.onmouseover=function(){g.getEl("vjsMenu").style.visibility="visible"},e},e.prototype.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},e.prototype.createMenu=function(){var t=new u.default(this.player()),e=this.playbackRates();if(e)for(var r=e.length-1;r>=0;r--)t.addChild(new d.default(this.player(),{rate:e[r]+"x"}));return t},e.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},e.prototype.handleClick=function(){},e.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},e.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},e.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},e.prototype.updateLabel=function(){if(this.playbackRateSupported()){var t=this.player().playbackRate();if(t!==this.player().options_.rate)return;-1===t.toString().indexOf(".")&&(t+=".0"),this.labelEl_.className="vjs-playback-rate-value";var e=t+"";g.addElClass(this.labelEl_,"rate"+e.replace(".","")+"x")}},e}(s.default));v.prototype.controlText_="Playback Rate",h.default.registerComponent("PlaybackRateMenuButton",v),r.default=v,e.exports=r.default},{"../../component.js":65,"../../menu/menu-button.js":92,"../../menu/menu.js":94,"../../utils/dom.js":115,"./playback-rate-menu-item.js":71,"global/window":8}],71:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a,s=t("../../menu/menu-item.js"),l=n(s),u=t("../../component.js"),c=n(u),d=t("../../utils/dom.js"),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(d),h=function(t){function e(r,n){i(this,e);var o=n.rate,s=parseFloat(o,10);if(n.label=o,n.selected=1===s,t.call(this,r,n),this.label=o,this.rate=s,r.options_.rate===this.rate){a=this.el(),this.el().className="vjs-menu-item current";var l=f.createEl("i",{className:"imv2-check",innerHTML:""});this.el().appendChild(l)}else this.el().className="vjs-menu-item";this.on(r,"ratechange",this.update)}return o(e,t),e.prototype.handleClick=function(){t.prototype.handleClick.call(this),this.player().options_.rate=this.rate,this.player().playbackRate(this.rate),f.getEl("vjsMenu").style.visibility="hidden",a=this.el()},e.prototype.update=function(){if(this.selected(this.player().playbackRate()===this.rate),this.el().className="vjs-menu-item",!a.getElementsByTagName("i")[0]){var t=f.createEl("i",{className:"imv2-check",innerHTML:""});a.appendChild(t)}a.className="vjs-menu-item current"},e}(l.default);h.prototype.contentElType="button",c.default.registerComponent("PlaybackRateMenuItem",h),r.default=h,e.exports=r.default},{"../../component.js":65,"../../menu/menu-item.js":93,"../../utils/dom.js":115}],72:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var o=t("../../component.js"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=t("../../utils/dom.js"),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(s),u=function(t){function e(r,i){n(this,e),t.call(this,r,i),this.on(r,"progress",this.update)}return i(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},e.prototype.update=function(){var t=this.player_.buffered(),e=this.player_.duration(),r=this.player_.bufferedEnd(),n=this.el_.children,i=function(t,e){var r=t/e||0;return 100*(r>=1?1:r)+"%"};this.el_.style.width=i(r,e);for(var o=0;o<t.length;o++){var a=t.start(o),s=t.end(o),u=n[o];u||(u=this.el_.appendChild(l.createEl())),u.style.left=i(a,r),u.style.width=i(s-a,r)}for(var o=n.length;o>t.length;o--)this.el_.removeChild(n[o-1])},e}(a.default);a.default.registerComponent("LoadProgressBar",u),r.default=u,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115}],73:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("global/window"),l=i(s),u=t("../../component.js"),c=i(u),d=t("../../utils/dom.js"),f=n(d),h=t("../../utils/fn.js"),p=n(h),g=t("../../utils/format-time.js"),y=i(g),v=t("lodash-compat/function/throttle"),m=i(v),_=function(t){function e(r,n){var i=this;o(this,e),t.call(this,r,n),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltip=f.createEl("div",{className:"vjs-time-tooltip"}),this.el().appendChild(this.tooltip),this.addClass("vjs-keep-tooltips-inside")),this.update(0,0),r.on("ready",function(){i.on(r.controlBar.progressControl.el(),"mousemove",m.default(p.bind(i,i.handleMouseMove),25))})}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},e.prototype.handleMouseMove=function(t){var e=this.player_.duration(),r=this.calculateDistance(t)*e,n=t.pageX-f.findElPosition(this.el().parentNode).left;this.update(r,n)},e.prototype.update=function(t,e){var r=y.default(t,this.player_.duration()),n=parseFloat(l.default.getComputedStyle(this.player().el()).width);if(e<20&&(e=20),e>n-20&&(e=n-20),this.el().style.left=e+"px",this.el().setAttribute("data-current-time",r),this.keepTooltipsInside){var i=this.clampPosition_(e),o=e-i+1,a=parseFloat(l.default.getComputedStyle(this.tooltip).width),s=a/2;this.tooltip.innerHTML=r,this.tooltip.style.right="-"+(s-o)+"px"}},e.prototype.calculateDistance=function(t){return f.getPointerPosition(this.el().parentNode,t).x},e.prototype.clampPosition_=function(t){if(!this.keepTooltipsInside)return t;var e=parseFloat(l.default.getComputedStyle(this.player().el()).width),r=parseFloat(l.default.getComputedStyle(this.tooltip).width),n=r/2,i=t;return t<n?i=Math.ceil(n):t>e-n&&(i=Math.floor(e-n)),i},e}(c.default);c.default.registerComponent("MouseTimeDisplay",_),r.default=_,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"../../utils/fn.js":117,"../../utils/format-time.js":118,"global/window":8,"lodash-compat/function/throttle":13}],74:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),l=i(s),u=t("../../utils/fn.js"),c=n(u),d=t("../../utils/dom.js"),f=(n(d),t("../../utils/format-time.js")),h=i(f),p=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.updateDataAttr(),this.on(r,"timeupdate",this.updateDataAttr),r.ready(c.bind(this,this.updateDataAttr)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&this.addClass("vjs-keep-tooltips-inside")}return a(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},e.prototype.updateDataAttr=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",h.default(t,this.player_.duration()))},e}(l.default);l.default.registerComponent("PlayProgressBar",p),r.default=p,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"../../utils/fn.js":117,"../../utils/format-time.js":118}],75:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),l=t("./seek-bar.js"),u=(n(l),t("./mouse-time-display.js")),c=(n(u),function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},e}(s.default));c.prototype.options_={children:["seekBar"]},s.default.registerComponent("ProgressControl",c),r.default=c,e.exports=r.default},{"../../component.js":65,"./mouse-time-display.js":73,"./seek-bar.js":76}],76:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0
;var a=t("global/window"),s=n(a),l=t("../../slider/slider.js"),u=n(l),c=t("../../component.js"),d=n(c),f=t("./load-progress-bar.js"),h=(n(f),t("./play-progress-bar.js")),p=(n(h),t("./tooltip-progress-bar.js")),g=(n(p),t("../../utils/fn.js")),y=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(g),v=t("../../utils/format-time.js"),m=n(v),_=t("object.assign"),b=(n(_),function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateProgress),this.on(r,"ended",this.updateProgress),r.ready(y.bind(this,this.updateProgress)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(this.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),this.keepTooltipsInside&&(this.tooltipProgressBar=this.addChild("TooltipProgressBar"))}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},e.prototype.updateProgress=function(){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var t=parseFloat(s.default.getComputedStyle(this.player().el()).width),e=parseFloat(s.default.getComputedStyle(this.tooltipProgressBar.tooltip).width),r=this.tooltipProgressBar.el().style;r.maxWidth=Math.floor(t-e/2)+"px",r.minWidth=Math.ceil(e/2)+"px",r.right="-"+e/2+"px"}},e.prototype.updateAriaAttributes=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();t.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),t.setAttribute("aria-valuetext",m.default(e,this.player_.duration()))},e.prototype.getPercent=function(){var t=this.player_.currentTime()/this.player_.duration();return t>=1?1:t},e.prototype.handleMouseDown=function(e){"playing"!==s.default.playerState&&"seeked"!==s.default.playerState||(t.prototype.handleMouseDown.call(this,e),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause())},e.prototype.handleMouseMove=function(t){var e=this.calculateDistance(t)*this.player_.duration();e>=this.player_.duration()-1||this.player_.currentTime(e)},e.prototype.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},e.prototype.stepForward=function(){this.player_.duration()-this.player_.currentTime()>5&&this.player_.currentTime(this.player_.currentTime()+5)},e.prototype.stepBack=function(){var t=this.player_.currentTime()-5;t<0&&(t=0),this.player_.currentTime(t)},e}(u.default));b.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},b.prototype.playerEvent="timeupdate",d.default.registerComponent("SeekBar",b),r.default=b,e.exports=r.default},{"../../component.js":65,"../../slider/slider.js":100,"../../utils/fn.js":117,"../../utils/format-time.js":118,"./load-progress-bar.js":72,"./play-progress-bar.js":74,"./tooltip-progress-bar.js":77,"global/window":8,"object.assign":53}],77:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../../component.js"),l=i(s),u=t("../../utils/fn.js"),c=n(u),d=t("../../utils/dom.js"),f=(n(d),t("../../utils/format-time.js")),h=i(f),p=function(t){function e(r,n){o(this,e),t.call(this,r,n),this.updateDataAttr(),this.on(r,"timeupdate",this.updateDataAttr),r.ready(c.bind(this,this.updateDataAttr))}return a(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=e.querySelector(".vjs-time-tooltip"),e},e.prototype.updateDataAttr=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),e=h.default(t,this.player_.duration());this.el_.setAttribute("data-current-time",e),this.tooltip.innerHTML=e},e}(l.default);l.default.registerComponent("TooltipProgressBar",p),r.default=p,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"../../utils/fn.js":117,"../../utils/format-time.js":118}],78:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),l=t("../../utils/dom.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t("global/window"),d=n(c),f=void 0,h=void 0,p=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"loadedmetadata",this.updateContent),f=n.playerOptions,this.buildSetOverlay(r.id())}return o(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-setting-control vjs-set-control-button"});return this.contentEl_=u.createEl("div",{className:"vjs-set-button"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(){var t=this;this.contentEl_.onclick=function(){"visible"===h.style.visibility?t.hideSetOverlay():t.showSetOverlay()};var e=null,r=function(){clearInterval(e)},n=function(){e=setInterval(function(){clearInterval(e),t.hideSetOverlay()},300)};this.contentEl_.onmouseover=h.onmouseover=r,this.contentEl_.onmouseout=h.onmouseout=n},e.prototype.buildSetOverlay=function(t){var e=this;h=u.createEl("div",{className:"vjs-set-menu-bg"}),h.zIndex="1000",h.id="setoverlay",u.getEl(t).appendChild(h),h.innerHTML=this.template(),this.hideSetOverlay(),u.getEl("switchFlashPlayer").onclick=function(){if(!f.model.flash)return!1;var t=u.getEl("levelOverlay").getElementsByClassName("levelCurrent")[0].index,r={level:t,cdn:f.cdn,primary:"flash"};d.default.switchPlayer(r),e.hideSetOverlay()}},e.prototype.hideSetOverlay=function(){h.style.visibility="hidden"},e.prototype.showSetOverlay=function(){h.style.visibility="visible"},e.prototype.template=function(){return"\n      <h4>\n        <div class='titleimg'></div>\n      </h4>\n      <div class=''>\n        <a class='vjs-set-link selected clearfix' href='javascript:;'>\n          <span>HTML5</span>\n          <i class='imv2-check'></i>\n        </a>\n        <a class='vjs-set-link clearfix "+(!1===f.model.flash?"disabled":"")+"' id='switchFlashPlayer' href='javascript:;'>\n          <span>FLASH</span>\n        </a>\n      </div>\n    "},e}(s.default);s.default.registerComponent("SetToggle",p),r.default=p,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"global/window":8}],200:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),l=t("../../utils/dom.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t("global/window"),d=n(c),f=void 0,h=void 0,p=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"loadedmetadata",this.updateContent),f=n.playerOptions,f.level=0===f.level?mocoplayer.config.get().level:f.level,this.buildSetOverlay(r.id())}return o(e,t),e.prototype.createEl=function(){var t=u.createEl("div",{className:"vjs-level-control vjs-level-control-button"});return this.contentEl_=u.createEl("div",{className:"vjs-level-button qM",id:"vjs-level-button"}),t.appendChild(this.contentEl_),t},e.prototype.updateContent=function(){var t=this;this.updateClass(f.level),this.contentEl_.onclick=function(){return!1};for(var e=h.getElementsByTagName("li"),r=0;r<e.length;r++)e[r].index=r,this.bindEvent(e[r],e);var n=null,i=function(){t.showOverlay(),clearInterval(n)},o=function(){n=setInterval(function(){clearInterval(n),t.hideOverlay()},30)};this.contentEl_.parentNode.onmouseover=u.getEl("levelOverlay").onmouseover=i,this.contentEl_.parentNode.onmouseout=u.getEl("levelOverlay").onmouseout=o},e.prototype.updateClass=function(t){var e="";1===t?e="qL":2===t?e="qM":3===t&&(e="qH");var r=u.getEl("vjs-level-button");r.className="vjs-level-button",u.addElClass(r,e)},e.prototype.bindEvent=function(t,e){var r=this;t.onclick=function(){if(u.hasElClass(this,"levelCurrent"))return!1;if(u.hasElClass(this,"disabled"))return!1;for(var t=0;t<e.length;t++)u.removeElClass(e[t],"levelCurrent");u.addElClass(this,"levelCurrent");var n={level:this.index+1,cdn:f.cdn,primary:"html5"};d.default.switchPlayer(n),r.updateClass(n.level),r.hideOverlay()}},e.prototype.buildSetOverlay=function(t){var e="";h=u.createEl("div",{className:"vjs-level-overlay"}),h.zIndex="1000",h.id="levelOverlay";for(var r=0;r<f.levels.length;r++)f.level===r+1?e+='<li class="levelCurrent clearfix">':!0===f.levels[r].disabled?e+='<li class="disabled">':e+="<li>",e+="<span>"+f.levels[r].name+"</span>",e+='<i class="imv2-check"></i>',e+="</li>";h.innerHTML=this.template(e),u.getEl(t).appendChild(h)},e.prototype.template=function(t){return"\n        <h4><div class='leveltitleimg'></h4>\n        <ul>"+t+"</ul>\n    "},e.prototype.showOverlay=function(){u.getEl("levelOverlay").style.display="block"},e.prototype.hideOverlay=function(){u.getEl("levelOverlay").style.display="none"},e}(s.default);s.default.registerComponent("DescriptionsButton",p),r.default=p,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"global/window":8}],79:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),l=t("../../utils/dom.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t("../../utils/format-time.js"),d=n(c),f=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateContent)}return o(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=u.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),e=this.localize("Current Time"),r=d.default(t,this.player_.duration());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> "+r)},e}(s.default);s.default.registerComponent("CurrentTimeDisplay",f),r.default=f,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"../../utils/format-time.js":118}],80:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),l=t("../../utils/dom.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t("../../utils/format-time.js"),d=n(c),f=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateContent),this.on(r,"loadedmetadata",this.updateContent)}return o(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=u.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(){var t=this.player_.duration();if(t&&this.duration_!==t){this.duration_=t;var e=this.localize("Duration Time"),r=d.default(t);this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> "+r}},e}(s.default);s.default.registerComponent("DurationDisplay",f),r.default=f,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"../../utils/format-time.js":118}],81:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),l=t("../../utils/dom.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t("../../utils/format-time.js"),d=n(c),f=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"timeupdate",this.updateContent),this.on(r,"endprev",this.updateContent),this.endpre=!1}return o(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=u.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> 00:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},e.prototype.updateContent=function(){if(this.player_.duration()){var t=(this.localize("Remaining Time"),d.default(this.player_.remainingTime()));t!==this.formattedTime_&&(this.formattedTime_=t)}var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.contentEl_.innerHTML=d.default(e,this.player_.duration())+" / "+d.default(this.player_.duration())},e}(s.default);s.default.registerComponent("RemainingTimeDisplay",f),r.default=f,e.exports=r.default},{"../../component.js":65,"../../utils/dom.js":115,"../../utils/format-time.js":118}],82:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var o=t("../../component.js"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(t){function e(){n(this,e),t.apply(this,arguments)}return i(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(a.default);a.default.registerComponent("TimeDivider",s),r.default=s,e.exports=r.default},{"../../component.js":65}],83:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../slider/slider.js"),s=n(a),l=t("../../component.js"),u=n(l),c=t("../../utils/fn.js"),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(c),f=t("./volume-level.js"),h=(n(f),function(t){function e(r,n){i(this,e),t.call(this,r,n),this.on(r,"volumechange",this.updateARIAAttributes),r.ready(d.bind(this,this.updateARIAAttributes)),this.update()}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},e.prototype.handleMouseMove=function(t){this.checkMuted(),this.player_.volume(this.calculateDistance(t))},e.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.prototype.updateARIAAttributes=function(){var t=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},e}(s.default));h.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},h.prototype.playerEvent="volumechange",u.default.registerComponent("VolumeBar",h),r.default=h,e.exports=r.default},{"../../component.js":65,"../../slider/slider.js":100,"../../utils/fn.js":117,"./volume-level.js":85}],84:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../../component.js"),s=n(a),l=t("./volume-bar.js"),u=(n(l),function(t){function e(r,n){i(this,e),t.call(this,r,n),r.tech_&&!1===r.tech_.featuresVolumeControl&&this.addClass("vjs-hidden"),this.on(r,"loadstart",function(){!1===r.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})}return o(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},e}(s.default));u.prototype.options_={children:["volumeBar"]},s.default.registerComponent("VolumeControl",u),r.default=u,e.exports=r.default},{"../../component.js":65,"./volume-bar.js":83}],85:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var o=t("../../component.js"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(t){function e(){n(this,e),t.apply(this,arguments)}return i(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(a.default);a.default.registerComponent("VolumeLevel",s),r.default=s,e.exports=r.default},{"../../component.js":65}],86:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../utils/fn.js"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),l=t("../component.js"),u=n(l),c=t("../popup/popup.js"),d=n(c),f=t("../popup/popup-button.js"),h=n(f),p=t("./mute-toggle.js"),g=n(p),y=t("./volume-control/volume-bar.js"),v=n(y),m=function(t){function e(r){function n(){r.tech_&&!1===r.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,e),void 0===o.inline&&(o.inline=!0),void 0===o.vertical&&(o.inline?o.vertical=!1:o.vertical=!0),o.volumeBar=o.volumeBar||{},o.volumeBar.vertical=!!o.vertical,t.call(this,r,o),this.on(r,"volumechange",this.volumeUpdate),this.on(r,"loadstart",this.volumeUpdate),n.call(this),this.on(r,"loadstart",n),this.on(this.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),this.on(this.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),this.on(this.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),this.on(this.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")})}return o(e,t),e.prototype.buildCSSClass=function(){var e="";return e=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+t.prototype.buildCSSClass.call(this)+" "+e},e.prototype.createPopup=function(){var t=new d.default(this.player_,{contentElType:"div"}),e=new v.default(this.player_,this.options_.volumeBar);return t.addChild(e),this.menuContent=t,this.volumeBar=e,this.attachVolumeBarEvents(),t},e.prototype.handleClick=function(){g.default.prototype.handleClick.call(this),t.prototype.handleClick.call(this)},e.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],s.bind(this,this.handleMouseDown))},e.prototype.handleMouseDown=function(t){this.on(["mousemove","touchmove"],s.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},e.prototype.handleMouseUp=function(t){this.off(["mousemove","touchmove"],s.bind(this.volumeBar,this.volumeBar.handleMouseMove))},e}(h.default);m.prototype.volumeUpdate=g.default.prototype.update,m.prototype.controlText_="Mute",u.default.registerComponent("VolumeMenuButton",m),r.default=m,e.exports=r.default},{"../component.js":65,"../popup/popup-button.js":97,"../popup/popup.js":98,"../utils/fn.js":117,"./mute-toggle.js":68,"./volume-control/volume-bar.js":83}],87:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./utils/events.js"),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(n),o=function(){};o.prototype.allowedEvents_={},o.prototype.on=function(t,e){var r=this.addEventListener;this.addEventListener=Function.prototype,i.on(this,t,e),this.addEventListener=r},o.prototype.addEventListener=o.prototype.on,o.prototype.off=function(t,e){i.off(this,t,e)},o.prototype.removeEventListener=o.prototype.off,o.prototype.one=function(t,e){i.one(this,t,e)},o.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=i.fixEvent(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),i.trigger(this,t)},o.prototype.dispatchEvent=o.prototype.trigger,r.default=o,e.exports=r.default},{"./utils/events.js":116}],88:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./utils/log"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)},a=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=function(){t.apply(this,arguments)},n={};"object"==typeof e?("function"==typeof e.init&&(i.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),e.constructor=e.init),e.constructor!==Object.prototype.constructor&&(r=e.constructor),n=e):"function"==typeof e&&(r=e),o(r,t);for(var a in n)n.hasOwnProperty(a)&&(r.prototype[a]=n[a]);return r};r.default=a,e.exports=r.default},{"./utils/log":120}],89:[function(t,e,r){"use strict";r.__esModule=!0;for(var n=t("global/document"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o={},a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=a[0],l=void 0,u=0;u<a.length;u++)if(a[u][1]in i.default){l=a[u];break}if(l)for(var u=0;u<l.length;u++)o[s[u]]=l[u];r.default=o,e.exports=r.default},{"global/document":7}],90:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var o=t("./component"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(t){function e(){n(this,e),t.apply(this,arguments)}return i(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},e}(a.default);a.default.registerComponent("LoadingSpinner",s),r.default=s,e.exports=r.default},{"./component":65}],91:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("object.assign"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function t(e){"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:"object"==typeof e&&i.default(this,e),this.message||(this.message=t.defaultMessages[this.code]||"")};o.prototype.code=0,o.prototype.message="",o.prototype.status=null,o.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],o.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var a=0;a<o.errorTypes.length;a++)o[o.errorTypes[a]]=a,o.prototype[o.errorTypes[a]]=a;r.default=o,e.exports=r.default},{"object.assign":53}],92:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../clickable-component.js"),l=i(s),u=t("../component.js"),c=i(u),d=t("./menu.js"),f=i(d),h=t("../utils/dom.js"),p=n(h),g=t("../utils/fn.js"),y=n(g),v=t("../utils/to-title-case.js"),m=i(v),_=function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),t.call(this,r,n),this.update(),this.enabled_=!0,this.el_.setAttribute("aria-haspopup","true"),this.el_.setAttribute("role","menuitem"),this.on("keydown",this.handleSubmenuKeyPress)}return a(e,t),e.prototype.update=function(){var t=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},e.prototype.createMenu=function(){var t=new f.default(this.player_);if(this.options_.title){var e=p.createEl("li",{className:"vjs-menu-title",innerHTML:m.default(this.options_.title),tabIndex:-1});t.children_.unshift(e),p.insertElFirst(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)t.addItem(this.items[r]);return t},e.prototype.createItems=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e.prototype.handleClick=function(){this.one("mouseout",y.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},e.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault()):38===e.which||40===e.which?this.buttonPressed_||(this.pressButton(),e.preventDefault()):t.prototype.handleKeyPress.call(this,e)},e.prototype.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault())},e.prototype.pressButton=function(){
this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},e.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},e.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,t.prototype.disable.call(this)},e.prototype.enable=function(){return this.enabled_=!0,t.prototype.enable.call(this)},e}(l.default);c.default.registerComponent("MenuButton",_),r.default=_,e.exports=r.default},{"../clickable-component.js":64,"../component.js":65,"../utils/dom.js":115,"../utils/fn.js":117,"../utils/to-title-case.js":124,"./menu.js":94}],93:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../clickable-component.js"),s=n(a),l=t("../component.js"),u=n(l),c=t("object.assign"),d=n(c),f=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.selectable=n.selectable,this.selected(n.selected),this.selectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitem")}return o(e,t),e.prototype.createEl=function(e,r,n){return t.prototype.createEl.call(this,"li",d.default({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},r),n)},e.prototype.handleClick=function(){this.selected(!0)},e.prototype.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(" ")))},e}(s.default);u.default.registerComponent("MenuItem",f),r.default=f,e.exports=r.default},{"../clickable-component.js":64,"../component.js":65,"object.assign":53}],94:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component.js"),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=t("../utils/dom.js"),u=n(l),c=t("../utils/fn.js"),d=n(c),f=t("../utils/events.js"),h=n(f),p=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.focusedChild_=-1,this.on("keydown",this.handleKeyPress)}return o(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",d.bind(this,function(){this.unlockShowing()}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=u.createEl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var r=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});r.id="vjsMenu",r.setAttribute("role","presentation");var n=u.createEl("h4",{className:"",innerHTML:'<div class="titleimg"></div>'});return r.appendChild(n),r.appendChild(this.contentEl_),h.on(r,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),r},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},e.prototype.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},e.prototype.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},e.prototype.focus=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(s.default);s.default.registerComponent("Menu",p),r.default=p,e.exports=r.default},{"../component.js":65,"../utils/dom.js":115,"../utils/events.js":116,"../utils/fn.js":117}],95:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./component.js"),l=i(s),u=t("global/document"),c=i(u),d=t("global/window"),f=i(d),h=t("./utils/events.js"),p=n(h),g=t("./utils/dom.js"),y=n(g),v=t("./utils/fn.js"),m=n(v),_=t("./utils/guid.js"),b=n(_),T=t("./utils/browser.js"),E=n(T),S=t("./utils/log.js"),w=i(S),O=t("./utils/to-title-case.js"),A=i(O),j=t("./utils/time-ranges.js"),k=t("./utils/buffer.js"),C=t("./utils/stylesheet.js"),R=n(C),x=t("./fullscreen-api.js"),P=i(x),D=t("./media-error.js"),L=i(D),I=t("safe-json-parse/tuple"),M=i(I),F=t("object.assign"),N=i(F),B=t("./utils/merge-options.js"),U=i(B),G=t("./tech/loader.js"),H=(i(G),t("./loading-spinner.js")),K=(i(H),t("./big-play-button.js")),V=(i(K),t("./control-bar/control-bar.js")),W=(i(V),t("./tech/tech.js")),Y=i(W),q=t("./tech/html5.js"),X=(i(q),function(t){function e(r,n,i){var a=this;if(o(this,e),r.id=r.id||"vjs_video_"+b.newGUID(),n=N.default(e.getTagSettings(r),n),n.initChildren=!1,n.createEl=!1,n.reportTouchActivity=!1,t.call(this,null,n,i),!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");this.tag=r,this.tagAttributes=r&&y.getElAttributes(r),this.language(this.options_.language),n.languages?function(){var t={};Object.getOwnPropertyNames(n.languages).forEach(function(e){t[e.toLowerCase()]=n.languages[e]}),a.languages_=t}():this.languages_=e.prototype.options_.languages,this.cache_={},this.poster_=n.poster||"",this.controls_=!!n.controls,f.default.playerState="init",r.controls=!1,this.scrubbing_=!1,this.el_=this.createEl();var s=U.default(this.options_);n.plugins&&function(){var t=n.plugins;Object.getOwnPropertyNames(t).forEach(function(e){"function"==typeof this[e]?this[e](t[e]):w.default.error("Unable to find plugin:",e)},a)}(),this.options_.playerOptions=s,this.initChildren(),this.isAudio("audio"===r.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label","audio player"):this.el_.setAttribute("aria-label","video player"),this.isAudio()&&this.addClass("vjs-audio"),this.flexNotSupported_()&&this.addClass("vjs-no-flex"),E.IS_IOS||this.addClass("vjs-workinghover"),e.players[this.id_]=this,this.userActive(!0),this.reportUserActivity(),this.listenForUserActivity_(),this.on("fullscreenchange",this.handleFullscreenChange_),this.on("stageclick",this.handleStageClick_),this.playTime=0}return a(e,t),e.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var e=this.el_=t.prototype.createEl.call(this,"div"),r=this.tag;r.removeAttribute("width"),r.removeAttribute("height");var n=y.getElAttributes(r);if(Object.getOwnPropertyNames(n).forEach(function(t){"class"===t?e.className=n[t]:e.setAttribute(t,n[t])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=e.player=this,this.addClass("vjs-paused"),!0!==f.default.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=R.createStyleElement("vjs-styles-dimensions");var i=y.$(".vjs-styles-defaults"),o=y.$("head");o.insertBefore(this.styleEl_,i?i.nextSibling:o.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var a=r.getElementsByTagName("a"),s=0;s<a.length;s++){a.item(s).setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&r.parentNode.insertBefore(e,r),y.insertElFirst(r,e),this.children_.unshift(r),this.el_=e,e},e.prototype.width=function(t){return this.dimension("width",t)},e.prototype.height=function(t){return this.dimension("height",t)},e.prototype.dimension=function(t,e){var r=t+"_";if(void 0===e)return this[r]||0;if(""===e)this[r]=void 0;else{var n=parseFloat(e);if(isNaN(n))return w.default.error('Improper value "'+e+'" supplied for for '+t),this;this[r]=n}return this.updateStyleEl_(),this},e.prototype.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,t?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid")},e.prototype.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},e.prototype.updateStyleEl_=function(){if(!0===f.default.VIDEOJS_NO_DYNAMIC_STYLE){var t="number"==typeof this.width_?this.width_:this.options_.width,e="number"==typeof this.height_?this.height_:this.options_.height,r=this.tech_&&this.tech_.el();return void(r&&(t>=0&&(r.width=t),e>=0&&(r.height=e)))}var n=void 0,i=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),l=s[1]/s[0];n=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300,i=void 0!==this.height_?this.height_:n*l,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),this.addClass("vjs-has-started"),R.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+n+"px;\n        height: "+i+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*l+"%;\n      }\n    ")},e.prototype.loadTech_=function(t,e){this.tech_&&this.unloadTech_(),"Html5"!==t&&this.tag&&(Y.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=t,this.isReady_=!1;var r=N.default({nativeControlsForTouch:this.options_.nativeControlsForTouch,source:e,playerId:this.id(),techId:this.id()+"_"+t+"_api",textTracks:this.textTracks_,autoplay:this.options_.autoplay,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),"vtt.js":this.options_["vtt.js"]},this.options_[t.toLowerCase()]);this.tag&&(r.tag=this.tag),e&&(this.currentType_=e.type,e.src===this.cache_.src&&this.cache_.currentTime>0&&(r.startTime=this.cache_.currentTime),this.cache_.src=e.src);var n=Y.default.getTech(t);n||(n=l.default.getComponent(t)),this.tech_=new n(r),this.tech_.ready(m.bind(this,this.handleTechReady_),!0),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"progress",this.handleTechProgress_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"suspend",this.handleTechSuspend_),this.on(this.tech_,"abort",this.handleTechAbort_),this.on(this.tech_,"emptied",this.handleTechEmptied_),this.on(this.tech_,"stalled",this.handleTechStalled_),this.on(this.tech_,"loadedmetadata",this.handleTechLoadedMetaData_),this.on(this.tech_,"loadeddata",this.handleTechLoadedData_),this.on(this.tech_,"timeupdate",this.handleTechTimeUpdate_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.on(this.tech_,"volumechange",this.handleTechVolumeChange_),this.on(this.tech_,"texttrackchange",this.handleTechTextTrackChange_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"endprev",this.handleTechEndPrev_),this.usingNativeControls(this.techGet_("controls")),this.showBigBtn(),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===t&&this.tag||y.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.prototype.unloadTech_=function(){this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},e.prototype.tech=function(t){if(t&&t.IWillNotUseThisInPlugins)return this.tech_;var e="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw f.default.alert(e),new Error(e)},e.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},e.prototype.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),this.src()&&this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())},e.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},e.prototype.hasStarted=function(t){return void 0!==t?(this.hasStarted_!==t&&(this.hasStarted_=t,t?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},e.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play"),f.default.playerState="playing",this.clickFlag="123"},e.prototype.showBigBtn=function(){this.createChapter()},e.prototype.showBigIcon=function(t){},e.prototype.createChapter=function(){if(!1!==this.isTitle()){var t=y.createEl("div",{className:"chaptertitle",id:"chapterId"}),e=y.getEl(this.id());t.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;"+this.options_.playerOptions.title,e.appendChild(t),t.style.visibility="hidden"}},e.prototype.hideChapter=function(){if(!1!==this.isTitle()){y.getEl("chapterId").style.visibility="hidden"}},e.prototype.showChapter=function(){if(!1!==this.isTitle()){y.getEl("chapterId").style.visibility="visible"}},e.prototype.isTitle=function(){var t=this.options_.playerOptions.title;return""!==t&&void 0!==t},e.prototype.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")}),f.default.playerState="waiting"},e.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing"),f.default.playerState="playing"},e.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking"),f.default.playerState="seeking"},e.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked"),f.default.playerState="seeked"},e.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause"),f.default.playerState="playing",this.clickFlag="123"},e.prototype.handleTechProgress_=function(){this.trigger("progress")},e.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.prototype.handleTechEndPrev_=function(){this.trigger("endprev")},e.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.prototype.handleTechClick_=function(t){0===t.button&&(this.clickFlag="click","playing"!==f.default.playerState&&"seeked"!==f.default.playerState||this.controls()&&(this.paused()?this.play():this.pause()))},e.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},e.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},e.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},e.prototype.handleFullscreenChange_=function(){this.isFullscreen()?(this.showChapter(),this.addClass("vjs-fullscreen")):(this.hideChapter(),this.removeClass("vjs-fullscreen"))},e.prototype.handleStageClick_=function(){this.reportUserActivity()},e.prototype.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},e.prototype.controlbarHide=function(){},e.prototype.controlbarShow=function(){},e.prototype.handleTechError_=function(){var t=this.tech_.error();this.error(t&&t.code)},e.prototype.handleTechSuspend_=function(){this.trigger("suspend")},e.prototype.handleTechAbort_=function(){this.trigger("abort")},e.prototype.handleTechEmptied_=function(){this.trigger("emptied")},e.prototype.handleTechStalled_=function(){this.trigger("stalled")},e.prototype.handleTechLoadedMetaData_=function(){this.trigger("loadedmetadata")},e.prototype.handleTechLoadedData_=function(){this.trigger("loadeddata")},e.prototype.handleTechTimeUpdate_=function(){this.playTime++,3===this.playTime&&this.trigger("endprev"),this.trigger("timeupdate")},e.prototype.handleTechRateChange_=function(){this.trigger("ratechange")},e.prototype.handleTechVolumeChange_=function(){this.trigger("volumechange")},e.prototype.handleTechTextTrackChange_=function(){this.trigger("texttrackchange")},e.prototype.getCache=function(){return this.cache_},e.prototype.techCall_=function(t,e){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[t](e)},!0);else try{this.tech_[t](e)}catch(t){throw w.default(t),t}},e.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[t]()}catch(e){void 0===this.tech_[t]?w.default("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e):"TypeError"===e.name?(w.default("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1):w.default(e)}},e.prototype.play=function(){return this.techCall_("play"),this},e.prototype.pause=function(){return this.techCall_("pause"),this},e.prototype.paused=function(){return!1!==this.techGet_("paused")},e.prototype.scrubbing=function(t){return void 0!==t?(this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},e.prototype.currentTime=function(t){return void 0!==t?(this.techCall_("setCurrentTime",t),this):this.cache_.currentTime=this.techGet_("currentTime")||0},e.prototype.duration=function(t){return void 0===t?this.cache_.duration||0:(t=parseFloat(t)||0,t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},e.prototype.remainingTime=function(){return this.duration()-this.currentTime()},e.prototype.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=j.createTimeRange(0,0)),t},e.prototype.bufferedPercent=function(){return k.bufferedPercent(this.buffered(),this.duration())},e.prototype.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),r=t.end(t.length-1);return r>e&&(r=e),r},e.prototype.volume=function(t){var e=void 0;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),this):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},e.prototype.muted=function(t){return void 0!==t?(this.techCall_("setMuted",t),this):this.techGet_("muted")||!1},e.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},e.prototype.isFullscreen=function(t){return void 0!==t?(this.isFullscreen_=!!t,this):!!this.isFullscreen_},e.prototype.requestFullscreen=function(){var t=P.default;return this.isFullscreen(!0),t.requestFullscreen?(p.on(c.default,t.fullscreenchange,m.bind(this,function e(r){this.isFullscreen(c.default[t.fullscreenElement]),!1===this.isFullscreen()&&p.off(c.default,t.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[t.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},e.prototype.exitFullscreen=function(){var t=P.default;return this.isFullscreen(!1),t.requestFullscreen?c.default[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},e.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=c.default.documentElement.style.overflow,c.default.documentElement.style.overflow="hidden",y.addElClass(c.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.prototype.fullWindowOnEscKey=function(t){if(!0!==this.ended()){switch(t.keyCode){case 27:!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow();break;case 32:case 13:this.paused()?this.play():this.pause();break;case 37:var e=this.currentTime()-5;e<=0&&(e=0),this.currentTime(e);break;case 39:this.duration()-this.currentTime()>5&&this.currentTime(this.currentTime()+5);break;case 38:this.volume(this.volume()+.1);break;case 40:this.volume(this.volume()-.1)}}},e.prototype.exitFullWindow=function(){this.isFullWindow=!1,p.off(c.default,"keydown",this.fullWindowOnEscKey),c.default.documentElement.style.overflow=this.docOrigOverflow,y.removeElClass(c.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.prototype.canPlayType=function(t){for(var e=void 0,r=0,n=this.options_.techOrder;r<n.length;r++){var i=A.default(n[r]),o=Y.default.getTech(i);if(o||(o=l.default.getComponent(i)),o){if(o.isSupported()&&(e=o.canPlayType(t)))return e}else w.default.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.prototype.selectSource=function(t){var e=this.options_.techOrder.map(A.default).map(function(t){return[t,Y.default.getTech(t)||l.default.getComponent(t)]}).filter(function(t){var e=t[0],r=t[1];return r?r.isSupported():(w.default.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),r=function(t,e,r){var n=void 0;return t.some(function(t){return e.some(function(e){if(n=r(t,e))return!0})}),n},n=function(t,e){var r=t[0];if(t[1].canPlaySource(e))return{source:e,tech:r}};return(this.options_.sourceOrder?r(t,e,function(t){return function(e,r){return t(r,e)}}(n)):r(e,t,n))||!1},e.prototype.src=function(t){if(void 0===t)return this.techGet_("src");var e=Y.default.getTech(this.techName_);return e||(e=l.default.getComponent(this.techName_)),Array.isArray(t)?this.sourceList_(t):"string"==typeof t?this.src({src:t}):t instanceof Object&&(t.type&&!e.canPlaySource(t)?this.sourceList_([t]):(this.cache_.src=t.src,this.currentType_=t.type||"",this.ready(function(){e.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},e.prototype.sourceList_=function(t){var e=this.selectSource(t);e?e.tech===this.techName_?this.src(e.source):this.loadTech_(e.tech,e.source):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},e.prototype.load=function(){return this.techCall_("load"),this},e.prototype.reset=function(){return this.loadTech_(A.default(this.options_.techOrder[0]),null),this.techCall_("reset"),this},e.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},e.prototype.currentType=function(){return this.currentType_||""},e.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),this.options_.preload=t,this):this.techGet_("preload")},e.prototype.autoplay=function(t){return void 0!==t?(this.techCall_("setAutoplay",t),this.options_.autoplay=t,this):this.techGet_("autoplay",t)},e.prototype.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),this.options_.loop=t,this):this.techGet_("loop")},e.prototype.poster=function(t){return void 0===t?this.poster_:(t||(t=""),this.poster_=t,this.techCall_("setPoster",t),this.trigger("posterchange"),this)},e.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},e.prototype.controls=function(t){return void 0!==t?(t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),t?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},e.prototype.usingNativeControls=function(t){return void 0!==t?(t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,t?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},e.prototype.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),this):(t instanceof L.default?this.error_=t:this.error_=new L.default(t),w.default.error("(CODE:"+this.error_.code+" "+L.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},e.prototype.ended=function(){return this.techGet_("ended")},e.prototype.endprev=function(){return this.techGet_("endprev")},e.prototype.seeking=function(){return this.techGet_("seeking")},e.prototype.seekable=function(){return this.techGet_("seekable")},e.prototype.reportUserActivity=function(t){this.userActivity_=!0},e.prototype.userActive=function(t){return void 0!==t?(t=!!t,t!==this.userActive_&&(this.userActive_=t,t?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive"),!0===this.isFullscreen()&&this.showChapter()):!0===this.isFullscreen()&&(this.userActivity_=!1,!1===this.paused()&&this.hideChapter(),this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},e.prototype.listenForUserActivity_=function(){var t=void 0,e=void 0,r=void 0,n=m.bind(this,this.reportUserActivity),i=function(t){t.screenX===e&&t.screenY===r||(e=t.screenX,r=t.screenY,n())},o=function(){n(),this.clearInterval(t),t=this.setInterval(n,250)},a=function(e){n(),this.clearInterval(t)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",a),this.on("keydown",n),this.on("keyup",n);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var t=this.options_.inactivityTimeout;t>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},e.prototype.playbackRate=function(t){return void 0!==t?(this.techCall_("setPlaybackRate",t),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):t},e.prototype.isAudio=function(t){return void 0!==t?(this.isAudio_=!!t,this):!!this.isAudio_},e.prototype.networkState=function(){return this.techGet_("networkState")},e.prototype.readyState=function(){return this.techGet_("readyState")},e.prototype.textTracks=function(){return this.tech_&&this.tech_.textTracks()},e.prototype.remoteTextTracks=function(){return this.tech_&&this.tech_.remoteTextTracks()},e.prototype.remoteTextTrackEls=function(){return this.tech_&&this.tech_.remoteTextTrackEls()},e.prototype.addTextTrack=function(t,e,r){return this.tech_&&this.tech_.addTextTrack(t,e,r)},e.prototype.addRemoteTextTrack=function(t){return this.tech_&&this.tech_.addRemoteTextTrack(t)},e.prototype.removeRemoteTextTrack=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.track,r=void 0===e?arguments[0]:e;this.tech_&&this.tech_.removeRemoteTextTrack(r)},e.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.prototype.language=function(t){return void 0===t?this.language_:(this.language_=(""+t).toLowerCase(),this)},e.prototype.languages=function(){return U.default(e.prototype.options_.languages,this.languages_)},e.prototype.toJSON=function(){var t=U.default(this.options_),e=t.tracks;t.tracks=[];for(var r=0;r<e.length;r++){var n=e[r];n=U.default(n),n.player=void 0,t.tracks[r]=n}return t},e.getTagSettings=function(t){var e={sources:[],tracks:[]},r=y.getElAttributes(t),n=r["data-setup"];if(null!==n){var i=M.default(n||"{}"),o=i[0],a=i[1];o&&w.default.error(o),N.default(r,a)}if(N.default(e,r),t.hasChildNodes())for(var s=t.childNodes,l=0,u=s.length;l<u;l++){var c=s[l],d=c.nodeName.toLowerCase();"source"===d?e.sources.push(y.getElAttributes(c)):"track"===d&&e.tracks.push(y.getElAttributes(c))}return e},e}(l.default));X.players={};var z=f.default.navigator;X.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,
inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","textTrackDisplay","loadingSpinner","controlBar","errorDisplay","textTrackSettings"],language:c.default.getElementsByTagName("html")[0].getAttribute("lang")||z.languages&&z.languages[0]||z.userLanguage||z.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},X.prototype.handleLoadedMetaData_,X.prototype.handleLoadedData_,X.prototype.handleUserActive_,X.prototype.handleUserInactive_,X.prototype.handleTimeUpdate_,X.prototype.handleTechEnded_,X.prototype.handleTechEndprev_,X.prototype.handleVolumeChange_,X.prototype.handleError_,X.prototype.flexNotSupported_=function(){var t=c.default.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},l.default.registerComponent("Player",X),r.default=X,e.exports=r.default},{"./big-play-button.js":62,"./component.js":65,"./control-bar/control-bar.js":66,"./fullscreen-api.js":89,"./loading-spinner.js":90,"./media-error.js":91,"./tech/html5.js":103,"./tech/loader.js":104,"./tech/tech.js":105,"./utils/browser.js":112,"./utils/buffer.js":113,"./utils/dom.js":115,"./utils/events.js":116,"./utils/fn.js":117,"./utils/guid.js":119,"./utils/log.js":120,"./utils/merge-options.js":121,"./utils/stylesheet.js":122,"./utils/time-ranges.js":123,"./utils/to-title-case.js":124,"global/document":7,"global/window":8,"object.assign":53,"safe-json-parse/tuple":57}],96:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./player.js"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t,e){i.default.prototype[t]=e};r.default=o,e.exports=r.default},{"./player.js":95}],97:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../clickable-component.js"),l=i(s),u=t("../component.js"),c=i(u),d=t("./popup.js"),f=(i(d),t("../utils/dom.js")),h=(n(f),t("../utils/fn.js")),p=(n(h),t("../utils/to-title-case.js")),g=(i(p),function(t){function e(r){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];o(this,e),t.call(this,r,n),this.update()}return a(e,t),e.prototype.update=function(){var t=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=t,this.addChild(t),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},e.prototype.createPopup=function(){},e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},e}(l.default));c.default.registerComponent("PopupButton",g),r.default=g,e.exports=r.default},{"../clickable-component.js":64,"../component.js":65,"../utils/dom.js":115,"../utils/fn.js":117,"../utils/to-title-case.js":124,"./popup.js":98}],98:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component.js"),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=t("../utils/dom.js"),u=n(l),c=t("../utils/fn.js"),d=n(c),f=t("../utils/events.js"),h=n(f),p=function(t){function e(){i(this,e),t.apply(this,arguments)}return o(e,t),e.prototype.addItem=function(t){this.addChild(t),t.on("click",d.bind(this,function(){this.unlockShowing()}))},e.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=u.createEl(e,{className:"vjs-menu-content"});var r=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.appendChild(this.contentEl_),h.on(r,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),r},e}(s.default);s.default.registerComponent("Popup",p),r.default=p,e.exports=r.default},{"../component.js":65,"../utils/dom.js":115,"../utils/events.js":116,"../utils/fn.js":117}],99:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("./utils/events.js"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),a=t("global/document"),s=n(a),l=t("global/window"),u=n(l),c=!1,d=void 0,f=function(){var t=s.default.getElementsByTagName("video"),e=s.default.getElementsByTagName("audio"),r=[];if(t&&t.length>0)for(var n=0,i=t.length;n<i;n++)r.push(t[n]);if(e&&e.length>0)for(var n=0,i=e.length;n<i;n++)r.push(e[n]);if(r&&r.length>0)for(var n=0,i=r.length;n<i;n++){var o=r[n];if(!o||!o.getAttribute){h(1);break}if(void 0===o.player){var a=o.getAttribute("data-setup");if(null!==a){d(o)}}}else c||h(1)},h=function(t,e){e&&(d=e),setTimeout(f,t)};"complete"===s.default.readyState?c=!0:o.one(u.default,"load",function(){c=!0});var p=function(){return c};r.autoSetup=f,r.autoSetupTimeout=h,r.hasLoaded=p},{"./utils/events.js":116,"global/document":7,"global/window":8}],100:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component.js"),s=n(a),l=t("../utils/dom.js"),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),c=t("object.assign"),d=n(c),f=function(t){function e(r,n){i(this,e),t.call(this,r,n),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(r,"controlsvisible",this.update),this.on(r,this.playerEvent,this.update)}return o(e,t),e.prototype.createEl=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return r.className=r.className+" vjs-slider",r=d.default({tabIndex:0},r),n=d.default({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),t.prototype.createEl.call(this,e,r,n)},e.prototype.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;t.preventDefault(),u.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},e.prototype.handleMouseMove=function(){},e.prototype.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;u.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},e.prototype.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!==t||t<0||t===1/0)&&(t=0);var r=(100*t).toFixed(2)+"%";this.vertical()?e.el().style.height=r:e.el().style.width=r}}},e.prototype.calculateDistance=function(t){var e=u.getPointerPosition(this.el_,t);return this.vertical()?e.y:e.x},e.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},e.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},e.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},e.prototype.vertical=function(t){return void 0===t?this.vertical_||!1:(this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},e}(s.default);s.default.registerComponent("Slider",f),r.default=f,e.exports=r.default},{"../component.js":65,"../utils/dom.js":115,"object.assign":53}],101:[function(t,e,r){"use strict";function n(t){return t.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},t.streamFromParts=function(t,e){return t+"&"+e},t.streamToParts=function(t){var e={connection:"",stream:""};if(!t)return e;var r=t.search(/&(?!\w+=)/),n=void 0;return-1!==r?n=r+1:0===(r=n=t.lastIndexOf("/")+1)&&(r=n=t.length),e.connection=t.substring(0,r),e.stream=t.substring(n,t.length),e},t.isStreamingType=function(e){return e in t.streamingFormats},t.RTMP_RE=/^rtmp[set]?:\/\//i,t.isStreamingSrc=function(e){return t.RTMP_RE.test(e)},t.rtmpSourceHandler={},t.rtmpSourceHandler.canPlayType=function(e){return t.isStreamingType(e)?"maybe":""},t.rtmpSourceHandler.canHandleSource=function(e){var r=t.rtmpSourceHandler.canPlayType(e.type);return r||(t.isStreamingSrc(e.src)?"maybe":"")},t.rtmpSourceHandler.handleSource=function(e,r){var n=t.streamToParts(e.src);r.setRtmpConnection(n.connection),r.setRtmpStream(n.stream)},t.registerSourceHandler(t.rtmpSourceHandler),t}r.__esModule=!0,r.default=n,e.exports=r.default},{}],102:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){O[t]=function(){return this.el_.vjs_getProperty(t)}}r.__esModule=!0;for(var l=t("./tech"),u=i(l),c=t("../utils/dom.js"),d=n(c),f=t("../utils/url.js"),h=n(f),p=t("../utils/time-ranges.js"),g=t("./flash-rtmp"),y=i(g),v=t("../component"),m=i(v),_=t("global/window"),b=i(_),T=t("object.assign"),E=i(T),S=b.default.navigator,w=function(t){function e(r,n){o(this,e),t.call(this,r,n),r.source&&this.ready(function(){this.setSource(r.source)},!0),r.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(r.startTime)},!0),b.default.videojs=b.default.videojs||{},b.default.videojs.Flash=b.default.videojs.Flash||{},b.default.videojs.Flash.onReady=e.onReady,b.default.videojs.Flash.onEvent=e.onEvent,b.default.videojs.Flash.onError=e.onError,this.on("seeked",function(){this.lastSeekTarget_=void 0})}return a(e,t),e.prototype.createEl=function(){var t=this.options_;t.swf||(t.swf="//vjs.zencdn.net/swf/5.0.1/video-js.swf");var r=t.techId,n=E.default({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:t.autoplay,preload:t.preload,loop:t.loop,muted:t.muted},t.flashVars),i=E.default({wmode:"opaque",bgcolor:"#000000"},t.params),o=E.default({id:r,name:r,class:"vjs-tech"},t.attributes);return this.el_=e.embed(t.swf,n,i,o),this.el_.tech=this,this.el_},e.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},e.prototype.pause=function(){this.el_.vjs_pause()},e.prototype.src=function(t){return void 0===t?this.currentSrc():this.setSrc(t)},e.prototype.setSrc=function(t){if(t=h.getAbsoluteURL(t),this.el_.vjs_src(t),this.autoplay()){var e=this;this.setTimeout(function(){e.play()},0)}},e.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},e.prototype.setCurrentTime=function(e){var r=this.seekable();r.length&&(e=e>r.start(0)?e:r.start(0),e=e<r.end(r.length-1)?e:r.end(r.length-1),this.lastSeekTarget_=e,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",e),t.prototype.setCurrentTime.call(this))},e.prototype.currentTime=function(t){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},e.prototype.load=function(){this.el_.vjs_load()},e.prototype.poster=function(){this.el_.vjs_getProperty("poster")},e.prototype.setPoster=function(){},e.prototype.seekable=function(){var t=this.duration();return 0===t?p.createTimeRange():p.createTimeRange(0,t)},e.prototype.buffered=function(){var t=this.el_.vjs_getProperty("buffered");return 0===t.length?p.createTimeRange():p.createTimeRange(t[0][0],t[0][1])},e.prototype.supportsFullScreen=function(){return!1},e.prototype.enterFullScreen=function(){return!1},e}(u.default),O=w.prototype,A="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),j="networkState,readyState,initialTime,duration,startOffsetTime,paused,ended,videoTracks,audioTracks,videoWidth,videoHeight".split(","),k=0;k<A.length;k++)s(A[k]),function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);O["set"+e]=function(e){return this.el_.vjs_setProperty(t,e)}}(A[k]);for(var k=0;k<j.length;k++)s(j[k]);w.isSupported=function(){return w.version()[0]>=10},u.default.withSourceHandlers(w),w.nativeSourceHandler={},w.nativeSourceHandler.canPlayType=function(t){return t in w.formats?"maybe":""},w.nativeSourceHandler.canHandleSource=function(t){var e;return e=t.type?t.type.replace(/;.*/,"").toLowerCase():function(t){var e=h.getFileExtension(t);return e?"video/"+e:""}(t.src),w.nativeSourceHandler.canPlayType(e)},w.nativeSourceHandler.handleSource=function(t,e){e.setSrc(t.src)},w.nativeSourceHandler.dispose=function(){},w.registerSourceHandler(w.nativeSourceHandler),w.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},w.onReady=function(t){var e=d.getEl(t),r=e&&e.tech;r&&r.el()&&w.checkReady(r)},w.checkReady=function(t){t.el()&&(t.el().vjs_getProperty?t.triggerReady():this.setTimeout(function(){w.checkReady(t)},50))},w.onEvent=function(t,e){d.getEl(t).tech.trigger(e)},w.onError=function(t,e){var r=d.getEl(t).tech;if("srcnotfound"===e)return r.error(4);r.error("FLASH: "+e)},w.version=function(){var t="0,0,0";try{t=new b.default.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{S.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(S.plugins["Shockwave Flash 2.0"]||S.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(t){}}return t.split(",")},w.embed=function(t,e,r,n){var i=w.getEmbedCode(t,e,r,n);return d.createEl("div",{innerHTML:i}).childNodes[0]},w.getEmbedCode=function(t,e,r,n){var i="",o="",a="";return e&&Object.getOwnPropertyNames(e).forEach(function(t){i+=t+"="+e[t]+"&amp;"}),r=E.default({movie:t,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},r),Object.getOwnPropertyNames(r).forEach(function(t){o+='<param name="'+t+'" value="'+r[t]+'" />'}),n=E.default({data:t,width:"100%",height:"100%"},n),Object.getOwnPropertyNames(n).forEach(function(t){a+=t+'="'+n[t]+'" '}),'<object type="application/x-shockwave-flash" '+a+">"+o+"</object>"},y.default(w),m.default.registerComponent("Flash",w),u.default.registerTech("Flash",w),r.default=w,e.exports=r.default},{"../component":65,"../utils/dom.js":115,"../utils/time-ranges.js":123,"../utils/url.js":125,"./flash-rtmp":101,"./tech":105,"global/window":8,"object.assign":53}],103:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./tech.js"),l=i(s),u=t("../component"),c=i(u),d=t("../utils/dom.js"),f=n(d),h=t("../utils/url.js"),p=n(h),g=t("../utils/fn.js"),y=n(g),v=t("../utils/log.js"),m=i(v),_=t("../utils/browser.js"),b=n(_),T=t("global/document"),E=i(T),S=t("global/window"),w=i(S),O=t("object.assign"),A=i(O),j=t("../utils/merge-options.js"),k=i(j),C=function(t){function e(r,n){o(this,e),t.call(this,r,n);var i=r.source;if(i&&(this.el_.currentSrc!==i.src||r.tag&&3===r.tag.initNetworkState_)?this.setSource(i):this.handleLateInit_(this.el_),this.el_.hasChildNodes()){for(var a=this.el_.childNodes,s=a.length,l=[];s--;){var u=a[s];"track"===u.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack_(u.track)):l.push(u))}for(var c=0;c<l.length;c++)this.el_.removeChild(l[c])}this.featuresNativeTextTracks&&(this.handleTextTrackChange_=y.bind(this,this.handleTextTrackChange),this.handleTextTrackAdd_=y.bind(this,this.handleTextTrackAdd),this.handleTextTrackRemove_=y.bind(this,this.handleTextTrackRemove),this.proxyNativeTextTracks_()),(b.TOUCH_ENABLED&&!0===r.nativeControlsForTouch||b.IS_IPHONE||b.IS_NATIVE_ANDROID)&&this.setControls(!0),this.triggerReady()}return a(e,t),e.prototype.dispose=function(){var r=this.el().textTracks,n=this.textTracks();r&&r.removeEventListener&&(r.removeEventListener("change",this.handleTextTrackChange_),r.removeEventListener("addtrack",this.handleTextTrackAdd_),r.removeEventListener("removetrack",this.handleTextTrackRemove_));for(var i=n.length;i--;)n.removeTrack_(n[i]);e.disposeMediaElement(this.el_),t.prototype.dispose.call(this)},e.prototype.createEl=function(){var t=this.options_.tag;if(!t||!1===this.movingMediaElementInDOM)if(t){var r=t.cloneNode(!0);t.parentNode.insertBefore(r,t),e.disposeMediaElement(t),t=r}else{t=E.default.createElement("video");var n=this.options_.tag&&f.getElAttributes(this.options_.tag),i=k.default({},n);b.TOUCH_ENABLED&&!0===this.options_.nativeControlsForTouch||delete i.controls,f.setElAttributes(t,A.default(i,{id:this.options_.techId,class:"vjs-tech"}))}for(var o=["autoplay","preload","loop","muted"],a=o.length-1;a>=0;a--){var s=o[a],l={};void 0!==this.options_[s]&&(l[s]=this.options_[s]),f.setElAttributes(t,l)}return t},e.prototype.handleLateInit_=function(t){var e=this;if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var r=function(){var t=!1,r=function(){t=!0};e.on("loadstart",r);var n=function(){t||this.trigger("loadstart")};return e.on("loadedmetadata",n),e.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",n),t||this.trigger("loadstart")}),{v:void 0}}();if("object"==typeof r)return r.v}var n=["loadstart"];n.push("loadedmetadata"),t.readyState>=2&&n.push("loadeddata"),t.readyState>=3&&n.push("canplay"),t.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(t){this.trigger(t)},this)})}},e.prototype.proxyNativeTextTracks_=function(){var t=this.el().textTracks;if(t){for(var e=0;e<t.length;e++)this.textTracks().addTrack_(t[e]);t.addEventListener&&(t.addEventListener("change",this.handleTextTrackChange_),t.addEventListener("addtrack",this.handleTextTrackAdd_),t.addEventListener("removetrack",this.handleTextTrackRemove_))}},e.prototype.handleTextTrackChange=function(t){var e=this.textTracks();this.textTracks().trigger({type:"change",target:e,currentTarget:e,srcElement:e})},e.prototype.handleTextTrackAdd=function(t){this.textTracks().addTrack_(t.track)},e.prototype.handleTextTrackRemove=function(t){this.textTracks().removeTrack_(t.track)},e.prototype.play=function(){this.el_.play()},e.prototype.pause=function(){this.el_.pause()},e.prototype.paused=function(){return!this.el_||this.el_.paused},e.prototype.currentTime=function(){return this.el_?this.el_.currentTime:0},e.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){m.default(t,"Video is not ready. (Video.js)")}},e.prototype.duration=function(){return this.el_.duration||0},e.prototype.buffered=function(){return this.el_.buffered},e.prototype.volume=function(){return this.el_.volume},e.prototype.setVolume=function(t){this.el_.volume=t},e.prototype.muted=function(){return this.el_.muted},e.prototype.setMuted=function(t){this.el_.muted=t},e.prototype.width=function(){return this.el_.offsetWidth},e.prototype.height=function(){return this.el_.offsetHeight},e.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var t=w.default.navigator.userAgent;if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},e.prototype.enterFullScreen=function(){var t=this.el_;"webkitDisplayingFullscreen"in t&&this.one("webkitbeginfullscreen",function(){this.one("webkitendfullscreen",function(){this.trigger("fullscreenchange",{isFullscreen:!1})}),this.trigger("fullscreenchange",{isFullscreen:!0})}),t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},e.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.prototype.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},e.prototype.setSrc=function(t){this.el_.src=t},e.prototype.load=function(){this.el_.load()},e.prototype.reset=function(){e.resetMediaElement(this.el_)},e.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.prototype.poster=function(){return this.el_.poster},e.prototype.setPoster=function(t){this.el_.poster=t},e.prototype.preload=function(){return this.el_.preload},e.prototype.setPreload=function(t){this.el_.preload=t},e.prototype.autoplay=function(){return this.el_.autoplay},e.prototype.setAutoplay=function(t){this.el_.autoplay=t},e.prototype.controls=function(){return this.el_.controls},e.prototype.setControls=function(t){this.el_.controls=!!t},e.prototype.loop=function(){return this.el_.loop},e.prototype.setLoop=function(t){this.el_.loop=t},e.prototype.error=function(){return this.el_.error},e.prototype.seeking=function(){return this.el_.seeking},e.prototype.seekable=function(){return this.el_.seekable},e.prototype.ended=function(){return this.el_.ended},e.prototype.endprev=function(){return this.el_.endprev},e.prototype.defaultMuted=function(){return this.el_.defaultMuted},e.prototype.playbackRate=function(){return this.el_.playbackRate},e.prototype.played=function(){return this.el_.played},e.prototype.setPlaybackRate=function(t){this.el_.playbackRate=t},e.prototype.networkState=function(){return this.el_.networkState},e.prototype.readyState=function(){return this.el_.readyState},e.prototype.videoWidth=function(){return this.el_.videoWidth},e.prototype.videoHeight=function(){return this.el_.videoHeight},e.prototype.textTracks=function(){return t.prototype.textTracks.call(this)},e.prototype.addTextTrack=function(e,r,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,r,n):t.prototype.addTextTrack.call(this,e,r,n)},e.prototype.addRemoteTextTrack=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(!this.featuresNativeTextTracks)return t.prototype.addRemoteTextTrack.call(this,e);var r=E.default.createElement("track");return e.kind&&(r.kind=e.kind),e.label&&(r.label=e.label),(e.language||e.srclang)&&(r.srclang=e.language||e.srclang),e.default&&(r.default=e.default),e.id&&(r.id=e.id),e.src&&(r.src=e.src),this.el().appendChild(r),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack_(r.track),r},e.prototype.removeRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.removeRemoteTextTrack.call(this,e);var r=void 0,n=void 0,i=this.remoteTextTrackEls().getTrackElementByTrack_(e);for(this.remoteTextTrackEls().removeTrackElement_(i),this.remoteTextTracks().removeTrack_(e),r=this.$$("track"),n=r.length;n--;)e!==r[n]&&e!==r[n].track||this.el().removeChild(r[n])},e}(l.default);C.TEST_VID=E.default.createElement("video");var R=E.default.createElement("track");R.kind="captions",R.srclang="en",R.label="English",C.TEST_VID.appendChild(R),C.isSupported=function(){try{C.TEST_VID.volume=.5}catch(t){return!1}return!!C.TEST_VID.canPlayType},l.default.withSourceHandlers(C),C.nativeSourceHandler={},C.nativeSourceHandler.canPlayType=function(t){try{return C.TEST_VID.canPlayType(t)}catch(t){return""}},C.nativeSourceHandler.canHandleSource=function(t){var e;return t.type?C.nativeSourceHandler.canPlayType(t.type):t.src?(e=p.getFileExtension(t.src),C.nativeSourceHandler.canPlayType("video/"+e)):""},C.nativeSourceHandler.handleSource=function(t,e){e.setSrc(t.src)},C.nativeSourceHandler.dispose=function(){},C.registerSourceHandler(C.nativeSourceHandler),C.canControlVolume=function(){var t=C.TEST_VID.volume;return C.TEST_VID.volume=t/2+.1,t!==C.TEST_VID.volume},C.canControlPlaybackRate=function(){if(b.IS_ANDROID&&b.IS_CHROME)return!1;var t=C.TEST_VID.playbackRate;return C.TEST_VID.playbackRate=t/2+.1,t!==C.TEST_VID.playbackRate},C.supportsNativeTextTracks=function(){var t;return t=!!C.TEST_VID.textTracks,t&&C.TEST_VID.textTracks.length>0&&(t="number"!=typeof C.TEST_VID.textTracks[0].mode),t&&b.IS_FIREFOX&&(t=!1),!t||"onremovetrack"in C.TEST_VID.textTracks||(t=!1),t},C.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","endprev","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],C.prototype.featuresVolumeControl=C.canControlVolume(),C.prototype.featuresPlaybackRate=C.canControlPlaybackRate(),C.prototype.movingMediaElementInDOM=!b.IS_IOS,C.prototype.featuresFullscreenResize=!0,C.prototype.featuresProgressEvents=!0,C.prototype.featuresNativeTextTracks=C.supportsNativeTextTracks();var x=void 0,P=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,D=/^video\/mp4/i;C.patchCanPlayType=function(){b.ANDROID_VERSION>=4&&(x||(x=C.TEST_VID.constructor.prototype.canPlayType),C.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&P.test(t)?"maybe":x.call(this,t)}),b.IS_OLD_ANDROID&&(x||(x=C.TEST_VID.constructor.prototype.canPlayType),C.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&D.test(t)?"maybe":x.call(this,t)})},C.unpatchCanPlayType=function(){var t=C.TEST_VID.constructor.prototype.canPlayType;return C.TEST_VID.constructor.prototype.canPlayType=x,x=null,t},C.patchCanPlayType(),C.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},C.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),r=e.length;r--;)t.removeChild(e[r]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},c.default.registerComponent("Html5",C),l.default.registerTech("Html5",C),r.default=C,e.exports=r.default},{"../component":65,"../utils/browser.js":112,"../utils/dom.js":115,"../utils/fn.js":117,"../utils/log.js":120,"../utils/merge-options.js":121,"../utils/url.js":125,"./tech.js":105,"global/document":7,"global/window":8,"object.assign":53}],104:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component.js"),s=n(a),l=t("./tech.js"),u=n(l),c=t("global/window"),d=(n(c),t("../utils/to-title-case.js")),f=n(d),h=function(t){function e(r,n,o){if(i(this,e),t.call(this,r,n,o),n.playerOptions.sources&&0!==n.playerOptions.sources.length)r.src(n.playerOptions.sources);else for(var a=0,l=n.playerOptions.techOrder;a<l.length;a++){var c=f.default(l[a]),d=u.default.getTech(c);if(c||(d=s.default.getComponent(c)),d&&d.isSupported()){r.loadTech_(c);break}}}return o(e,t),e}(s.default);s.default.registerComponent("MediaLoader",h),r.default=h,e.exports=r.default},{"../component.js":65,"../utils/to-title-case.js":124,"./tech.js":105,"global/window":8}],105:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../component"),s=n(a),l=t("../tracks/html-track-element"),u=n(l),c=t("../tracks/html-track-element-list"),d=n(c),f=t("../utils/merge-options.js"),h=n(f),p=t("../tracks/text-track"),g=n(p),y=t("../tracks/text-track-list"),v=n(y),m=t("../utils/fn.js"),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(m),b=t("../utils/log.js"),T=n(b),E=t("../utils/time-ranges.js"),S=t("../utils/buffer.js"),w=t("../media-error.js"),O=n(w),A=t("global/window"),j=n(A),k=t("global/document"),C=n(k),R=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?function(){}:arguments[1];i(this,e),r.reportTouchActivity=!1,t.call(this,null,r,n),this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),this.textTracks_=r.textTracks,this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),!1!==r.nativeCaptions&&!1!==r.nativeTextTracks||(this.featuresNativeTextTracks=!1),this.featuresNativeTextTracks||this.on("ready",this.emulateTextTracks),this.initTextTrackListeners(),this.emitTapEvents()}return o(e,t),e.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.prototype.trackProgress=function(){this.stopTrackingProgress(),
this.progressInterval=this.setInterval(_.bind(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)},e.prototype.onDurationChange=function(){this.duration_=this.duration()},e.prototype.buffered=function(){return E.createTimeRange(0,0)},e.prototype.bufferedPercent=function(){return S.bufferedPercent(this.buffered(),this.duration_)},e.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},e.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.dispose=function(){var e=this.textTracks();if(e)for(var r=e.length;r--;)this.removeRemoteTextTrack(e[r]);this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.prototype.reset=function(){},e.prototype.error=function(t){return void 0!==t&&(t instanceof O.default?this.error_=t:this.error_=new O.default(t),this.trigger("error")),this.error_},e.prototype.played=function(){return this.hasStarted_?E.createTimeRange(0,0):E.createTimeRange()},e.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.prototype.initTextTrackListeners=function(){var t=_.bind(this,function(){this.trigger("texttrackchange")}),e=this.textTracks();e&&(e.addEventListener("removetrack",t),e.addEventListener("addtrack",t),this.on("dispose",_.bind(this,function(){e.removeEventListener("removetrack",t),e.removeEventListener("addtrack",t)})))},e.prototype.emulateTextTracks=function(){var t=this,e=this.textTracks();if(e){j.default.WebVTT||null==this.el().parentNode||function(){var e=C.default.createElement("script");e.src=t.options_["vtt.js"]||"https://cdn.rawgit.com/gkatsev/vtt.js/vjs-v0.12.1/dist/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},t.on("dispose",function(){e.onload=null,e.onerror=null}),t.el().parentNode.appendChild(e),j.default.WebVTT=!0}();var r=function(){return t.trigger("texttrackchange")},n=function(){r();for(var t=0;t<e.length;t++){var n=e[t];n.removeEventListener("cuechange",r),"showing"===n.mode&&n.addEventListener("cuechange",r)}};n(),e.addEventListener("change",n),this.on("dispose",function(){e.removeEventListener("change",n)})}},e.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new v.default,this.textTracks_},e.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new v.default,this.remoteTextTracks_},e.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new d.default,this.remoteTextTrackEls_},e.prototype.addTextTrack=function(t,e,r){if(!t)throw new Error("TextTrack kind is required but was not provided");return x(this,t,e,r)},e.prototype.addRemoteTextTrack=function(t){var e=h.default(t,{tech:this}),r=new u.default(e);return this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack_(r.track),this.textTracks().addTrack_(r.track),r},e.prototype.removeRemoteTextTrack=function(t){this.textTracks().removeTrack_(t);var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack_(t)},e.prototype.setPoster=function(){},e.prototype.canPlayType=function(){return""},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,r){if(e.techs_||(e.techs_={}),!e.isTech(r))throw new Error("Tech "+t+" must be a Tech");return e.techs_[t]=r,r},e.getTech=function(t){return e.techs_&&e.techs_[t]?e.techs_[t]:j.default&&j.default.videojs&&j.default.videojs[t]?(T.default.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),j.default.videojs[t]):void 0},e}(s.default);R.prototype.textTracks_;var x=function(t,e,r,n){var i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],o=t.textTracks();i.kind=e,r&&(i.label=r),n&&(i.language=n),i.tech=t;var a=new g.default(i);return o.addTrack_(a),a};R.prototype.featuresVolumeControl=!0,R.prototype.featuresFullscreenResize=!1,R.prototype.featuresPlaybackRate=!1,R.prototype.featuresProgressEvents=!1,R.prototype.featuresTimeupdateEvents=!1,R.prototype.featuresNativeTextTracks=!1,R.withSourceHandlers=function(t){t.registerSourceHandler=function(e,r){var n=t.sourceHandlers;n||(n=t.sourceHandlers=[]),void 0===r&&(r=n.length),n.splice(r,0,e)},t.canPlayType=function(e){for(var r=t.sourceHandlers||[],n=void 0,i=0;i<r.length;i++)if(n=r[i].canPlayType(e))return n;return""},t.selectSourceHandler=function(e){for(var r=t.sourceHandlers||[],n=0;n<r.length;n++)if(r[n].canHandleSource(e))return r[n];return null},t.canPlaySource=function(e){var r=t.selectSourceHandler(e);return r?r.canHandleSource(e):""},["seekable","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var r=t.selectSourceHandler(e);return r||(t.nativeSourceHandler?r=t.nativeSourceHandler:T.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_=e,this.sourceHandler_=r.handleSource(e,this),this.on("dispose",this.disposeSourceHandler),this},t.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&this.sourceHandler_.dispose()}},s.default.registerComponent("Tech",R),s.default.registerComponent("MediaTechController",R),R.registerTech("Tech",R),r.default=R,e.exports=r.default},{"../component":65,"../media-error.js":91,"../tracks/html-track-element":107,"../tracks/html-track-element-list":106,"../tracks/text-track":111,"../tracks/text-track-list":110,"../utils/buffer.js":113,"../utils/fn.js":117,"../utils/log.js":120,"../utils/merge-options.js":121,"../utils/time-ranges.js":123,"global/document":7,"global/window":8}],106:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../utils/browser.js"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),a=t("global/document"),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];n(this,t);var r=this;if(o.IS_IE8){r=s.default.createElement("custom");for(var i in t.prototype)"constructor"!==i&&(r[i]=t.prototype[i])}r.trackElements_=[],Object.defineProperty(r,"length",{get:function(){return this.trackElements_.length}});for(var a=0,l=e.length;a<l;a++)r.addTrackElement_(e[a]);if(o.IS_IE8)return r}return t.prototype.addTrackElement_=function(t){this.trackElements_.push(t)},t.prototype.getTrackElementByTrack_=function(t){for(var e=void 0,r=0,n=this.trackElements_.length;r<n;r++)if(t===this.trackElements_[r].track){e=this.trackElements_[r];break}return e},t.prototype.removeTrackElement_=function(t){for(var e=0,r=this.trackElements_.length;e<r;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},t}();r.default=l,e.exports=r.default},{"../utils/browser.js":112,"global/document":7}],107:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var a=t("../utils/browser.js"),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(a),l=t("global/document"),u=n(l),c=t("../event-target"),d=n(c),f=t("../tracks/text-track"),h=n(f),p=0,g=2,y=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),t.call(this);var n=void 0,o=this;if(s.IS_IE8){o=u.default.createElement("custom");for(var a in e.prototype)"constructor"!==a&&(o[a]=e.prototype[a])}var l=new h.default(r);if(o.kind=l.kind,o.src=l.src,o.srclang=l.language,o.label=l.label,o.default=l.default,Object.defineProperty(o,"readyState",{get:function(){return n}}),Object.defineProperty(o,"track",{get:function(){return l}}),n=p,l.addEventListener("loadeddata",function(){n=g,o.trigger({type:"load",target:o})}),s.IS_IE8)return o}return o(e,t),e}(d.default);y.prototype.allowedEvents_={load:"load"},y.NONE=p,y.LOADING=1,y.LOADED=g,y.ERROR=3,r.default=y,e.exports=r.default},{"../event-target":87,"../tracks/text-track":111,"../utils/browser.js":112,"global/document":7}],108:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=t("../utils/browser.js"),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(i),a=t("global/document"),s=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(){function t(e){n(this,t);var r=this;if(o.IS_IE8){r=s.default.createElement("custom");for(var i in t.prototype)"constructor"!==i&&(r[i]=t.prototype[i])}if(t.prototype.setCues_.call(r,e),Object.defineProperty(r,"length",{get:function(){return this.length_}}),o.IS_IE8)return r}return t.prototype.setCues_=function(t){var e=this.length||0,r=0,n=t.length;this.cues_=t,this.length_=t.length;var i=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<n)for(r=e;r<n;r++)i.call(this,r)},t.prototype.getCueById=function(t){for(var e=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===t){e=i;break}}return e},t}();r.default=l,e.exports=r.default},{"../utils/browser.js":112,"global/document":7}],109:[function(t,e,r){"use strict";r.__esModule=!0;var n={disabled:"disabled",hidden:"hidden",showing:"showing"},i={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};r.TextTrackMode=n,r.TextTrackKind=i},{}],110:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("../event-target"),l=i(s),u=t("../utils/fn.js"),c=n(u),d=t("../utils/browser.js"),f=n(d),h=t("global/document"),p=i(h),g=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,e),t.call(this);var n=this;if(f.IS_IE8){n=p.default.createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}n.tracks_=[],Object.defineProperty(n,"length",{get:function(){return this.tracks_.length}});for(var a=0;a<r.length;a++)n.addTrack_(r[a]);if(f.IS_IE8)return n}return a(e,t),e.prototype.addTrack_=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),t.addEventListener("modechange",c.bind(this,function(){this.trigger("change")})),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},e.prototype.removeTrack_=function(t){for(var e=void 0,r=0,n=this.length;r<n;r++)if(this[r]===t){e=this[r],e.off&&e.off(),this.tracks_.splice(r,1);break}e&&this.trigger({track:e,type:"removetrack"})},e.prototype.getTrackById=function(t){for(var e=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===t){e=i;break}}return e},e}(l.default);g.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var y in g.prototype.allowedEvents_)g.prototype["on"+y]=null;r.default=g,e.exports=r.default},{"../event-target":87,"../utils/browser.js":112,"../utils/fn.js":117,"global/document":7}],111:[function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.__esModule=!0;var s=t("./text-track-cue-list"),l=i(s),u=t("../utils/fn.js"),c=n(u),d=t("../utils/guid.js"),f=n(d),h=t("../utils/browser.js"),p=n(h),g=t("./text-track-enums"),y=n(g),v=t("../utils/log.js"),m=i(v),_=t("../event-target"),b=i(_),T=t("global/document"),E=i(T),S=t("global/window"),w=i(S),O=t("../utils/url.js"),A=t("xhr"),j=i(A),k=function(t,e){var r=new w.default.WebVTT.Parser(w.default,w.default.vttjs,w.default.WebVTT.StringDecoder()),n=[];r.oncue=function(t){e.addCue(t)},r.onparsingerror=function(t){n.push(t)},r.onflush=function(){e.trigger({type:"loadeddata",target:e})},r.parse(t),n.length>0&&(console.groupCollapsed,n.forEach(function(t){return m.default.error(t)}),console.groupEnd),r.flush()},C=function(t,e){var r={uri:t},n=O.isCrossOrigin(t);n&&(r.cors=n),j.default(r,c.bind(this,function(t,r,n){if(t)return m.default.error(t,r);e.loaded_=!0,"function"!=typeof w.default.WebVTT?e.tech_&&function(){var t=function(){return k(n,e)};e.tech_.on("vttjsloaded",t),e.tech_.on("vttjserror",function(){m.default.error("vttjs failed to load, stopping trying to process "+e.src),e.tech_.off("vttjsloaded",t)})}():k(n,e)}))},R=function(t){function e(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(o(this,e),t.call(this),!r.tech)throw new Error("A tech was not provided.");var n=this;if(p.IS_IE8){n=E.default.createElement("custom");for(var i in e.prototype)"constructor"!==i&&(n[i]=e.prototype[i])}n.tech_=r.tech;var a=y.TextTrackMode[r.mode]||"disabled",s=y.TextTrackKind[r.kind]||"subtitles",u=r.default,d=r.label||"",h=r.language||r.srclang||"",g=r.id||"vjs_text_track_"+f.newGUID();"metadata"!==s&&"chapters"!==s||(a="hidden"),n.cues_=[],n.activeCues_=[];var v=new l.default(n.cues_),m=new l.default(n.activeCues_),_=!1,b=c.bind(n,function(){this.activeCues,_&&(this.trigger("cuechange"),_=!1)});if("disabled"!==a&&n.tech_.on("timeupdate",b),Object.defineProperty(n,"kind",{get:function(){return s},set:function(){}}),Object.defineProperty(n,"label",{get:function(){return d},set:function(){}}),Object.defineProperty(n,"language",{get:function(){return h},set:function(){}}),Object.defineProperty(n,"id",{get:function(){return g},set:function(){}}),Object.defineProperty(n,"default",{get:function(){return u},set:function(){}}),Object.defineProperty(n,"mode",{get:function(){return a},set:function(t){y.TextTrackMode[t]&&(a=t,"showing"===a&&this.tech_.on("timeupdate",b),this.trigger("modechange"))}}),Object.defineProperty(n,"cues",{get:function(){return this.loaded_?v:null},set:function(){}}),Object.defineProperty(n,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return m;for(var t=this.tech_.currentTime(),e=[],r=0,n=this.cues.length;r<n;r++){var i=this.cues[r];i.startTime<=t&&i.endTime>=t?e.push(i):i.startTime===i.endTime&&i.startTime<=t&&i.startTime+.5>=t&&e.push(i)}if(_=!1,e.length!==this.activeCues_.length)_=!0;else for(var r=0;r<e.length;r++)-1===this.activeCues_.indexOf(e[r])&&(_=!0);return this.activeCues_=e,m.setCues_(this.activeCues_),m},set:function(){}}),r.src?(n.src=r.src,C(r.src,n)):n.loaded_=!0,p.IS_IE8)return n}return a(e,t),e.prototype.addCue=function(t){var e=this.tech_.textTracks();if(e)for(var r=0;r<e.length;r++)e[r]!==this&&e[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},e.prototype.removeCue=function(t){for(var e=!1,r=0,n=this.cues_.length;r<n;r++){this.cues_[r]===t&&(this.cues_.splice(r,1),e=!0)}e&&this.cues.setCues_(this.cues_)},e}(b.default);R.prototype.allowedEvents_={cuechange:"cuechange"},r.default=R,e.exports=r.default},{"../event-target":87,"../utils/browser.js":112,"../utils/fn.js":117,"../utils/guid.js":119,"../utils/log.js":120,"../utils/url.js":125,"./text-track-cue-list":108,"./text-track-enums":109,"global/document":7,"global/window":8,xhr:60}],112:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("global/document"),o=n(i),a=t("global/window"),s=n(a),l=s.default.navigator.userAgent,u=/AppleWebKit\/([\d.]+)/i.exec(l),c=u?parseFloat(u.pop()):null,d=/iPad/i.test(l);r.IS_IPAD=d;var f=/iPhone/i.test(l)&&!d;r.IS_IPHONE=f;var h=/iPod/i.test(l);r.IS_IPOD=h;var p=f||d||h;r.IS_IOS=p;var g=function(){var t=l.match(/OS (\d+)_/i);if(t&&t[1])return t[1]}();r.IOS_VERSION=g;var y=/Android/i.test(l);r.IS_ANDROID=y;var v=function(){var t,e,r=l.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return r?(t=r[1]&&parseFloat(r[1]),e=r[2]&&parseFloat(r[2]),t&&e?parseFloat(r[1]+"."+r[2]):t||null):null}();r.ANDROID_VERSION=v;var m=y&&/webkit/i.test(l)&&v<2.3;r.IS_OLD_ANDROID=m;var _=y&&v<5&&c<537;r.IS_NATIVE_ANDROID=_;var b=/Firefox/i.test(l);r.IS_FIREFOX=b;var T=/Edge/i.test(l);r.IS_EDGE=T;var E=!T&&/Chrome/i.test(l);r.IS_CHROME=E;var S=/MSIE\s8\.0/.test(l);r.IS_IE8=S;var w=!!("ontouchstart"in s.default||s.default.DocumentTouch&&o.default instanceof s.default.DocumentTouch);r.TOUCH_ENABLED=w;var O="backgroundSize"in o.default.createElement("video").style;r.BACKGROUND_SIZE_SUPPORTED=O},{"global/document":7,"global/window":8}],113:[function(t,e,r){"use strict";function n(t,e){var r,n,o=0;if(!e)return 0;t&&t.length||(t=i.createTimeRange(0,0));for(var a=0;a<t.length;a++)r=t.start(a),n=t.end(a),n>e&&(n=e),o+=n-r;return o/e}r.__esModule=!0,r.bufferedPercent=n;var i=t("./time-ranges.js")},{"./time-ranges.js":123}],114:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./log.js"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o={get:function(t,e){return t[e]},set:function(t,e,r){return t[e]=r,!0}};r.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if("function"==typeof Proxy){var r=function(){var r={};return Object.keys(e).forEach(function(t){o.hasOwnProperty(t)&&(r[t]=function(){return i.default.warn(e[t]),o[t].apply(this,arguments)})}),{v:new Proxy(t,r)}}();if("object"==typeof r)return r.v}return t},e.exports=r.default},{"./log.js":120}],115:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return"string"==typeof t&&/\S/.test(t)}function o(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function a(t){return new RegExp("(^|\\s)"+t+"($|\\s)")}function s(t){return function(e,r){return i(e)?(i(r)&&(r=D.default.querySelector(r)),(O(r)?r:D.default)[t](e)):D.default[t](null)}}function l(t){return 0===t.indexOf("#")&&(t=t.slice(1)),D.default.getElementById(t)}function u(){var t=arguments.length<=0||void 0===arguments[0]?"div":arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=D.default.createElement(t);return Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(B.default.warn(G.default(x,t,r)),n.setAttribute(t,r)):n[t]=r}),Object.getOwnPropertyNames(r).forEach(function(t){r[t];n.setAttribute(t,r[t])}),n}function c(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}function d(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function f(t){var e=t[K];return e||(e=t[K]=F.newGUID()),H[e]||(H[e]={}),H[e]}function h(t){var e=t[K];return!!e&&!!Object.getOwnPropertyNames(H[e]).length}function p(t){var e=t[K];if(e){delete H[e];try{delete t[K]}catch(e){t.removeAttribute?t.removeAttribute(K):t[K]=null}}}function g(t,e){return t.classList?t.classList.contains(e):(o(e),a(e).test(t.className))}function y(t,e){return t.classList?t.classList.add(e):g(t,e)||(t.className=(t.className+" "+e).trim()),t}function v(t,e){return t.classList?t.classList.remove(e):(o(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function m(t,e,r){var n=g(t,e);if("function"==typeof r&&(r=r(t,e)),"boolean"!=typeof r&&(r=!n),r!==n)return r?y(t,e):v(t,e),t}function _(t,e){Object.getOwnPropertyNames(e).forEach(function(r){var n=e[r];null===n||void 0===n||!1===n?t.removeAttribute(r):t.setAttribute(r,!0===n?"":n)})}function b(t){var e,r,n,i,o;if(e={},r=",autoplay,controls,loop,muted,default,",t&&t.attributes&&t.attributes.length>0){n=t.attributes;for(var a=n.length-1;a>=0;a--)i=n[a].name,o=n[a].value,"boolean"!=typeof t[i]&&-1===r.indexOf(","+i+",")||(o=null!==o),e[i]=o}return e}function T(){D.default.body.focus(),D.default.onselectstart=function(){return!1}}function E(){D.default.onselectstart=function(){return!0}}function S(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var r=D.default.documentElement,n=D.default.body,i=r.clientLeft||n.clientLeft||0,o=I.default.pageXOffset||n.scrollLeft,a=e.left+o-i,s=r.clientTop||n.clientTop||0,l=I.default.pageYOffset||n.scrollTop,u=e.top+l-s;return{left:Math.round(a),top:Math.round(u)}}function w(t,e){var r={},n=S(t),i=t.offsetWidth,o=t.offsetHeight,a=n.top,s=n.left,l=e.pageY,u=e.pageX;return e.changedTouches&&(u=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(a-l+o)/o)),r.x=Math.max(0,Math.min(1,(u-s)/i)),r}function O(t){return!!t&&"object"==typeof t&&1===t.nodeType}function A(t){return!!t&&"object"==typeof t&&3===t.nodeType}function j(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function k(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),O(t)||A(t)?t:"string"==typeof t&&/\S/.test(t)?D.default.createTextNode(t):void 0}).filter(function(t){return t})}function C(t,e){return k(e).forEach(function(e){return t.appendChild(e)}),t}function R(t,e){return C(j(t),e)}r.__esModule=!0,r.getEl=l,r.createEl=u,r.textContent=c,r.insertElFirst=d,r.getElData=f,r.hasElData=h,r.removeElData=p,r.hasElClass=g,r.addElClass=y,r.removeElClass=v,r.toggleElClass=m,r.setElAttributes=_,r.getElAttributes=b,r.blockTextSelection=T,r.unblockTextSelection=E,r.findElPosition=S,r.getPointerPosition=w,r.isEl=O,r.isTextNode=A,r.emptyEl=j,r.normalizeContent=k,r.appendContent=C,r.insertContent=R;var x=function(t,e){return t.raw=e,t}(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]),P=t("global/document"),D=n(P),L=t("global/window"),I=n(L),M=t("./guid.js"),F=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(M),N=t("./log.js"),B=n(N),U=t("tsml"),G=n(U),H={},K="vdata"+(new Date).getTime(),V=s("querySelector");r.$=V;var W=s("querySelectorAll");r.$$=W},{"./guid.js":119,"./log.js":120,"global/document":7,"global/window":8,tsml:59}],116:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t,e,r){if(Array.isArray(e))return d(o,t,e,r);var n=h.getElData(t);n.handlers||(n.handlers={}),n.handlers[e]||(n.handlers[e]=[]),r.guid||(r.guid=g.newGUID()),n.handlers[e].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(e,r){if(!n.disabled){e=u(e);var i=n.handlers[e.type];if(i)for(var o=i.slice(0),a=0,s=o.length;a<s&&!e.isImmediatePropagationStopped();a++)o[a].call(t,e,r)}}),1===n.handlers[e].length&&(t.addEventListener?t.addEventListener(e,n.dispatcher,!1):t.attachEvent&&t.attachEvent("on"+e,n.dispatcher))}function a(t,e,r){if(h.hasElData(t)){var n=h.getElData(t);if(n.handlers){if(Array.isArray(e))return d(a,t,e,r);var i=function(e){n.handlers[e]=[],c(t,e)};if(e){var o=n.handlers[e];if(o){if(!r)return void i(e);if(r.guid)for(var s=0;s<o.length;s++)o[s].guid===r.guid&&o.splice(s--,1);c(t,e)}}else for(var l in n.handlers)i(l)}}}function s(t,e,r){var n=h.hasElData(t)?h.getElData(t):{},i=t.parentNode||t.ownerDocument;if("string"==typeof e&&(e={type:e,target:t}),e=u(e),n.dispatcher&&n.dispatcher.call(t,e,r),i&&!e.isPropagationStopped()&&!0===e.bubbles)s.call(null,i,e,r);else if(!i&&!e.defaultPrevented){var o=h.getElData(e.target);e.target[e.type]&&(o.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),o.disabled=!1)}return!e.defaultPrevented}function l(t,e,r){if(Array.isArray(e))return d(l,t,e,r);var n=function n(){a(t,e,n),r.apply(this,arguments)};n.guid=r.guid=r.guid||g.newGUID(),o(t,e,n)}function u(t){function e(){return!0}function r(){return!1}if(!t||!t.isPropagationStopped){var n=t||v.default.event;t={};for(var i in n)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&n.preventDefault||(t[i]=n[i]));if(t.target||(t.target=t.srcElement||_.default),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){n.preventDefault&&n.preventDefault(),t.returnValue=!1,n.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),t.cancelBubble=!0,n.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=r,t.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=r,null!=t.clientX){var o=_.default.documentElement,a=_.default.body;t.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,null!=t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}function c(t,e){var r=h.getElData(t);0===r.handlers[e].length&&(delete r.handlers[e],t.removeEventListener?t.removeEventListener(e,r.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&h.removeElData(t)}function d(t,e,r,n){r.forEach(function(r){t(e,r,n)})}r.__esModule=!0,r.on=o,r.off=a,r.trigger=s,r.one=l,r.fixEvent=u;var f=t("./dom.js"),h=i(f),p=t("./guid.js"),g=i(p),y=t("global/window"),v=n(y),m=t("global/document"),_=n(m)},{"./dom.js":115,"./guid.js":119,"global/document":7,"global/window":8}],117:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("./guid.js"),i=function(t,e,r){e.guid||(e.guid=n.newGUID());var i=function(){return e.apply(t,arguments)};return i.guid=r?r+"_"+e.guid:e.guid,i};r.bind=i},{"./guid.js":119}],118:[function(t,e,r){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?t:arguments[1];return function(){t=t<0?0:t;var r=Math.floor(t%60),n=Math.floor(t/60%60),i=Math.floor(t/3600),o=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(i=n=r="-"),i=i>0||a>0?i+":":"",n=((i||o>=10)&&n<10?"0"+n:n)+":",r=r<10?"0"+r:r,i+n+r}()}r.__esModule=!0,r.default=n,e.exports=r.default},{}],119:[function(t,e,r){"use strict";function n(){return i++}r.__esModule=!0,r.newGUID=n;var i=1},{}],120:[function(t,e,r){"use strict";function n(t,e){var r=Array.prototype.slice.call(e),n=function(){},i=o.default.console||{log:n,warn:n,error:n};t?r.unshift(t.toUpperCase()+":"):t="log",a.history.push(r),r.unshift("VIDEOJS:"),i[t].apply?i[t].apply(i,r):i[t](r.join(" "))}r.__esModule=!0;var i=t("global/window"),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){n(null,arguments)};a.history=[],a.error=function(){n("error",arguments)},a.warn=function(){n("warn",arguments)},r.default=a,e.exports=r.default},{"global/window":8}],121:[function(t,e,r){"use strict";function n(t){return!!t&&"object"==typeof t&&"[object Object]"===t.toString()&&t.constructor===Object}function i(){var t=Array.prototype.slice.call(arguments);return t.unshift({}),t.push(s),a.default.apply(null,t),t[0]}r.__esModule=!0,r.default=i;var o=t("lodash-compat/object/merge"),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(t,e){return n(e)?n(t)?void 0:i(e):e};e.exports=r.default},{"lodash-compat/object/merge":46}],122:[function(t,e,r){"use strict";r.__esModule=!0;var n=t("global/document"),i=function(t){return t&&t.__esModule?t:{default:t}}(n),o=function(t){var e=i.default.createElement("style");return e.className=t,e};r.createStyleElement=o;var a=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e};r.setTextContent=a},{"global/document":7}],123:[function(t,e,r){"use strict";function n(t,e){return Array.isArray(t)?i(t):void 0===t||void 0===e?i():i([[t,e]])}function i(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:o.bind(null,"start",0,t),end:o.bind(null,"end",1,t)}}function o(t,e,r,n){return void 0===n&&(l.default.warn("DEPRECATED: Function '"+t+"' on 'TimeRanges' called without an index argument."),n=0),a(t,n,r.length-1),r[n][e]}function a(t,e,r){if(e<0||e>r)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is greater than or equal to the maximum bound ("+r+").")}r.__esModule=!0,r.createTimeRanges=n;var s=t("./log.js"),l=function(t){return t&&t.__esModule?t:{default:t}}(s);r.createTimeRange=n},{"./log.js":120}],124:[function(t,e,r){"use strict";function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}r.__esModule=!0,r.default=n,e.exports=r.default},{}],125:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var i=t("global/document"),o=n(i),a=t("global/window"),s=n(a),l=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],r=o.default.createElement("a");r.href=t;var n=""===r.host&&"file:"!==r.protocol,i=void 0;n&&(i=o.default.createElement("div"),
i.innerHTML='<a href="'+t+'"></a>',r=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),o.default.body.appendChild(i));for(var a={},s=0;s<e.length;s++)a[e[s]]=r[e[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),n&&o.default.body.removeChild(i),a};r.parseUrl=l;var u=function(t){if(!t.match(/^https?:\/\//)){var e=o.default.createElement("div");e.innerHTML='<a href="'+t+'">x</a>',t=e.firstChild.href}return t};r.getAbsoluteURL=u;var c=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,r=e.exec(t);if(r)return r.pop().toLowerCase()}return""};r.getFileExtension=c;var d=function(t){var e=s.default.location,r=l(t);return(":"===r.protocol?e.protocol:r.protocol)+r.host!==e.protocol+e.host};r.isCrossOrigin=d},{"global/document":7,"global/window":8}],126:[function(e,r,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var a=e("global/window"),s=o(a),l=e("global/document"),u=o(l),c=e("./setup"),d=i(c),f=e("./utils/stylesheet.js"),h=i(f),p=e("./component"),g=o(p),y=e("./event-target"),v=o(y),m=e("./utils/events.js"),_=i(m),b=e("./player"),T=o(b),E=e("./plugins.js"),S=o(E),w=e("../../src/js/utils/merge-options.js"),O=o(w),A=e("./utils/fn.js"),j=i(A),k=e("./tracks/text-track.js"),C=o(k),R=e("object.assign"),x=(o(R),e("./utils/time-ranges.js")),P=e("./utils/format-time.js"),D=o(P),L=e("./utils/log.js"),I=o(L),M=e("./utils/dom.js"),F=i(M),N=e("./utils/browser.js"),B=i(N),U=e("./utils/url.js"),G=i(U),H=e("./extend.js"),K=o(H),V=e("lodash-compat/object/merge"),W=o(V),Y=e("./utils/create-deprecation-proxy.js"),q=o(Y),X=e("xhr"),z=o(X),$=e("./tech/tech.js"),Q=o($),J=e("./tech/html5.js"),Z=(o(J),e("./tech/flash.js"));o(Z);"undefined"==typeof HTMLVideoElement&&(u.default.createElement("video"),u.default.createElement("audio"),u.default.createElement("track"));var tt=function t(e,r,n){var i=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),t.getPlayers()[e])return r&&I.default.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&t.getPlayers()[e].ready(n),t.getPlayers()[e];i=F.getEl(e)}else i=e;if(!i||!i.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return i.player||T.default.players[i.playerId]||new T.default(i,r,n)};if(!0!==s.default.VIDEOJS_NO_DYNAMIC_STYLE){var et=F.$(".vjs-styles-defaults");if(!et){et=h.createStyleElement("vjs-styles-defaults");var rt=F.$("head");rt.insertBefore(et,rt.firstChild),h.setTextContent(et,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}d.autoSetupTimeout(1,tt),tt.VERSION="5.9.2",tt.options=T.default.prototype.options_,tt.getPlayers=function(){return T.default.players},tt.players=q.default(T.default.players,{get:"Access to videojs.players is deprecated; use videojs.getPlayers instead",set:"Modification of videojs.players is deprecated"}),tt.getComponent=g.default.getComponent,tt.registerComponent=function(t,e){Q.default.isTech(e)&&I.default.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),g.default.registerComponent.call(g.default,t,e)},tt.getTech=Q.default.getTech,tt.registerTech=Q.default.registerTech,tt.browser=B,tt.TOUCH_ENABLED=B.TOUCH_ENABLED,tt.extend=K.default,tt.mergeOptions=O.default,tt.bind=j.bind,tt.plugin=S.default,tt.addLanguage=function(t,e){var r;return t=(""+t).toLowerCase(),W.default(tt.options.languages,(r={},r[t]=e,r))[t]},tt.log=I.default,tt.createTimeRange=tt.createTimeRanges=x.createTimeRanges,tt.formatTime=D.default,tt.parseUrl=G.parseUrl,tt.isCrossOrigin=G.isCrossOrigin,tt.EventTarget=v.default,tt.on=_.on,tt.one=_.one,tt.off=_.off,tt.trigger=_.trigger,tt.xhr=z.default,tt.TextTrack=C.default,tt.isEl=F.isEl,tt.isTextNode=F.isTextNode,tt.createEl=F.createEl,tt.hasClass=F.hasElClass,tt.addClass=F.addElClass,tt.removeClass=F.removeElClass,tt.toggleClass=F.toggleElClass,tt.setAttributes=F.setElAttributes,tt.getAttributes=F.getElAttributes,tt.emptyEl=F.emptyEl,tt.appendContent=F.appendContent,tt.insertContent=F.insertContent,"function"==typeof t&&t.amd?t("videojs",[],function(){return tt}):"object"==typeof n&&"object"==typeof r&&(r.exports=tt),n.default=tt,r.exports=n.default},{"../../src/js/utils/merge-options.js":121,"./component":65,"./event-target":87,"./extend.js":88,"./player":95,"./plugins.js":96,"./setup":99,"./tech/flash.js":102,"./tech/html5.js":103,"./tech/tech.js":105,"./tracks/text-track.js":111,"./utils/browser.js":112,"./utils/create-deprecation-proxy.js":114,"./utils/dom.js":115,"./utils/events.js":116,"./utils/fn.js":117,"./utils/format-time.js":118,"./utils/log.js":120,"./utils/stylesheet.js":122,"./utils/time-ranges.js":123,"./utils/url.js":125,"global/document":7,"global/window":8,"lodash-compat/object/merge":46,"object.assign":53,xhr:60}]},{},[126])(126)}()}(),function(t){var e=t.vttjs={},r=e.VTTCue,n=e.VTTRegion,i=t.VTTCue,o=t.VTTRegion;e.shim=function(){e.VTTCue=r,e.VTTRegion=n},e.restore=function(){e.VTTCue=i,e.VTTRegion=o}}(this),function(t,e){function r(t){return"string"==typeof t&&(!!s[t.toLowerCase()]&&t.toLowerCase())}function n(t){return"string"==typeof t&&(!!l[t.toLowerCase()]&&t.toLowerCase())}function i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function o(t,e,o){var s=this,l=/MSIE\s8\.0/.test(navigator.userAgent),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=t,h=e,p=o,g=null,y="",v=!0,m="auto",_="start",b=50,T="middle",E=50,S="middle";if(Object.defineProperty(s,"id",i({},u,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return g},set:function(t){g=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return y},set:function(t){var e=r(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==a)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return _},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return T},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return S},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");S=e,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}var a="auto",s={"":!0,lr:!0,rl:!0},l={start:!0,middle:!0,end:!0,left:!0,right:!0};o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},t.VTTCue=t.VTTCue||o,e.VTTCue=o}(this,this.vttjs||{}),function(t,e){function r(t){return"string"==typeof t&&(!!o[t.toLowerCase()]&&t.toLowerCase())}function n(t){return"number"==typeof t&&t>=0&&t<=100}function i(){var t=100,e=3,i=0,o=100,a=0,s=100,l="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!n(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(t){if(!n(t))throw new Error("RegionAnchorX must be between 0 and 100.");o=t}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(t){if(!n(t))throw new Error("RegionAnchorY must be between 0 and 100.");i=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!n(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(t){if(!n(t))throw new Error("ViewportAnchorX must be between 0 and 100.");a=t}},scroll:{enumerable:!0,get:function(){return l},set:function(t){var e=r(t);if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");l=e}}})}var o={"":!0,up:!0};t.VTTRegion=t.VTTRegion||i,e.VTTRegion=i}(this,this.vttjs||{}),function(t){function e(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function r(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function n(){this.values=p(null)}function i(t,e,r,n){var i=n?t.split(n):[t];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],l=a[1];e(s,l)}}}function o(t,o,a){function s(){var n=r(t);if(null===n)throw new e(e.Errors.BadTimeStamp,"Malformed timestamp: "+u);return t=t.replace(/^[^\sa-zA-Z-]+/,""),n}function l(){t=t.replace(/^\s+/,"")}var u=t;if(l(),o.startTime=s(),l(),"--\x3e"!==t.substr(0,3))throw new e(e.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+u);t=t.substr(3),l(),o.endTime=s(),l(),function(t,e){var r=new n;i(t,function(t,e){switch(t){case"region":for(var n=a.length-1;n>=0;n--)if(a[n].id===e){r.set(t,a[n].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),o=i[0];r.integer(t,o),r.percent(t,o)&&r.set("snapToLines",!1),r.alt(t,o,["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=e.split(","),r.percent(t,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical",""),e.line=r.get("line","auto"),e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align","middle"),e.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)}(t,o)}function a(t,e){function n(t){return g[t]}for(var i,o=t.document.createElement("div"),a=o,s=[];null!==(i=function(){if(!e)return null;var t=e.match(/^([^<]*)(<[^>]+>?)?/);return function(t){return e=e.substr(t.length),t}(t[1]?t[1]:t[2])}());)if("<"!==i[0])a.appendChild(t.document.createTextNode(function(t){for(;c=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(c[0],n);return t}(i)));else{if("/"===i[1]){s.length&&s[s.length-1]===i.substr(2).replace(">","")&&(s.pop(),a=a.parentNode);continue}var l,u=r(i.substr(1,i.length-2));if(u){l=t.document.createProcessingInstruction("timestamp",u),a.appendChild(l);continue}var c=i.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!c)continue;if(!(l=function(e,r){var n=y[e];if(!n)return null;var i=t.document.createElement(n);i.localName=n;var o=v[e];return o&&r&&(i[o]=r.trim()),i}(c[1],c[3])))continue;if(!function(t,e){return!m[e.localName]||m[e.localName]===t.localName}(a,l))continue;c[2]&&(l.className=c[2].substr(1).replace("."," ")),s.push(c[1]),a.appendChild(l),a=l}return o}function s(t){function e(t,e){for(var r=e.childNodes.length-1;r>=0;r--)t.push(e.childNodes[r])}function r(t){if(!t||!t.length)return null;var n=t.pop(),i=n.textContent||n.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(t.length=0,o[0]):i}return"ruby"===n.tagName?r(t):n.childNodes?(e(t,n),r(t)):void 0}var n,i=[],o="";if(!t||!t.childNodes)return"ltr";for(e(i,t);o=r(i);)for(var a=0;a<o.length;a++){n=o.charCodeAt(a);for(var s=0;s<_.length;s++)if(_[s]===n)return"rtl"}return"ltr"}function l(t){if("number"==typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,i=0;i<r.length&&r[i]!==e;i++)"showing"===r[i].mode&&n++;return-1*++n}function u(){}function c(t,e,r){var n=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";n&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),u.call(this),this.cue=e,this.cueDiv=a(t,e.text);var l={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(l.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",l.unicodeBidi="plaintext"),this.applyStyles(l,this.cueDiv),this.div=t.document.createElement("div"),l={textAlign:"middle"===e.align?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},n||(l.direction=s(this.cueDiv),l.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(l),this.div.appendChild(this.cueDiv);var c=0;switch(e.positionAlign){case"start":c=e.position;break;case"middle":c=e.position-e.size/2;break;case"end":c=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(c,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(c,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function d(t){var e,r,n,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||r,this.bottom=t.bottom||i+(t.height||r),this.width=t.width||n,this.lineHeight=void 0!==e?e:t.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function f(t,e,r,n){var i=new d(e),o=e.cue,a=l(o),s=[];if(o.snapToLines){var u;switch(o.vertical){case"":s=["+y","-y"],u="height";break;case"rl":s=["+x","-x"],u="width";break;case"lr":s=["-x","+x"],u="width"}var c=i.lineHeight,f=c*Math.round(a),h=r[u]+c,p=s[0];Math.abs(f)>h&&(f=f<0?-1:1,f*=Math.ceil(h/c)*c),a<0&&(f+=""===o.vertical?r.height:r.width,s=s.reverse()),i.move(p,f)}else{var g=i.lineHeight/r.height*100;switch(o.lineAlign){case"middle":a-=g/2;break;case"end":a-=g}switch(o.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new d(e)}var y=function(t,e){for(var i,o=new d(t),a=1,s=0;s<e.length;s++){for(;t.overlapsOppositeAxis(r,e[s])||t.within(r)&&t.overlapsAny(n);)t.move(e[s]);if(t.within(r))return t;var l=t.intersectPercentage(r);a>l&&(i=new d(t),a=l),t=new d(o)}return i||o}(i,s);e.move(y.toCSSCompatValues(r))}function h(){}var p=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();e.prototype=p(Error.prototype),e.prototype.constructor=e,e.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},n.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var g={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},v={v:"title",lang:"lang"},m={rt:"ruby"},_=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];u.prototype.applyStyles=function(t,e){e=e||this.div;for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])},u.prototype.formatStyle=function(t,e){return 0===t?0:t+e},c.prototype=p(u.prototype),c.prototype.constructor=c,d.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},d.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},d.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},d.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},d.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},d.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},d.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},d.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t,{left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r}},h.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},h.convertCueToDOMTree=function(t,e){return t&&e?a(t,e):null};h.processCues=function(t,e,r){if(!t||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=t.document.createElement("div");if(n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin="1.5%",r.appendChild(n),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var i=[],o=d.getSimpleBoxPosition(n),a=Math.round(.05*o.height*100)/100,s={font:a+"px sans-serif"};!function(){for(var r,a,l=0;l<e.length;l++)a=e[l],r=new c(t,a,s),n.appendChild(r.div),f(t,r,o,i),a.displayState=r.div,i.push(d.getSimpleBoxPosition(r))}()}else for(var l=0;l<e.length;l++)n.appendChild(e[l].displayState)},h.Parser=function(t,e,r){r||(r=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]},h.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof e))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){function r(){for(var t=s.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,s.buffer=t.substr(e),r}function a(t){var e=new n;if(i(t,function(t,r){switch(t){case"id":e.set(t,r);break;case"width":e.percent(t,r);break;case"lines":e.integer(t,r);break;case"regionanchor":case"viewportanchor":var i=r.split(",");if(2!==i.length)break;var o=new n;if(o.percent("x",i[0]),o.percent("y",i[1]),!o.has("x")||!o.has("y"))break;e.set(t+"X",o.get("x")),e.set(t+"Y",o.get("y"));break;case"scroll":e.alt(t,r,["up"])}},/=/,/\s/),e.has("id")){var r=new(s.vttjs.VTTRegion||s.window.VTTRegion)
;r.width=e.get("width",100),r.lines=e.get("lines",3),r.regionAnchorX=e.get("regionanchorX",0),r.regionAnchorY=e.get("regionanchorY",100),r.viewportAnchorX=e.get("viewportanchorX",0),r.viewportAnchorY=e.get("viewportanchorY",100),r.scroll=e.get("scroll",""),s.onregion&&s.onregion(r),s.regionList.push({id:e.get("id"),region:r})}}var s=this;t&&(s.buffer+=s.decoder.decode(t,{stream:!0}));try{var l;if("INITIAL"===s.state){if(!/\r\n|\n/.test(s.buffer))return this;l=r();var u=l.match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new e(e.Errors.BadSignature);s.state="HEADER"}for(var c=!1;s.buffer;){if(!/\r\n|\n/.test(s.buffer))return this;switch(c?c=!1:l=r(),s.state){case"HEADER":/:/.test(l)?function(t){i(t,function(t,e){switch(t){case"Region":a(e)}},/:/)}(l):l||(s.state="ID");continue;case"NOTE":l||(s.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){s.state="NOTE";break}if(!l)continue;if(s.cue=new(s.vttjs.VTTCue||s.window.VTTCue)(0,0,""),s.state="CUE",-1===l.indexOf("--\x3e")){s.cue.id=l;continue}case"CUE":try{o(l,s.cue,s.regionList)}catch(t){s.reportOrThrowError(t),s.cue=null,s.state="BADCUE";continue}s.state="CUETEXT";continue;case"CUETEXT":var d=-1!==l.indexOf("--\x3e");if(!l||d&&(c=!0)){s.oncue&&s.oncue(s.cue),s.cue=null,s.state="ID";continue}s.cue.text&&(s.cue.text+="\n"),s.cue.text+=l;continue;case"BADCUE":l||(s.state="ID");continue}}}catch(t){s.reportOrThrowError(t),"CUETEXT"===s.state&&s.cue&&s.oncue&&s.oncue(s.cue),s.cue=null,s.state="INITIAL"===s.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new e(e.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},t.WebVTT=h}(this,this.vttjs),"undefined"!=typeof window&&function(t,e){t.Hls=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)e.d(n,i,function(e){return t[e]}.bind(null,i));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(t,e,r){"use strict";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,n||t,o),s=u?u+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}var l=Object.prototype.hasOwnProperty,u="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(u=!1)),s.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)l.call(t,e)&&r.push(u?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=u?u+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=new Array(i);n<i;n++)o[n]=r[n].fn;return o},s.prototype.listenerCount=function(t){var e=u?u+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,n,i,o){var a=u?u+t:t;if(!this._events[a])return!1;var s,l,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,i),!0;case 6:return c.fn.call(c.context,e,r,n,i,o),!0}for(l=1,s=new Array(d-1);l<d;l++)s[l-1]=arguments[l];c.fn.apply(c.context,s)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,r);break;case 4:c[l].fn.call(c[l].context,e,r,n);break;default:if(!s)for(f=1,s=new Array(d-1);f<d;f++)s[f-1]=arguments[f];c[l].fn.apply(c[l].context,s)}}return!0},s.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},s.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},s.prototype.removeListener=function(t,e,r,n){var i=u?u+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||a(this,i);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==e||n&&!o[s].once||r&&o[s].context!==r)&&l.push(o[s]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=u?u+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=u,s.EventEmitter=s,t.exports=s},"./node_modules/events/events.js":function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,s,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.trace),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(t,e,r){!function(e){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=a.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):e;var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=a.normalizePath(d)}else u.path=s.path,o.params||(u.params=s.params,o.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=a}()},"./node_modules/webworkify-webpack/index.js":function(t,e,r){function n(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e.oe=function(t){throw t};var n=e(e.s=ENTRY_MODULE);return n.default||n}function i(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(t){return!isNaN(1*t)}function a(t,e,n){var a={};a[n]=[];var s=e.toString(),l=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return a;for(var d,f=l[1],h=new RegExp("(\\\\n|\\W)"+i(f)+c,"g");d=h.exec(s);)"dll-reference"!==d[3]&&a[n].push(d[3]);for(h=new RegExp("\\("+i(f)+'\\("(dll-reference\\s('+u+'))"\\)\\)'+c,"g");d=h.exec(s);)t[d[2]]||(a[n].push(d[1]),t[d[2]]=r(d[1]).m),a[d[2]]=a[d[2]]||[],a[d[2]].push(d[4]);for(var p=Object.keys(a),g=0;g<p.length;g++)for(var y=0;y<a[p[g]].length;y++)o(a[p[g]][y])&&(a[p[g]][y]=1*a[p[g]][y]);return a}function s(t){return Object.keys(t).reduce(function(e,r){return e||t[r].length>0},!1)}function l(t,e){for(var r={main:[e]},n={main:[]},i={main:{}};s(r);)for(var o=Object.keys(r),l=0;l<o.length;l++){var u=o[l],c=r[u],d=c.pop();if(i[u]=i[u]||{},!i[u][d]&&t[u][d]){i[u][d]=!0,n[u]=n[u]||[],n[u].push(d);for(var f=a(t,t[u][d],u),h=Object.keys(f),p=0;p<h.length;p++)r[h[p]]=r[h[p]]||[],r[h[p]]=r[h[p]].concat(f[h[p]])}}return n}var u="[\\.|\\-|\\+|\\w|/|@]+",c="\\((/\\*.*?\\*/)?s?.*?("+u+").*?\\)";t.exports=function(t,e){e=e||{};var i={main:r.m},o=e.all?{main:Object.keys(i.main)}:l(i,t),a="";Object.keys(o).filter(function(t){return"main"!==t}).forEach(function(t){for(var e=0;o[t][e];)e++;o[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+t+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map(function(e){return JSON.stringify(e)+": "+i[t][e].toString()}).join(",")+"});\n"}),a=a+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map(function(t){return JSON.stringify(t)+": "+i.main[t].toString()}).join(",")+"}))(self);";var s=new window.Blob([a],{type:"text/javascript"});if(e.bare)return s;var u=window.URL||window.webkitURL||window.mozURL||window.msURL,c=u.createObjectURL(s),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/controller/abr-controller.js"),i=r("./src/controller/buffer-controller.js"),o=r("./src/controller/cap-level-controller.js"),a=r("./src/controller/fps-controller.js"),s=r("./src/utils/xhr-loader.js"),l=r("./src/controller/audio-track-controller.js"),u=r("./src/controller/audio-stream-controller.js"),c=r("./src/utils/cues.js"),d=r("./src/controller/timeline-controller.js"),f=r("./src/controller/subtitle-track-controller.js"),h=r("./src/controller/subtitle-stream-controller.js"),p=r("./src/controller/eme-controller.js"),g=r("./src/utils/mediakeys-helper.js");e.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess},e.hlsDefaultConfig.subtitleStreamController=h.default,e.hlsDefaultConfig.subtitleTrackController=f.default,e.hlsDefaultConfig.timelineController=d.default,e.hlsDefaultConfig.cueHandler=c,e.hlsDefaultConfig.enableCEA708Captions=!0,e.hlsDefaultConfig.enableWebVTT=!0,e.hlsDefaultConfig.captionsTextTrack1Label="English",e.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",e.hlsDefaultConfig.captionsTextTrack2Label="Spanish",e.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",e.hlsDefaultConfig.audioStreamController=u.default,e.hlsDefaultConfig.audioTrackController=l.default,e.hlsDefaultConfig.emeController=p.default},"./src/controller/abr-controller.js":function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/errors.js"),l=r("./src/utils/logger.js"),u=r("./src/utils/ewma-bandwidth-estimator.js"),c=window.performance,d=function(e){function r(t){var r=e.call(this,t,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return n(r,e),r.prototype.destroy=function(){this.clearTimer(),o.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=e.level,o=r.levels[i].details.live,a=void 0,s=void 0;o?(a=n.abrEwmaFastLive,s=n.abrEwmaSlowLive):(a=n.abrEwmaFastVoD,s=n.abrEwmaSlowVoD),this._bwEstimator=new u.default(r,s,a,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,r=this.fragCurrent;if(r){var n=r.loader,o=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var s=n.stats;if(e&&s&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&r.autoLevel&&r.level){var u=c.now()-s.trequest,d=Math.abs(e.playbackRate);if(u>500*r.duration/d){var f=t.levels,h=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/u),p=f[r.level],g=p.realBitrate?Math.max(p.realBitrate,p.bitrate):p.bitrate,y=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*g/8)),v=e.currentTime,m=(y-s.loaded)/h,_=(a.BufferHelper.bufferInfo(e,v,t.config.maxBufferHole).end-v)/d;if(_<2*r.duration/d&&m>_){var b=void 0,T=void 0;for(T=r.level-1;T>o;T--){var E=f[T].realBitrate?Math.max(f[T].realBitrate,f[T].bitrate):f[T].bitrate;if((b=r.duration*E/(6.4*h))<_)break}b<m&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+T+":fragLoadedDelay["+T+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+m.toFixed(1)+":"+_.toFixed(1)),t.nextLoadLevel=T,this._bwEstimator.sample(u,s.loaded),n.abort(),this.clearTimer(),t.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},r.prototype.onFragLoaded=function(e){var r=e.frag;if("main"===r.type&&t.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,o=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:o},n.realBitrate=Math.round(8*i/o)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},r.prototype.onFragBuffered=function(e){var r=e.stats,n=e.frag;if(!0!==r.aborted&&"main"===n.type&&t.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(t){switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this._nextABRAutoLevel;return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var t=this.hls,e=t.maxAutoLevel,r=t.levels,n=t.config,i=t.minAutoLevel,o=t.media,s=this.lastLoadedFragLevel,u=this.fragCurrent?this.fragCurrent.duration:0,c=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(a.BufferHelper.bufferInfo(o,c,n.maxBufferHole).end-c)/d,p=this._findBestLevel(s,u,f,i,e,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(p>=0)return p;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=u?Math.min(u,n.maxStarvationDelay):n.maxStarvationDelay,y=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(0===h){var m=this.bitrateTestDelay;if(m){g=(u?Math.min(u,n.maxLoadingDelay):n.maxLoadingDelay)-m,l.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),y=v=1}}return p=this._findBestLevel(s,u,f,i,e,h+g,y,v,r),Math.max(p,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(t,e,r,n,i,o,a,s,u){for(var c=i;c>=n;c--){var d=u[c];if(d){var f=d.details,h=f?f.totalduration/f.fragments.length:e,p=!!f&&f.live,g=void 0;g=c<=t?a*r:s*r;var y=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,v=y*h/g;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(g)+"/"+y+"/"+h+"/"+o+"/"+v),g>y&&(!v||p&&!this.bitrateTestDelay||v<o))return c}}return-1},r}(o.default);e.default=d}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),o=r("./src/utils/buffer-helper.js"),a=r("./src/demux/demuxer.js"),s=r("./src/events.js"),l=r("./src/controller/level-helper.js"),u=r("./src/utils/time-ranges.js"),c=r("./src/errors.js"),d=r("./src/utils/logger.js"),f=r("./src/utils/discontinuities.js"),h=r("./src/task-loop.js"),p=r("./src/controller/fragment-tracker.js"),g=r("./src/loader/fragment.js"),y=window.performance,v={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},m=function(e){function r(t,r){var n=e.call(this,t,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.AUDIO_TRACKS_UPDATED,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.BUFFER_RESET,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED,s.default.INIT_PTS_FOUND)||this;return n.fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=v.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return n(r,e),r.prototype.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},r.prototype.onHandlerDestroyed=function(){this.state=v.STOPPED,this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},r.prototype.onInitPtsFound=function(t){var e=t.id,r=t.frag.cc,n=t.initPTS;"main"===e&&(this.initPTS[r]=n,this.videoTrackCC=r,d.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===v.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(d.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=v.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=v.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=v.STOPPED},r.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(t){if(this.state!==t){var e=this.state;this._state=t,d.logger.log("audio stream:"+e+"->"+t)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var e,r,n,a=this.hls,l=a.config;switch(this.state){case v.ERROR:case v.PAUSED:case v.BUFFER_FLUSHING:break;case v.STARTING:this.state=v.WAITING_TRACK,this.loadedmetadata=!1;break;case v.IDLE:var u=this.tracks;if(!u)break;if(!this.media&&(this.startFragRequested||!l.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,h=this.videoBuffer?this.videoBuffer:this.media,g=o.BufferHelper.bufferInfo(c,e,l.maxBufferHole),m=o.BufferHelper.bufferInfo(h,e,l.maxBufferHole),_=g.len,b=g.end,T=this.fragPrevious,E=Math.min(l.maxBufferLength,l.maxMaxBufferLength),S=Math.max(E,m.len),w=this.audioSwitch,O=this.trackId;if((_<S||w)&&O<u.length){if(void 0===(n=u[O].details)){this.state=v.WAITING_TRACK;break}if(!w&&!n.live&&T&&T.sn===n.endSN&&!g.nextStart&&(!this.media.seeking||this.media.duration-b<T.duration/2)){this.hls.trigger(s.default.BUFFER_EOS,{type:"audio"}),this.state=v.ENDED;break}var A=n.fragments,j=A.length,k=A[0].start,C=A[j-1].start+A[j-1].duration,R=void 0;if(w)if(n.live&&!n.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),b=0;else if(b=e,n.PTSKnown&&e<k){if(!(g.end>k||g.nextStart))return;d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=k+.05}if(n.initSegment&&!n.initSegment.data)R=n.initSegment;else if(b<=k){if(R=A[0],null!==this.videoTrackCC&&R.cc!==this.videoTrackCC&&(R=f.findFragWithCC(A,this.videoTrackCC)),n.live&&R.loadIdx&&R.loadIdx===this.fragLoadIdx){var x=g.nextStart?g.nextStart:k;return d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(x+.05)),void(this.media.currentTime=x+.05)}}else{var P=void 0,D=l.maxFragLookUpTolerance,L=T?A[T.sn-A[0].sn+1]:void 0,I=function(t){var e=Math.min(D,t.duration);return t.start+t.duration-e<=b?1:t.start-e>b&&t.start?-1:0};b<C?(b>C-D&&(D=0),P=L&&!I(L)?L:i.default.search(A,I)):P=A[j-1],P&&(R=P,k=P.start,T&&R.level===T.level&&R.sn===T.sn&&(R.sn<n.endSN?(R=A[R.sn+1-n.startSN],d.logger.log("SN just loaded, load next one: "+R.sn)):R=null))}R&&(R.encrypted?(d.logger.log("Loading key for "+R.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+O),this.state=v.KEY_LOADING,a.trigger(s.default.KEY_LOADING,{frag:R})):(d.logger.log("Loading "+R.sn+", cc: "+R.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+O+", currentTime:"+e+",bufferEnd:"+b.toFixed(3)),(w||this.fragmentTracker.getState(R)===p.FragmentState.NOT_LOADED)&&(this.fragCurrent=R,this.startFragRequested=!0,t.isFinite(R.sn)&&(this.nextLoadPosition=R.start+R.duration),a.trigger(s.default.FRAG_LOADING,{frag:R}),this.state=v.FRAG_LOADING)))}break;case v.WAITING_TRACK:r=this.tracks[this.trackId],r&&r.details&&(this.state=v.IDLE);break;case v.FRAG_LOADING_WAITING_RETRY:var M=y.now(),F=this.retryDate;c=this.media;var N=c&&c.seeking;(!F||M>=F||N)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=v.IDLE);break;case v.WAITING_INIT_PTS:var B=this.videoTrackCC;if(void 0===this.initPTS[B])break;var U=this.waitingFragment;if(U){var G=U.frag.cc;B!==G?(r=this.tracks[this.trackId],r.details&&r.details.live&&(d.logger.warn("Waiting fragment CC ("+G+") does not match video track CC ("+B+")"),this.waitingFragment=null,this.state=v.IDLE)):(this.state=v.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=v.IDLE;break;case v.STOPPED:case v.FRAG_LOADING:case v.PARSING:case v.PARSED:case v.ENDED:}},r.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeking=function(){this.state===v.ENDED&&(this.state=v.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},r.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.prototype.onAudioTracksUpdated=function(t){d.logger.log("audio tracks updated"),this.tracks=t.audioTracks},r.prototype.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=v.PAUSED,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=v.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(e){var r=e.details,n=e.id,i=this.tracks[n],o=r.totalduration,a=0;if(d.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+o),r.live){var s=i.details;s&&r.fragments.length>0?(l.mergeDetails(s,r),a=r.fragments[0].start,r.PTSKnown?d.logger.log("live audio playlist sliding:"+a.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(i.details=r,!this.startFragRequested){if(-1===this.startPosition){var u=r.startTimeOffset;t.isFinite(u)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===v.WAITING_TRACK&&(this.state=v.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===v.KEY_LOADING&&(this.state=v.IDLE,this.tick())},r.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag;if(this.state===v.FRAG_LOADING&&e&&"audio"===r.type&&r.level===e.level&&r.sn===e.sn){var n=this.tracks[this.trackId],i=n.details,o=i.totalduration,l=e.level,u=e.sn,c=e.cc,f=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",h=this.stats=t.stats;if("initSegment"===u)this.state=v.IDLE,h.tparsed=h.tbuffered=y.now(),i.initSegment.data=t.payload,this.hls.trigger(s.default.FRAG_BUFFERED,{stats:h,frag:e,id:"audio"}),this.tick();else{this.state=v.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new a.default(this.hls,"audio"));var p=this.initPTS[c],g=i.initSegment?i.initSegment.data:[]
;if(i.initSegment||void 0!==p){this.pendingBuffering=!0,d.logger.log("Demuxing "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+l);this.demuxer.push(t.payload,g,f,null,e,o,!1,p)}else d.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+l),this.waitingFragment=t,this.state=v.WAITING_INIT_PTS}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===v.PARSING){var n=t.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(s.default.BUFFER_CODECS,n),d.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,a))}this.tick()}}},r.prototype.onFragParsingData=function(e){var r=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===v.PARSING){var o=this.trackId,a=this.tracks[o],u=this.hls;t.isFinite(e.endPTS)||(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),n.addElementaryStream(g.default.ElementaryStreamTypes.AUDIO),d.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),l.updateFragPTSDTS(a.details,n,e.startPTS,e.endPTS);var f=this.audioSwitch,h=this.media,p=!1;if(f&&h)if(h.readyState){var y=h.currentTime;d.logger.log("switching audio track : currentTime:"+y),y>=e.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=v.BUFFER_FLUSHING,u.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:t.POSITIVE_INFINITY,type:"audio"}),p=!0,this.audioSwitch=!1,u.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,u.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:o});var m=this.pendingData;if(!m)return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void u.trigger(s.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&m.push({type:e.type,data:t,parent:"audio",content:"data"})}),!p&&m.length&&(m.forEach(function(t){r.state===v.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(s.default.BUFFER_APPENDING,t))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(t){var e=this.fragCurrent,r=t.frag;e&&"audio"===t.id&&r.sn===e.sn&&r.level===e.level&&this.state===v.PARSING&&(this.stats.tparsed=y.now(),this.state=v.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},r.prototype.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==v.PARSING&&e!==v.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==v.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,r=this.hls;if(t){this.fragPrevious=t,e.tbuffered=y.now(),r.trigger(s.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("audio buffered : "+u.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=v.IDLE}this.tick()}},r.prototype.onError=function(e){var r=e.frag;if(!r||"audio"===r.type)switch(e.details){case c.ErrorDetails.FRAG_LOAD_ERROR:case c.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=e.frag;if(n&&"audio"!==n.type)break;if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry){this.fragLoadError=i;var l=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+l+" ms"),this.retryDate=y.now()+l,this.state=v.FRAG_LOADING_WAITING_RETRY}else d.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=v.ERROR}break;case c.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case c.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case c.ErrorDetails.KEY_LOAD_ERROR:case c.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==v.ERROR&&(this.state=e.fatal?v.ERROR:v.IDLE,d.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case c.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===v.PARSING||this.state===v.PARSED)){var u=this.mediaBuffer,f=this.media.currentTime;if(u&&o.BufferHelper.isBuffered(u,f)&&o.BufferHelper.isBuffered(u,f+.5)){var a=this.config;a.maxMaxBufferLength>=a.maxBufferLength&&(a.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+a.maxMaxBufferLength+"s")),this.state=v.IDLE}else d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=v.BUFFER_FLUSHING,this.hls.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:t.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach(function(e){t.hls.trigger(s.default.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=v.PARSED):(this.state=v.IDLE,this.fragPrevious=null,this.tick())},r}(h.default);e.default=m}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/task-loop.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=function(t){function e(e){var r=t.call(this,e,i.default.MANIFEST_LOADING,i.default.MANIFEST_PARSED,i.default.AUDIO_TRACK_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.LEVEL_LOADED,i.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return n(e,t),e.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},e.prototype.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(i.default.AUDIO_TRACKS_UPDATED,{audioTracks:e})},e.prototype.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)return void a.logger.warn("Invalid audio track id:",t.id);if(a.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()},e.prototype.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},e.prototype.onLevelLoaded=function(t){var e=this.hls.levels[t.level];if(e.audioGroupIds){var r=e.audioGroupIds[e.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},e.prototype.onError=function(t){t.type===s.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(a.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},Object.defineProperty(e.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioTrack",{get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),e.prototype._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)return void a.logger.debug("Same id as current audio-track passed, and track details available -> no-op");if(t<0||t>=this.tracks.length)return void a.logger.warn("Invalid id passed to audio-track controller");var e=this.tracks[t];a.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var r=e.url,n=e.type,o=e.id;this.hls.trigger(i.default.AUDIO_TRACK_SWITCHING,{id:o,type:n,url:r}),this._loadTrackDetailsIfNeeded(e)},e.prototype.doTick=function(){this._updateTrack(this._trackId)},e.prototype._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var o=e.filter(function(t){return t.default});o.length?e=o:a.logger.warn("No default audio tracks defined")}var l=!1,u=function(){e.forEach(function(e){l||t.audioGroupId&&e.groupId!==t.audioGroupId||n&&n!==e.name||(t._setAudioTrack(e.id),l=!0)})};u(),l||(n=null,u()),l||(a.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},e.prototype._needsTrackLoading=function(t){var e=t.details,r=t.url;return!(e&&!e.live)&&!!r},e.prototype._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,r=t.id;a.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(i.default.AUDIO_TRACK_LOADING,{url:e,id:r})}},e.prototype._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,a.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},e.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],r=e.name,n=e.language,i=e.groupId;a.logger.warn("Loading failed on audio track id: "+t+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var o=t,s=0;s<this.tracks.length;s++)if(!this.trackIdBlacklist[s]){var l=this.tracks[s];if(l.name===r){o=s;break}}if(o===t)return void a.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"');a.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)},e}(o.default);e.default=l},"./src/controller/buffer-controller.js":function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js"),u=l.getMediaSource(),c=function(e){function r(t){var r=e.call(this,t,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._live=null,r._objectUrl=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return n(r,e),r.prototype.destroy=function(){o.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(t){var e=t.type,r=this.tracks.audio;if("audio"===e&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-t.start)>.1){var i=n.updating;try{n.abort()}catch(t){a.logger.warn("can not abort audio buffer: "+t)}i?this.audioTimestampOffset=t.start:(a.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+t.start),n.timestampOffset=t.start)}}},r.prototype.onManifestParsed=function(t){var e=t.audio,r=t.video||t.levels.length&&t.altAudio,n=0;t.altAudio&&(e||r)&&(n=(e?1:0)+(r?1:0),a.logger.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},r.prototype.onMediaAttaching=function(t){var e=this.media=t.media;if(e){var r=this.mediaSource=new u;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),e.src=window.URL.createObjectURL(r),this._objectUrl=e.src}},r.prototype.onMediaDetaching=function(){a.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){a.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):a.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){a.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var t=this.mediaSource;t&&t.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var t=this.pendingTracks,e=Object.keys(t).length;e&&(this.sourceBufferNb<=e||0===this.sourceBufferNb)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){a.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){a.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var t=this.sourceBuffer.audio;a.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var e=this.parent,r=this.segments.reduce(function(t,r){return r.parent===e?t+1:t},0),n={},o=this.sourceBuffer;for(var s in o)n[s]=o[s].buffered;this.hls.trigger(i.default.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},r.prototype.onSBUpdateError=function(t){a.logger.error("sourceBuffer error:",t),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var r=t[e];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(t){if(0===Object.keys(this.sourceBuffer).length){for(var e in t)this.pendingTracks[e]=t[e];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;for(var n in t)if(!e[n]){var o=t[n],l=o.levelCodec||o.codec,u=o.container+";codecs="+l;a.logger.log("creating sourceBuffer("+u+")");try{var c=e[n]=r.addSourceBuffer(u);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:l,container:o.container},o.buffer=c}catch(t){a.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:u})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:t})},r.prototype.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},r.prototype.onBufferAppendFail=function(t){a.logger.error("sourceBuffer error:",t.event),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(t){var e=this.sourceBuffer,r=t.type;for(var n in e)r&&n!==r||e[n].ended||(e[n].ended=!0,a.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(!e||"open"!==e.readyState)return void(this._needsEos=!1);for(var r in t){var n=t[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}a.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){a.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},r.prototype.onBufferFlushing=function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.onLevelUpdated=function(t){var e=t.details;e.fragments.length>0&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._live=e.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var e,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(a.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!t.isFinite(e))&&(a.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,r=this.sourceBuffer;try{for(var n in r)e+=r[n].buffered.length}catch(t){a.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(i.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,r=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void a.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var n=r.shift();try{var o=n.type,l=e[o];l?l.updating?r.unshift(n):(l.ended=!1,this.parent=n.parent,l.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){a.logger.error("error while trying to append buffer:"+e.message),r.unshift(n);var u={type:s.ErrorTypes.MEDIA_ERROR,parent:n.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,u.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(a.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],u.fatal=!0,t.trigger(i.default.ERROR,u)):(u.fatal=!1,t.trigger(i.default.ERROR,u))):(this.segments=[],u.details=s.ErrorDetails.BUFFER_FULL_ERROR,u.fatal=!1,t.trigger(i.default.ERROR,u))}}}},r.prototype.flushBuffer=function(e,r,n){var i,o,s,l,u,c,d=this.sourceBuffer;if(Object.keys(d).length){if(a.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+r),this.flushBufferCounter<this.appended){for(var f in d)if(!n||f===n){if(i=d[f],i.ended=!1,i.updating)return a.logger.warn("cannot flush, sb updating in progress"),!1;try{for(o=0;o<i.buffered.length;o++)if(s=i.buffered.start(o),l=i.buffered.end(o),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&r===t.POSITIVE_INFINITY?(u=e,c=r):(u=Math.max(s,e),c=Math.min(l,r)),Math.min(c,l)-u>.5)return this.flushBufferCounter++,a.logger.log("flush "+f+" ["+u+","+c+"], of ["+s+","+l+"], pos:"+this.media.currentTime),i.remove(u,c),!1}catch(t){a.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else a.logger.warn("abort flushing too many retries");a.logger.log("buffer flushed")}return!0},r}(o.default);e.default=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=function(e){function r(r){var n=e.call(this,r,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_CODECS,i.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=t.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return n(r,e),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(t){r.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},r.prototype.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},r.prototype.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&(t.video||t.levels.length&&t.altAudio)&&this._startCapping()},r.prototype.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(t){this.levels=t.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},r.prototype.getMaxLevel=function(t){var e=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return r.isLevelAllowed(i,e.restrictedLevels)&&i<=t});return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=t.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=t.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var t,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsetWidth,t*=r.contentScaleFactor),t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var t,e=this.media;return e&&(t=e.height||e.clientHeight||e.offsetHeight,t*=r.contentScaleFactor),t},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},r.getMaxLevelByMediaSize=function(t,e,r){if(!t||t&&!t.length)return-1;for(var n=t.length-1,i=0;i<t.length;i+=1){var o=t[i];if((o.width>=e||o.height>=r)&&function(t,e){return!e||(t.width!==e.width||t.height!==e.height)}(o,t[i+1])){n=i;break}}return n},r}(o.default);e.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=window.XMLHttpRequest,u={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},c=function(t,e,r){var n={videoCapabilities:[]};return e.forEach(function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})}),[n]},d=function(t,e,r){switch(t){case u.WIDEVINE:return c(0,r);default:throw Error("Unknown key-system: "+t)}},f=function(t){function e(e){var r=t.call(this,e,o.default.MEDIA_ATTACHED,o.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=e.config.widevineLicenseUrl,r._licenseXhrSetup=e.config.licenseXhrSetup,r._emeEnabled=e.config.emeEnabled,r._requestMediaKeySystemAccess=e.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return n(e,t),e.prototype.getLicenseServerUrl=function(t){var e;switch(t){case u.WIDEVINE:e=this._widevineLicenseUrl;break;default:e=null}return e||(s.logger.error('No license server URL configured for key-system "'+t+'"'),this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),e},e.prototype._attemptKeySystemAccess=function(t,e,r){var n=this,i=d(t,0,r);if(!i)return void s.logger.warn("Can not create config for key-system (maybe because platform is not supported):",t);s.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,i).then(function(e){n._onMediaKeySystemAccessObtained(t,e)}).catch(function(e){s.logger.error('Failed to obtain key-system "'+t+'" access:',e)})},Object.defineProperty(e.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),e.prototype._onMediaKeySystemAccessObtained=function(t,e){var r=this;s.logger.log('Access for key-system "'+t+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(n),e.createMediaKeys().then(function(e){n.mediaKeys=e,s.logger.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated()}).catch(function(t){s.logger.error("Failed to create media-keys:",t)})},e.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},e.prototype._onNewMediaKeySession=function(t){var e=this;s.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",function(r){e._onKeySessionMessage(t,r.message)},!1)},e.prototype._onKeySessionMessage=function(t,e){s.logger.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){s.logger.log("Received license data, updating key-session"),t.update(e)})},e.prototype._onMediaEncrypted=function(t,e){s.logger.log('Media is encrypted using "'+t+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=t,this._mediaEncryptionInitData=e,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},e.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});s.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},e.prototype._generateRequestWithPreferredKeySession=function(){var t=this,e=this._mediaKeysList[0];if(!e)return s.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)return void s.logger.warn("Key-Session already initialized but requested again");var r=e.mediaKeysSession;r||(s.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;s.logger.log('Generating key-session request for "'+n+'" init data type'),e.mediaKeysSessionInitialized=!0,r.generateRequest(n,i).then(function(){s.logger.debug("Key-session generation succeeded")}).catch(function(e){s.logger.error("Error generating key-session request:",e),t.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},e.prototype._createLicenseXhr=function(t,e,r){var n=new l,i=this._licenseXhrSetup;try{if(i)try{i(n,t)}catch(e){n.open("POST",t,!0),i(n,t)}n.readyState||n.open("POST",t,!0)}catch(t){return s.logger.error("Error setting up key-system license XHR",t),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,t,e,r),n},e.prototype._onLicenseRequestReadyStageChange=function(t,e,r,n){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,s.logger.log("License request succeeded"),n(t.response);else{if(s.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),++this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return s.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(r,n)}this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},e.prototype._generateLicenseRequestChallenge=function(t,e){var r;return t.mediaKeySystemDomain===u.PLAYREADY?s.logger.error("PlayReady is not supported (yet)"):t.mediaKeySystemDomain===u.WIDEVINE?r=e:s.logger.error("Unsupported key-system:",t.mediaKeySystemDomain),r},e.prototype._requestLicense=function(t,e){s.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return s.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0})
;var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,t,e);s.logger.log("Sending license request to URL: "+n),i.send(this._generateLicenseRequestChallenge(r,t))},e.prototype.onMediaAttached=function(t){var e=this;if(this._emeEnabled){var r=t.media;this._media=r,r.addEventListener("encrypted",function(t){e._onMediaEncrypted(t.initDataType,t.initData)})}},e.prototype.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map(function(t){return t.audioCodec}),r=t.levels.map(function(t){return t.videoCodec});this._attemptKeySystemAccess(u.WIDEVINE,e,r)}},e}(i.default);e.default=f},"./src/controller/fps-controller.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=window.performance,l=function(t){function e(e){return t.call(this,e,i.default.MEDIA_ATTACHING)||this}return n(e,t),e.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},e.prototype.onMediaAttaching=function(t){var e=this.hls.config;if(e.capLevelOnFPSDrop){"function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod)}},e.prototype.checkFPS=function(t,e,r){var n=s.now();if(e){if(this.lastTime){var o=n-this.lastTime,l=r-this.lastDroppedFrames,u=e-this.lastDecodedFrames,c=1e3*l/o,d=this.hls;if(d.trigger(i.default.FPS_DROP,{currentDropped:l,currentDecoded:u,totalDroppedFrames:r}),c>0&&l>d.config.fpsDroppedMonitoringThreshold*u){var f=d.currentLevel;a.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=f)&&(f-=1,d.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:d.currentLevel}),d.autoLevelCapping=f,d.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.prototype.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(o.default);e.default=l},"./src/controller/fragment-finders.js":function(t,e,r){"use strict";(function(t){function n(e,r,n){if(!Array.isArray(e)||!e.length||!t.isFinite(r))return null;if(r<e[0].programDateTime)return null;if(r>=e[e.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<e.length;++i){var o=e[i];if(a(r,n,o))return o}return null}function i(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=t?e[t.sn-e[0].sn+1]:null;return i&&!o(r,n,i)?i:s.default.search(e,o.bind(null,r,n))}function o(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var n=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=t?1:r.start-n>t&&r.start?-1:0}function a(t,e,r){var n=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>t}Object.defineProperty(e,"__esModule",{value:!0});var s=r("./src/utils/binary-search.js");e.findFragmentByPDT=n,e.findFragmentByPTS=i,e.fragmentWithinToleranceTest=o,e.pdtWithinToleranceTest=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=r("./src/events.js");e.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var a=function(r){function a(t){var e=r.call(this,t,o.default.BUFFER_APPENDED,o.default.FRAG_BUFFERED,o.default.FRAG_LOADED)||this;return e.bufferPadding=.2,e.fragments=Object.create(null),e.timeRanges=Object.create(null),e.config=t.config,e}return n(a,r),a.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,i.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},a.prototype.getBufferedFrag=function(t,e){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==e)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=t&&t<=o.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},a.prototype.detectEvictedFragments=function(t,e){var r,n,i=this;Object.keys(this.fragments).forEach(function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[t];if(s){r=s.time;for(var l=0;l<r.length;l++)if(n=r[l],!1===i.isTimeBuffered(n.startPTS,n.endPTS,e)){i.removeFragment(a.body);break}}}})},a.prototype.detectPartialFragments=function(t){var e=this,r=this.getFragmentKey(t),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(t.hasElementaryStream(r)){var i=e.timeRanges[r];n.range[r]=e.getBufferedTimes(t.startPTS,t.endPTS,i)}}))},a.prototype.getBufferedTimes=function(t,e,r){for(var n,i,o=[],a=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,t>=n&&e<=i){o.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))});break}if(t<i&&e>n)o.push({startPTS:Math.max(t,r.start(s)),endPTS:Math.min(e,r.end(s))}),a=!0;else if(e<=n)break}return{time:o,partial:a}},a.prototype.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},a.prototype.getPartialFragment=function(t){var e,r,n,i=this,o=null,a=0;return Object.keys(this.fragments).forEach(function(s){var l=i.fragments[s];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,t>=r&&t<=n&&(e=Math.min(t-r,n-t),a<=e&&(o=l.body,a=e)))}),o},a.prototype.getState=function(t){var r=this.getFragmentKey(t),n=this.fragments[r],i=e.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?e.FragmentState.PARTIAL:e.FragmentState.OK:e.FragmentState.APPENDING),i},a.prototype.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},a.prototype.isTimeBuffered=function(t,e,r){for(var n,i,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,t>=n&&e<=i)return!0;if(e<=n)return!1}return!1},a.prototype.onFragLoaded=function(e){var r=e.frag;t.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},a.prototype.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach(function(t){var r=e.timeRanges[t];e.detectEvictedFragments(t,r)})},a.prototype.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},a.prototype.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},a.prototype.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},a.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},a}(i.default);e.FragmentTracker=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/buffer-helper.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a=r("./src/utils/logger.js"),s=function(){function t(t,e,r,n){this.config=t,this.media=e,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return t.prototype.poll=function(t,e){var r=this,i=r.config,o=r.media,s=o.currentTime,l=window.performance.now();if(s!==t)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+s+", after "+Math.round(l-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(o.ended||!o.buffered.length||o.readyState>2||o.seeking&&n.BufferHelper.isBuffered(o,s))){var u=l-this.stalled,c=n.BufferHelper.bufferInfo(o,s,i.maxBufferHole);if(!this.stalled)return void(this.stalled=l);u>=1e3&&this._reportStall(c.len),this._tryFixBufferStall(c,u)}},t.prototype._tryFixBufferStall=function(t,e){var r=this,n=r.config,i=r.fragmentTracker,o=r.media,a=o.currentTime,s=i.getPartialFragment(a);s&&this._trySkipBufferHole(s),t.len>.5&&e>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},t.prototype._reportStall=function(t){var e=this,r=e.hls,n=e.media;e.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},t.prototype._trySkipBufferHole=function(t){for(var e=this,r=e.hls,n=e.media,s=n.currentTime,l=0,u=0;u<n.buffered.length;u++){var c=n.buffered.start(u);if(s>=l&&s<c)return n.currentTime=Math.max(c,n.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+s+" to "+n.currentTime),this.stalled=null,void r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+s+" to "+n.currentTime,frag:t});l=n.buffered.end(u)}},t.prototype._tryNudgeBuffer=function(){var t=this,e=t.config,r=t.hls,n=t.media,s=n.currentTime,l=(this.nudgeRetry||0)+1;if(this.nudgeRetry=l,l<e.nudgeMaxRetry){var u=s+l*e.nudgeOffset;a.logger.log("adjust currentTime from "+s+" to "+u),n.currentTime=u,r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+s+" after "+e.nudgeMaxRetry+", raise fatal error"),r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}();e.default=s},"./src/controller/id3-track-controller.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/demux/id3.js"),s=r("./src/utils/texttrack-utils.js"),l=function(t){function e(e){var r=t.call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return n(e,t),e.prototype.destroy=function(){o.default.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){this.media=t.media,this.media},e.prototype.onMediaDetaching=function(){s.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},e.prototype.getID3Track=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return s.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},e.prototype.onFragParsingMetadata=function(t){var e=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=a.default.getID3Frames(r[i].data);if(o){var s=r[i].pts,l=i<r.length-1?r[i+1].pts:e.endPTS;s===l&&(l+=1e-4);for(var u=0;u<o.length;u++){var c=o[u];if(!a.default.isTimeStampFrame(c)){var d=new n(s,l,"");d.value=c,this.id3Track.addCue(d)}}}}},e}(o.default);e.default=l},"./src/controller/level-controller.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=r("./src/utils/codecs.js"),u=r("./src/controller/level-helper.js"),c=window.performance,d=function(t){function e(e){var r=t.call(this,e,i.default.MANIFEST_LOADED,i.default.LEVEL_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.FRAG_LOADED,i.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,r}return n(e,t),e.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},e.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},e.prototype.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach(function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},e.prototype.stopLoad=function(){this.canload=!1},e.prototype.onManifestLoaded=function(t){var e,r=[],n={},o=null,c=!1,d=!1,f=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=[];if(t.levels.forEach(function(t){t.loadError=0,t.fragmentError=!1,c=c||!!t.videoCodec,d=d||!!t.audioCodec||!(!t.attrs||!t.attrs.AUDIO),f&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),o=n[t.bitrate],o?o.url.push(t.url):(t.url=[t.url],t.urlId=0,n[t.bitrate]=t,r.push(t)),t.attrs&&t.attrs.AUDIO&&u.addGroupId(o||t,"audio",t.attrs.AUDIO),t.attrs&&t.attrs.SUBTITLES&&u.addGroupId(o||t,"text",t.attrs.SUBTITLES)}),c&&d&&(r=r.filter(function(t){return!!t.videoCodec})),r=r.filter(function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||l.isCodecSupportedInMp4(e))&&(!r||l.isCodecSupportedInMp4(r))}),t.audioTracks&&(h=t.audioTracks.filter(function(t){return!t.audioCodec||l.isCodecSupportedInMp4(t.audioCodec,"audio")}),h.forEach(function(t,e){t.id=e})),r.length>0){e=r[0].bitrate,r.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=r;for(var p=0;p<r.length;p++)if(r[p].bitrate===e){this._firstLevel=p,a.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+e);break}this.hls.trigger(i.default.MANIFEST_PARSED,{levels:r,audioTracks:h,firstLevel:this._firstLevel,stats:t.stats,audio:d,video:c,altAudio:h.length>0&&c})}else this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))},enumerable:!0,configurable:!0}),e.prototype.setLevelInternal=function(t){var e=this._levels,r=this.hls;if(t>=0&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){a.logger.log("switching to level "+t),this.currentLevelIndex=t;var n=e[t];n.level=t,r.trigger(i.default.LEVEL_SWITCHING,n)}var o=e[t],l=o.details;if(!l||l.live){var u=o.urlId;r.trigger(i.default.LEVEL_LOADING,{url:o.url[u],level:t,id:u})}}else r.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(e.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(t){this._firstLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t},enumerable:!0,configurable:!0}),e.prototype.onError=function(t){if(t.fatal)return void(t.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer());var e,r=!1,n=!1;switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,n=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,r=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,r=!0}void 0!==e&&this.recoverLevel(t,e,r,n)},e.prototype.recoverLevel=function(t,e,r,n){var i,o,s,l=this,u=this.hls.config,c=t.details,d=this._levels[e];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return a.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return l.loadLevel()},o),t.levelRetry=!0,this.levelRetryCount++,a.logger.warn("level controller, "+c+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&(i=d.url.length,i>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,a.logger.warn("level controller, "+c+" for level "+e+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(s=0===e?this._levels.length-1:e-1,a.logger.warn("level controller, "+c+": switch to "+s),this.hls.nextAutoLevel=this.currentLevelIndex=s):n&&(a.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},e.prototype.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var r=this._levels[e.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},e.prototype.onLevelLoaded=function(t){var e=this,r=t.level;if(r===this.currentLevelIndex){var n=this._levels[r];n.fragmentError||(n.loadError=0,this.levelRetryCount=0);var i=t.details;if(i.live){var o=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),s=o,l=n.details;l&&i.endSN===l.endSN&&(s/=2,a.logger.log("same live playlist, reload twice faster")),s-=c.now()-t.stats.trequest,s=Math.max(o/2,Math.round(s)),a.logger.log("live playlist, reload in "+Math.round(s)+" ms"),this.timer=setTimeout(function(){return e.loadLevel()},s)}else this.clearTimer()}},e.prototype.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){var n=r.audioGroupIds.findIndex(function(t){return t===e});n!==r.urlId&&(r.urlId=n,this.startLoad())}},e.prototype.loadLevel=function(){if(a.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var e=this.currentLevelIndex,r=t.urlId,n=t.url[r];a.logger.log("Attempt loading level index "+e+" with URL-id "+r),this.hls.trigger(i.default.LEVEL_LOADING,{url:n,level:e,id:r})}}},Object.defineProperty(e.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)},enumerable:!0,configurable:!0}),e}(o.default);e.default=d},"./src/controller/level-helper.js":function(t,e,r){"use strict";(function(t){function n(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function i(e,r,n){var i=e[r],o=e[n],a=o.startPTS;t.isFinite(a)?n>r?(i.duration=a-i.start,i.duration<0&&s.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(o.duration=i.start-a,o.duration<0&&s.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):o.start=n>r?i.start+i.duration:Math.max(i.start-o.duration,0)}function o(e,r,n,o,a,s){var l=n;if(t.isFinite(r.startPTS)){var u=Math.abs(r.startPTS-n);t.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(u,r.deltaPTS):r.deltaPTS=u,l=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),o=Math.max(o,r.endPTS),a=Math.min(a,r.startDTS),s=Math.max(s,r.endDTS)}var c=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=l,r.endPTS=o,r.startDTS=a,r.endDTS=s,r.duration=o-n;var d=r.sn;if(!e||d<e.startSN||d>e.endSN)return 0;var f,h,p;for(f=d-e.startSN,h=e.fragments,h[f]=r,p=f;p>0;p--)i(h,p,p-1);for(p=f;p<h.length-1;p++)i(h,p,p+1);return e.PTSKnown=!0,c}function a(e,r){var n,i=Math.max(e.startSN,r.startSN)-r.startSN,a=Math.min(e.endSN,r.endSN)-r.startSN,l=r.startSN-e.startSN,u=e.fragments,c=r.fragments,d=0;if(r.initSegment&&e.initSegment&&(r.initSegment=e.initSegment),a<i)return void(r.PTSKnown=!1);for(var f=i;f<=a;f++){var h=u[l+f],p=c[f];p&&h&&(d=h.cc-p.cc,t.isFinite(h.startPTS)&&(p.start=p.startPTS=h.startPTS,p.endPTS=h.endPTS,p.duration=h.duration,p.backtracked=h.backtracked,p.dropped=h.dropped,n=p))}if(d)for(s.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<c.length;f++)c[f].cc+=d;if(n)o(r,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(l>=0&&l<u.length){var g=u[l].start;for(f=0;f<c.length;f++)c[f].start+=g}r.PTSKnown=e.PTSKnown}Object.defineProperty(e,"__esModule",{value:!0});var s=r("./src/utils/logger.js");e.addGroupId=n,e.updatePTS=i,e.updateFragPTSDTS=o,e.mergeDetails=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),o=r("./src/utils/buffer-helper.js"),a=r("./src/demux/demuxer.js"),s=r("./src/events.js"),l=r("./src/controller/fragment-tracker.js"),u=r("./src/loader/fragment.js"),c=r("./src/loader/playlist-loader.js"),d=r("./src/controller/level-helper.js"),f=r("./src/utils/time-ranges.js"),h=r("./src/errors.js"),p=r("./src/utils/logger.js"),g=r("./src/utils/discontinuities.js"),y=r("./src/task-loop.js"),v=r("./src/controller/fragment-finders.js"),m=r("./src/controller/gap-controller.js");e.State={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"};var _=function(r){function y(t,n){var i=r.call(this,t,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED)||this;return i.fragmentTracker=n,i.config=t.config,i.audioCodecSwap=!1,i._state=e.State.STOPPED,i.stallReported=!1,i.gapController=null,i}return n(y,r),y.prototype.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},y.prototype.onHandlerDestroyed=function(){this.state=e.State.STOPPED,this.fragmentTracker=null,r.prototype.onHandlerDestroyed.call(this)},y.prototype.startLoad=function(t){if(this.levels){var r=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}r>0&&-1===t&&(p.logger.log("override startPosition with lastCurrentTime @"+r.toFixed(3)),t=r),this.state=e.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=e.State.STOPPED},y.prototype.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=e.State.STOPPED,this.forceStartLoad=!1},y.prototype.doTick=function(){switch(this.state){case e.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case e.State.IDLE:this._doTickIdle();break;case e.State.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=e.State.IDLE);break;case e.State.FRAG_LOADING_WAITING_RETRY:var r=window.performance.now(),n=this.retryDate;(!n||r>=n||this.media&&this.media.seeking)&&(p.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=e.State.IDLE);break;case e.State.ERROR:case e.State.STOPPED:case e.State.FRAG_LOADING:case e.State.PARSING:case e.State.PARSED:case e.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},y.prototype._doTickIdle=function(){var t=this.hls,r=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&r.startFragPrefetch)){var i;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var a=t.nextLoadLevel,l=this.levels[a];if(l){var u,c=l.bitrate;u=c?Math.max(8*r.maxBufferSize/c,r.maxBufferLength):r.maxBufferLength,u=Math.min(u,r.maxMaxBufferLength);var d=o.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,r.maxBufferHole),f=d.len;if(!(f>=u)){p.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+u.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=a;var h=l.details;if(!h||h.live&&this.levelLastLoaded!==a)return void(this.state=e.State.WAITING_LEVEL);var g=this.fragPrevious;if(!h.live&&g&&!g.backtracked&&g.sn===h.endSN&&!d.nextStart){if(Math.min(n.duration,g.start+g.duration)-Math.max(d.end,g.start)<=Math.max(.2,g.duration)){var y={};return this.altAudio&&(y.type="video"),this.hls.trigger(s.default.BUFFER_EOS,y),void(this.state=e.State.ENDED)}}this._fetchPayloadOrEos(i,d,h)}}}},y.prototype._fetchPayloadOrEos=function(t,e,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s,l=o[0].start,u=o[a-1].start+o[a-1].duration,c=e.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void p.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(r,c,l,u,n,o,a)))return}else c<l&&(s=o[0]);s||(s=this._findFragment(l,n,a,o,c,u,r)),s&&(s.encrypted?(p.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(p.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+t.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},y.prototype._ensureFragmentAtLivePoint=function(t,e,r,n,o,a,s){var l,u=this.hls.config,c=this.media,d=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(r-u.maxFragLookUpTolerance,n-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,t);p.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),e=f,c&&c.readyState&&c.duration>f&&(c.currentTime=f),this.nextLoadPosition=f}if(t.PTSKnown&&e>n&&c&&c.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(o)if(t.hasProgramDateTime)p.logger.log("live playlist, switching playlist, load frag with same PDT: "+o.programDateTime),l=v.findFragmentByPDT(a,o.endProgramDateTime,u.maxFragLookUpTolerance);else{var h=o.sn+1;if(h>=t.startSN&&h<=t.endSN){var g=a[h-t.startSN];o.cc===g.cc&&(l=g,p.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=i.default.search(a,function(t){return o.cc-t.cc}))&&p.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(s-1,Math.round(s/2))],p.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},y.prototype._findFragment=function(t,e,r,n,i,o,a){var s,l=this.hls.config;if(i<o){var u=i>o-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=v.findFragmentByPTS(e,n,i,u)}else s=n[r-1];if(s){var c=s.sn-a.startSN,d=e&&s.level===e.level,f=n[c-1],h=n[c+1];if(e&&s.sn===e.sn)if(d&&!s.backtracked)if(s.sn<a.endSN){var g=e.deltaPTS;g&&g>l.maxBufferHole&&e.dropped&&c?(s=f,p.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=h,p.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(h&&h.backtracked?(p.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(p.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f,s.backtracked=!0):c&&(s=null)))}return s},y.prototype._loadKey=function(t){this.state=e.State.KEY_LOADING,this.hls.trigger(s.default.KEY_LOADING,{frag:t})},y.prototype._loadFragment=function(r){var n=this.fragmentTracker.getState(r);this.fragCurrent=r,this.startFragRequested=!0,t.isFinite(r.sn)&&!r.bitrateTest&&(this.nextLoadPosition=r.start+r.duration),r.backtracked||n===l.FragmentState.NOT_LOADED||n===l.FragmentState.PARTIAL?(r.autoLevel=this.hls.autoLevelEnabled,r.bitrateTest=this.bitrateTest,this.hls.trigger(s.default.FRAG_LOADING,{frag:r}),this.demuxer||(this.demuxer=new a.default(this.hls,"main")),this.state=e.State.FRAG_LOADING):n===l.FragmentState.APPENDING&&this._reduceMaxBufferLength(r.duration)&&this.fragmentTracker.removeFragment(r)},Object.defineProperty(y.prototype,"state",{get:function(){return this._state},set:function(t){if(this.state!==t){var e=this.state;this._state=t,p.logger.log("main stream:"+e+"->"+t),this.hls.trigger(s.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},enumerable:!0,configurable:!0}),y.prototype.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,c.default.LevelType.MAIN)},Object.defineProperty(y.prototype,"currentLevel",{get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"nextBufferedFrag",{get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null},enumerable:!0,configurable:!0}),y.prototype.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},Object.defineProperty(y.prototype,"nextLevel",{get:function(){var t=this.nextBufferedFrag;return t?t.level:-1},enumerable:!0,configurable:!0}),y.prototype._checkFragmentChanged=function(){var t,e,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(e=r.currentTime,e>this.lastCurrentTime&&(this.lastCurrentTime=e),o.BufferHelper.isBuffered(r,e)?t=this.getBufferedFrag(e):o.BufferHelper.isBuffered(r,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(s.default.FRAG_CHANGED,{frag:n});var i=n.level
;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(s.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},y.prototype.immediateLevelSwitch=function(){if(p.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,r=void 0;e?(r=e.paused,e.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,t.POSITIVE_INFINITY)},y.prototype.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,o.BufferHelper.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},y.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var r=void 0,n=void 0,i=void 0;if(n=this.getBufferedFrag(e.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)r=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(e.currentTime+r))&&(i=this.followingBufferedFrag(i))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,t.POSITIVE_INFINITY)}}},y.prototype.flushMainBuffer=function(t,r){this.state=e.State.BUFFER_FLUSHING;var n={startOffset:t,endOffset:r};this.altAudio&&(n.type="video"),this.hls.trigger(s.default.BUFFER_FLUSHING,n)},y.prototype.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new m.default(r,e,this.fragmentTracker,this.hls)},y.prototype.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(p.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach(function(t){t.details&&t.details.fragments.forEach(function(t){t.backtracked=void 0})}),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},y.prototype.onMediaSeeking=function(){var r=this.media,n=r?r.currentTime:void 0,i=this.config;t.isFinite(n)&&p.logger.log("media seeking to "+n.toFixed(3));var a=this.mediaBuffer?this.mediaBuffer:r,s=o.BufferHelper.bufferInfo(a,n,this.config.maxBufferHole);if(this.state===e.State.FRAG_LOADING){var l=this.fragCurrent;if(0===s.len&&l){var u=i.maxFragLookUpTolerance,c=l.start-u,d=l.start+l.duration+u;n<c||n>d?(l.loader&&(p.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),l.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=e.State.IDLE):p.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===e.State.ENDED&&(0===s.len&&(this.fragPrevious=0),this.state=e.State.IDLE);r&&(this.lastCurrentTime=n),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=n),this.tick()},y.prototype.onMediaSeeked=function(){var e=this.media,r=e?e.currentTime:void 0;t.isFinite(r)&&p.logger.log("media seeked to "+r.toFixed(3)),this.tick()},y.prototype.onMediaEnded=function(){p.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0},y.prototype.onManifestLoading=function(){p.logger.log("trigger BUFFER_RESET"),this.hls.trigger(s.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},y.prototype.onManifestParsed=function(t){var e,r=!1,n=!1;t.levels.forEach(function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(r=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&p.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},y.prototype.onLevelLoaded=function(r){var n=r.details,i=r.level,o=this.levels[this.levelLastLoaded],a=this.levels[i],l=n.totalduration,u=0;if(p.logger.log("level "+i+" loaded ["+n.startSN+","+n.endSN+"],duration:"+l),n.live){var c=a.details;c&&n.fragments.length>0?(d.mergeDetails(c,n),u=n.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(u,c),n.PTSKnown&&t.isFinite(u)?p.logger.log("live playlist sliding:"+u.toFixed(3)):(p.logger.log("live playlist - outdated PTS, unknown sliding"),g.alignStream(this.fragPrevious,o,n))):(p.logger.log("live playlist - first load, unknown sliding"),n.PTSKnown=!1,g.alignStream(this.fragPrevious,o,n))}else n.PTSKnown=!1;if(a.details=n,this.levelLastLoaded=i,this.hls.trigger(s.default.LEVEL_UPDATED,{details:n,level:i}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var f=n.startTimeOffset;t.isFinite(f)?(f<0&&(p.logger.log("negative start time offset "+f+", count from end of last fragment"),f=u+l+f),p.logger.log("start time offset found in playlist, adjust startPosition to "+f),this.startPosition=f):n.live?(this.startPosition=this.computeLivePosition(u,n),p.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===e.State.WAITING_LEVEL&&(this.state=e.State.IDLE),this.tick()},y.prototype.onKeyLoaded=function(){this.state===e.State.KEY_LOADING&&(this.state=e.State.IDLE,this.tick())},y.prototype.onFragLoaded=function(t){var r=this,n=r.fragCurrent,i=r.hls,o=r.levels,l=r.media,u=t.frag;if(this.state===e.State.FRAG_LOADING&&n&&"main"===u.type&&u.level===n.level&&u.sn===n.sn){var c=t.stats,d=o[n.level],f=d.details;if(this.bitrateTest=!1,this.stats=c,p.logger.log("Loaded "+n.sn+" of ["+f.startSN+" ,"+f.endSN+"],level "+n.level),u.bitrateTest&&i.nextLoadLevel)this.state=e.State.IDLE,this.startFragRequested=!1,c.tparsed=c.tbuffered=window.performance.now(),i.trigger(s.default.FRAG_BUFFERED,{stats:c,frag:n,id:"main"}),this.tick();else if("initSegment"===u.sn)this.state=e.State.IDLE,c.tparsed=c.tbuffered=window.performance.now(),f.initSegment.data=t.payload,i.trigger(s.default.FRAG_BUFFERED,{stats:c,frag:n,id:"main"}),this.tick();else{p.logger.log("Parsing "+n.sn+" of ["+f.startSN+" ,"+f.endSN+"],level "+n.level+", cc "+n.cc),this.state=e.State.PARSING,this.pendingBuffering=!0,this.appended=!1,u.bitrateTest&&(u.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:u}));var h=!(l&&l.seeking)&&(f.PTSKnown||!f.live),g=f.initSegment?f.initSegment.data:[],y=this._getAudioCodec(d),v=this.demuxer=this.demuxer||new a.default(this.hls,"main");v.push(t.payload,g,y,d.videoCodec,n,f.totalduration,h)}}this.fragLoadError=0},y.prototype.onFragParsingInitSegment=function(t){var r=this.fragCurrent,n=t.frag;if(r&&"main"===t.id&&n.sn===r.sn&&n.level===r.level&&this.state===e.State.PARSING){var i=t.tracks,o=void 0,a=void 0;if(i.audio&&this.altAudio&&delete i.audio,a=i.audio){var l=this.levels[this.level].audioCodec,u=navigator.userAgent.toLowerCase();l&&this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===u.indexOf("firefox")&&(l="mp4a.40.5"),-1!==u.indexOf("android")&&"audio/mpeg"!==a.container&&(l="mp4a.40.2",p.logger.log("Android: force audio codec to "+l)),a.levelCodec=l,a.id=t.id}a=i.video,a&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=t.id),this.hls.trigger(s.default.BUFFER_CODECS,i);for(o in i){a=i[o],p.logger.log("main track:"+o+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var c=a.initSegment;c&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,{type:o,data:c,parent:"main",content:"initSegment"}))}this.tick()}},y.prototype.onFragParsingData=function(r){var n=this,i=this.fragCurrent,o=r.frag;if(i&&"main"===r.id&&o.sn===i.sn&&o.level===i.level&&("audio"!==r.type||!this.altAudio)&&this.state===e.State.PARSING){var a=this.levels[this.level],l=i;if(t.isFinite(r.endPTS)||(r.endPTS=r.startPTS+i.duration,r.endDTS=r.startDTS+i.duration),!0===r.hasAudio&&l.addElementaryStream(u.default.ElementaryStreamTypes.AUDIO),!0===r.hasVideo&&l.addElementaryStream(u.default.ElementaryStreamTypes.VIDEO),p.logger.log("Parsed "+r.type+",PTS:["+r.startPTS.toFixed(3)+","+r.endPTS.toFixed(3)+"],DTS:["+r.startDTS.toFixed(3)+"/"+r.endDTS.toFixed(3)+"],nb:"+r.nb+",dropped:"+(r.dropped||0)),"video"===r.type)if(l.dropped=r.dropped,l.dropped)if(l.backtracked)p.logger.warn("Already backtracked on this fragment, appending with the gap",l.sn);else{var c=a.details;if(!c||l.sn!==c.startSN)return p.logger.warn("missing video frame(s), backtracking fragment",l.sn),this.fragmentTracker.removeFragment(l),l.backtracked=!0,this.nextLoadPosition=r.startPTS,this.state=e.State.IDLE,this.fragPrevious=l,void this.tick();p.logger.warn("missing video frame(s) on first frag, appending with gap",l.sn)}else l.backtracked=!1;var f=d.updateFragPTSDTS(a.details,l,r.startPTS,r.endPTS,r.startDTS,r.endDTS),h=this.hls;h.trigger(s.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:f,type:r.type,start:r.startPTS,end:r.endPTS}),[r.data1,r.data2].forEach(function(t){t&&t.length&&n.state===e.State.PARSING&&(n.appended=!0,n.pendingBuffering=!0,h.trigger(s.default.BUFFER_APPENDING,{type:r.type,data:t,parent:"main",content:"data"}))}),this.tick()}},y.prototype.onFragParsed=function(t){var r=this.fragCurrent,n=t.frag;r&&"main"===t.id&&n.sn===r.sn&&n.level===r.level&&this.state===e.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=e.State.PARSED,this._checkAppendedParsed())},y.prototype.onAudioTrackSwitching=function(r){var n=!!r.url,i=r.id;if(!n){if(this.mediaBuffer!==this.media){p.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var o=this.fragCurrent;o.loader&&(p.logger.log("switching to main audio track, cancel main fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=e.State.IDLE}var a=this.hls;a.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:t.POSITIVE_INFINITY,type:"audio"}),a.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:i}),this.altAudio=!1}},y.prototype.onAudioTrackSwitched=function(t){var e=t.id,r=!!this.hls.audioTracks[e].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(p.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},y.prototype.onBufferCreated=function(t){var e,r,n=t.tracks,i=!1;for(var o in n){var a=n[o];"main"===a.id?(r=o,e=a,"video"===o&&(this.videoBuffer=n[o].buffer)):i=!0}i&&e?(p.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},y.prototype.onBufferAppended=function(t){if("main"===t.parent){var r=this.state;r!==e.State.PARSING&&r!==e.State.PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},y.prototype._checkAppendedParsed=function(){if(!(this.state!==e.State.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var r=this.mediaBuffer?this.mediaBuffer:this.media;p.logger.log("main buffered : "+f.default.toString(r.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=e.State.IDLE}this.tick()}},y.prototype.onError=function(r){var n=r.frag||this.fragCurrent;if(!n||"main"===n.type){var i=!!this.media&&o.BufferHelper.isBuffered(this.media,this.media.currentTime)&&o.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(r.details){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:if(!r.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var a=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);p.logger.warn("mediaController: frag loading failed, retry in "+a+" ms"),this.retryDate=window.performance.now()+a,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=e.State.FRAG_LOADING_WAITING_RETRY}else p.logger.error("mediaController: "+r.details+" reaches max retry, redispatch as fatal ..."),r.fatal=!0,this.state=e.State.ERROR;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==e.State.ERROR&&(r.fatal?(this.state=e.State.ERROR,p.logger.warn("streamController: "+r.details+",switch to "+this.state+" state ...")):r.levelRetry||this.state!==e.State.WAITING_LEVEL||(this.state=e.State.IDLE));break;case h.ErrorDetails.BUFFER_FULL_ERROR:"main"!==r.parent||this.state!==e.State.PARSING&&this.state!==e.State.PARSED||(i?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=e.State.IDLE):(p.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,t.POSITIVE_INFINITY)))}}},y.prototype._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,p.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},y.prototype._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=this.mediaBuffer?this.mediaBuffer:t,r=e.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},y.prototype.onFragLoadEmergencyAborted=function(){this.state=e.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},y.prototype.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(u.default.ElementaryStreamTypes.VIDEO,t.buffered),this.state=e.State.IDLE,this.fragPrevious=null},y.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},y.prototype.computeLivePosition=function(t,e){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-r)},y.prototype._seekToStartPos=function(){var t=this.media,e=t.currentTime,r=t.seeking?e:this.startPosition;e!==r&&(p.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+e+" "),t.currentTime=r)},y.prototype._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(p.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},Object.defineProperty(y.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t},enumerable:!0,configurable:!0}),y}(y.default);e.default=_}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/utils/logger.js"),a=r("./src/crypt/decrypter.js"),s=r("./src/task-loop.js"),l=window.performance,u={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},c=function(t){function e(e){var r=t.call(this,e,i.default.MEDIA_ATTACHED,i.default.ERROR,i.default.KEY_LOADED,i.default.FRAG_LOADED,i.default.SUBTITLE_TRACKS_UPDATED,i.default.SUBTITLE_TRACK_SWITCH,i.default.SUBTITLE_TRACK_LOADED,i.default.SUBTITLE_FRAG_PROCESSED)||this;return r.config=e.config,r.vttFragSNsProcessed={},r.vttFragQueues=void 0,r.currentlyProcessing=null,r.state=u.STOPPED,r.currentTrackId=-1,r.decrypter=new a.default(e,e.config),r}return n(e,t),e.prototype.onHandlerDestroyed=function(){this.state=u.STOPPED},e.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},e.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=t,this.hls.trigger(i.default.FRAG_LOADING,{frag:t}),this.state=u.FRAG_LOADING}},e.prototype.onSubtitleFragProcessed=function(t){t.success&&this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn),this.currentlyProcessing=null,this.state=u.IDLE,this.nextFrag()},e.prototype.onMediaAttached=function(){this.state=u.IDLE},e.prototype.onError=function(t){var e=t.frag;e&&"subtitle"!==e.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},e.prototype.doTick=function(){var t=this;switch(this.state){case u.IDLE:var e=this.tracks,r=this.currentTrackId,n=this.vttFragSNsProcessed[r],a=this.vttFragQueues[r],s=this.currentlyProcessing?this.currentlyProcessing.sn:-1,l=function(t){return n.indexOf(t.sn)>-1},c=function(t){return a.some(function(e){return e.sn===t.sn})};if(!e)break;var d;if(r<e.length&&(d=e[r].details),void 0===d)break;d.fragments.forEach(function(e){l(e)||e.sn===s||c(e)||(e.encrypted?(o.logger.log("Loading key for "+e.sn),t.state=u.KEY_LOADING,t.hls.trigger(i.default.KEY_LOADING,{frag:e})):(e.trackId=r,a.push(e),t.nextFrag()))})}},e.prototype.onSubtitleTracksUpdated=function(t){var e=this;o.logger.log("subtitle tracks updated"),this.tracks=t.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(t){e.vttFragSNsProcessed[t.id]=[]})},e.prototype.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.tick()}},e.prototype.onSubtitleTrackLoaded=function(){this.tick()},e.prototype.onKeyLoaded=function(){this.state===u.KEY_LOADING&&(this.state=u.IDLE,this.tick())},e.prototype.onFragLoaded=function(t){var e=this.fragCurrent,r=t.frag.decryptdata,n=t.frag,o=this.hls;if(this.state===u.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&t.payload.byteLength>0&&null!=r&&null!=r.key&&"AES-128"===r.method){var a;try{a=l.now()}catch(t){a=Date.now()}this.decrypter.decrypt(t.payload,r.key.buffer,r.iv.buffer,function(t){var e;try{e=l.now()}catch(t){e=Date.now()}o.trigger(i.default.FRAG_DECRYPTED,{frag:n,payload:t,stats:{tstart:a,tdecrypt:e}})})}},e}(s.default);e.default=c},"./src/controller/subtitle-track-controller.js":function(t,e,r){"use strict";function n(t){for(var e=[],r=0;r<t.length;r++)"subtitles"===t[r].kind&&e.push(t[r]);return e}var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),l=function(t){function e(e){var r=t.call(this,e,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.subtitleDisplay=!0,r}return i(e,t),e.prototype._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=n(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack=t}},e.prototype.destroy=function(){a.default.prototype.destroy.call(this)},e.prototype.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){e.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},e.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},e.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},e.prototype.onManifestLoaded=function(t){var e=this,r=t.subtitles||[];this.tracks=r,this.trackId=-1,this.hls.trigger(o.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},e.prototype.onTick=function(){var t=this.trackId,e=this.tracks[t];if(e){var r=e.details;r&&!r.live||(s.logger.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))}},e.prototype.onSubtitleTrackLoaded=function(t){var e=this;t.id<this.tracks.length&&(s.logger.log("subtitle track "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.timer&&(this.timer=setInterval(function(){e.onTick()},1e3*t.details.targetduration,this)),!t.details.live&&this.timer&&this._stopTimer())},Object.defineProperty(e.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this.setSubtitleTrackInternal(t))},enumerable:!0,configurable:!0}),e.prototype.setSubtitleTrackInternal=function(t){var e=this,r=e.hls,n=e.tracks;if(!("number"!=typeof t||t<-1||t>=n.length)&&(this._stopTimer(),this.trackId=t,s.logger.log("switching to subtitle track "+t),r.trigger(o.default.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t)){var i=n[t],a=i.details;a&&!a.live||(s.logger.log("(re)loading playlist for subtitle track "+t),r.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))}},e.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},e.prototype._toggleTrackModes=function(t){var e=this,r=e.media,i=e.subtitleDisplay,o=e.trackId;if(r){var a=n(r.textTracks);if(-1===t)[].slice.call(a).forEach(function(t){t.mode="disabled"});else{var s=a[o];s&&(s.mode="disabled")}var l=a[t];l&&(l.mode=i?"showing":"hidden")}},e}(a.default);e.default=l},"./src/controller/timeline-controller.js":function(t,e,r){"use strict";function n(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function i(t,e,r,n){return Math.min(e,n)-Math.max(t,r)}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var a=r("./src/events.js"),s=r("./src/event-handler.js"),l=r("./src/utils/cea-608-parser.js"),u=r("./src/utils/output-filter.js"),c=r("./src/utils/webvtt-parser.js"),d=r("./src/utils/logger.js"),f=r("./src/utils/texttrack-utils.js"),h=function(t){function e(e){var r=t.call(this,e,a.default.MEDIA_ATTACHING,a.default.MEDIA_DETACHING,a.default.FRAG_PARSING_USERDATA,a.default.FRAG_DECRYPTED,a.default.MANIFEST_LOADING,a.default.MANIFEST_LOADED,a.default.FRAG_LOADED,a.default.LEVEL_SWITCHING,a.default.INIT_PTS_FOUND)||this;if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=void 0,r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new u.default(r,"textTrack1"),i=new u.default(r,"textTrack2");r.cea608Parser=new l.default(0,n,i)}return r}return o(e,t),e.prototype.addCues=function(t,e,r,n){for(var o=this.cueRanges,a=!1,s=o.length;s--;){var l=o[s],u=i(l[0],l[1],e,r);if(u>=0&&(l[0]=Math.min(l[0],e),l[1]=Math.max(l[1],r),a=!0,u/(r-e)>.5))return}a||o.push([e,r]),this.Cues.newCue(this.captionsTracks[t],e,r,n)},e.prototype.onInitPtsFound=function(t){var e=this;void 0===this.initPTS&&(this.initPTS=t.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(t){e.onFragLoaded(t)}),this.unparsedVttFrags=[])},e.prototype.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var n=e.textTracks[r];if(n[t])return n}return null},e.prototype.createCaptionsTrack=function(t){var e=this.captionsProperties[t],r=e.label,n=e.languageCode,i=this.captionsTracks;if(!i[t]){var o=this.getExistingTrack(t);if(o)i[t]=o,f.clearCurrentCues(i[t]),f.sendAddTrackEvent(i[t],this.media);else{var a=this.createTextTrack("captions",r,n);a&&(a[t]=!0,i[t]=a)}}},e.prototype.createTextTrack=function(t,e,r){var n=this.media;if(n)return n.addTextTrack(t,e,r)},e.prototype.destroy=function(){s.default.prototype.destroy.call(this)},e.prototype.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},e.prototype.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach(function(e){f.clearCurrentCues(t[e]),delete t[e]})},e.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},e.prototype._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)f.clearCurrentCues(e[r])}},e.prototype.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(t,i){var o;if(i<r.length){var a=Object.values(r).find(function(e){return n(e,t)});a&&(o=a)}o||(o=e.createTextTrack("subtitles",t.name,t.lang)),t.default?o.mode=e.hls.subtitleDisplay?"showing":"hidden":o.mode="disabled",e.textTracks.push(o)})}},e.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},e.prototype.onFragLoaded=function(t){var e=t.frag,r=t.payload;if("main"===e.type){var n=e.sn;if(n!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=n}else if("subtitle"===e.type)if(r.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);var o=e.decryptdata;null!=o&&null!=o.key&&"AES-128"===o.method||this._parseVTTs(e,r)}else this.hls.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},e.prototype._parseVTTs=function(t,e){var r=this.vttCCs;r[t.cc]||(r[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var n=this.textTracks,i=this.hls;c.default.parse(e,this.initPTS,r,t.cc,function(e){var r=n[t.trackId];if("disabled"===r.mode)return void i.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t});e.forEach(function(t){if(!r.cues.getCueById(t.id))try{r.addCue(t)}catch(n){var e=new window.TextTrackCue(t.startTime,t.endTime,t.text);e.id=t.id,r.addCue(e)}}),i.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){d.logger.log("Failed to parse VTT cue: "+e),i.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},e.prototype.onFragDecrypted=function(t){var e=t.payload,r=t.frag;if("subtitle"===r.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(t);this._parseVTTs(r,e)}},e.prototype.onFragParsingUserdata=function(t){if(this.enabled&&this.config.enableCEA708Captions)for(var e=0;e<t.samples.length;e++){var r=this.extractCea608Data(t.samples[e].bytes);this.cea608Parser.addData(t.samples[e].pts,r)}},e.prototype.extractCea608Data=function(t){for(var e,r,n,i,o,a=31&t[0],s=2,l=[],u=0;u<a;u++)e=t[s++],r=127&t[s++],n=127&t[s++],i=0!=(4&e),o=3&e,0===r&&0===n||i&&0===o&&(l.push(r),l.push(n));return l},e}(s.default);e.default=h},"./src/crypt/aes-crypto.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}();e.default=n},"./src/crypt/aes-decryptor.js":function(t,e,r){"use strict";function n(t){var e=t.byteLength,r=e&&new DataView(t).getUint8(e-1);return r?t.slice(0,e-r):t}Object.defineProperty(e,"__esModule",{value:!0}),e.removePadding=n;var i=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return t.prototype.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),n=0;n<4;n++)r[n]=e.getUint32(4*n);return r},t.prototype.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,t[h]=y,e[y]=h;var v=f[h],m=f[v],_=f[m],b=257*f[y]^16843008*y;n[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,o[h]=b<<8|b>>>24,a[h]=b,b=16843009*_^65537*m^257*v^16843008*h,l[y]=b<<24|b>>>8,u[y]=b<<16|b>>>16,c[y]=b<<8|b>>>24,d[y]=b,h?(h=v^f[f[f[_^v]]],p^=f[f[p]]):h=p=1}},t.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,n=0;n<e.length&&r;)r=e[n]===this.key[n],n++;if(!r){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),f=this.sBox,h=this.rcon,p=this.invSubMix,g=p[0],y=p[1],v=p[2],m=p[3];for(o=0;o<u;o++)o<i?s=c[o]=e[o]:(l=s,o%i==0?(l=l<<8|l>>>24,l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=h[o/i|0]<<24):i>6&&o%i==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),c[o]=s=(c[o-i]^l)>>>0);for(a=0;a<u;a++)o=u-a,l=3&a?c[o]:c[o-4],d[a]=a<4||o<=4?l:g[f[l>>>24]]^y[f[l>>>16&255]]^v[f[l>>>8&255]]^m[f[255&l]],d[a]=d[a]>>>0}},t.prototype.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.prototype.decrypt=function(t,e,r,i){for(var o,a,s,l,u,c,d,f,h,p,g,y,v,m,_=this.keySize+6,b=this.invKeySchedule,T=this.invSBox,E=this.invSubMix,S=E[0],w=E[1],O=E[2],A=E[3],j=this.uint8ArrayToUint32Array_(r),k=j[0],C=j[1],R=j[2],x=j[3],P=new Int32Array(t),D=new Int32Array(P.length),L=this.networkToHostOrderSwap;e<P.length;){for(h=L(P[e]),p=L(P[e+1]),g=L(P[e+2]),y=L(P[e+3]),u=h^b[0],c=y^b[1],d=g^b[2],f=p^b[3],v=4,m=1;m<_;m++)o=S[u>>>24]^w[c>>16&255]^O[d>>8&255]^A[255&f]^b[v],a=S[c>>>24]^w[d>>16&255]^O[f>>8&255]^A[255&u]^b[v+1],
s=S[d>>>24]^w[f>>16&255]^O[u>>8&255]^A[255&c]^b[v+2],l=S[f>>>24]^w[u>>16&255]^O[c>>8&255]^A[255&d]^b[v+3],u=o,c=a,d=s,f=l,v+=4;o=T[u>>>24]<<24^T[c>>16&255]<<16^T[d>>8&255]<<8^T[255&f]^b[v],a=T[c>>>24]<<24^T[d>>16&255]<<16^T[f>>8&255]<<8^T[255&u]^b[v+1],s=T[d>>>24]<<24^T[f>>16&255]<<16^T[u>>8&255]<<8^T[255&c]^b[v+2],l=T[f>>>24]<<24^T[u>>16&255]<<16^T[c>>8&255]<<8^T[255&d]^b[v+3],v+=3,D[e]=L(o^k),D[e+1]=L(l^C),D[e+2]=L(s^R),D[e+3]=L(a^x),k=h,C=p,R=g,x=y,e+=4}return i?n(D.buffer):D.buffer},t.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}();e.default=i},"./src/crypt/decrypter.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/crypt/aes-crypto.js"),i=r("./src/crypt/fast-aes-key.js"),o=r("./src/crypt/aes-decryptor.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=r("./src/events.js"),u=r("./src/utils/get-self-scope.js"),c=u.getSelfScope(),d=function(){function t(t,e,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=i,i)try{var o=c.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}return t.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.prototype.decrypt=function(t,e,r,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new o.default),u.expandKey(e),a(u.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new i.default(c,e)),this.fastAesKey.expandKey().then(function(i){new n.default(c,r).decrypt(t,i).catch(function(n){l.onWebCryptoError(n,t,e,r,a)}).then(function(t){a(t)})}).catch(function(n){l.onWebCryptoError(n,t,e,r,a)})}},t.prototype.onWebCryptoError=function(t,e,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,r,n,i)):(s.logger.error("decrypting error : "+t.message),this.observer.trigger(l.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.prototype.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=d},"./src/crypt/fast-aes-key.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}();e.default=n},"./src/demux/aacdemuxer.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/id3.js"),a=function(){function e(t,e,r){this.observer=t,this.config=r,this.remuxer=e}return e.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(t){if(!t)return!1;for(var e=o.default.getID3Data(t,0)||[],r=e.length,a=t.length;r<a;r++)if(n.probe(t,r))return i.logger.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,r,a,s){for(var l=this._audioTrack,u=o.default.getID3Data(e,0)||[],c=o.default.getTimeStamp(u),d=t.isFinite(c)?90*c:9e4*r,f=0,h=d,p=e.length,g=u.length,y=[{pts:h,dts:h,data:u}];g<p-1;)if(n.isHeader(e,g)&&g+5<p){n.initTrackConfig(l,this.observer,e,g,l.manifestCodec);var v=n.appendFrame(l,e,g,d,f);if(!v){i.logger.log("Unable to parse AAC frame");break}g+=v.length,h=v.sample.pts,f++}else o.default.isHeader(e,g)?(u=o.default.getID3Data(e,g),y.push({pts:h,dts:h,data:u}),g+=u.length):g++;this.remuxer.remux(l,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},r,a,s)},e.prototype.destroy=function(){},e}();e.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(t,e,r){"use strict";function n(t,e,r,n){var i,o,a,s,l,u=navigator.userAgent.toLowerCase(),c=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=1+((192&e[r+2])>>>6),(o=(60&e[r+2])>>>2)>d.length-1?void t.trigger(g.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,h.logger.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+o+"["+d[o]+"Hz],channelConfig:"+s),/firefox/i.test(u)?o>=6?(i=5,l=new Array(4),a=o-3):(i=2,l=new Array(2),a=o):-1!==u.indexOf("android")?(i=2,l=new Array(2),a=o):(i=5,l=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&o>=6?a=o-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(o>=6&&1===s||/vivaldi/i.test(u))||!n&&1===s)&&(i=2,l=new Array(2)),a=o)),l[0]=i<<3,l[0]|=(14&o)>>1,l[1]|=(1&o)<<7,l[1]|=s<<3,5===i&&(l[1]|=(14&a)>>1,l[2]=(1&a)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:d[o],channelCount:s,codec:"mp4a.40."+i,manifestCodec:c})}function i(t,e){return 255===t[e]&&240==(246&t[e+1])}function o(t,e){return 1&t[e+1]?7:9}function a(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function s(t,e){return!!(e+1<t.length&&i(t,e))}function l(t,e){if(e+1<t.length&&i(t,e)){var r=o(t,e),n=r;e+5<t.length&&(n=a(t,e));var s=e+n;if(s===t.length||s+1<t.length&&i(t,s))return!0}return!1}function u(t,e,r,i,o){if(!t.samplerate){var a=n(e,r,i,o);t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,h.logger.log("parsed codec:"+t.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function c(t){return 9216e4/t}function d(t,e,r,n,i){var s,l,u,c=t.length;if(s=o(t,e),l=a(t,e),(l-=s)>0&&e+s+l<=c)return u=r+n*i,{headerLength:s,frameLength:l,stamp:u}}function f(t,e,r,n,i){var o=c(t.samplerate),a=d(e,r,n,i,o);if(a){var s=a.stamp,l=a.headerLength,u=a.frameLength,f={unit:e.subarray(r+l,r+l+u),pts:s,dts:s};return t.samples.push(f),t.len+=u,{sample:f,length:u+l}}}Object.defineProperty(e,"__esModule",{value:!0});var h=r("./src/utils/logger.js"),p=r("./src/errors.js"),g=r("./src/events.js");e.getAudioConfig=n,e.isHeaderPattern=i,e.getHeaderLength=o,e.getFullFrameLength=a,e.isHeader=s,e.probe=l,e.initTrackConfig=u,e.getFrameDuration=c,e.parseFrameHeader=d,e.appendFrame=f},"./src/demux/demuxer-inline.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=r("./src/events.js"),o=r("./src/errors.js"),a=r("./src/crypt/decrypter.js"),s=r("./src/demux/aacdemuxer.js"),l=r("./src/demux/mp4demuxer.js"),u=r("./src/demux/tsdemuxer.js"),c=r("./src/demux/mp3demuxer.js"),d=r("./src/remux/mp4-remuxer.js"),f=r("./src/remux/passthrough-remuxer.js"),h=r("./src/utils/get-self-scope.js"),p=r("./src/utils/logger.js"),g=h.getSelfScope();try{n=g.performance.now.bind(g.performance)}catch(t){p.logger.debug("Unable to use Performance API on this environment"),n=g.Date.now}var y=function(){function t(t,e,r,n){this.observer=t,this.typeSupported=e,this.config=r,this.vendor=n}return t.prototype.destroy=function(){var t=this.demuxer;t&&t.destroy()},t.prototype.push=function(t,e,r,o,s,l,u,c,d,f,h,p){var g=this;if(t.byteLength>0&&null!=e&&null!=e.key&&"AES-128"===e.method){var y=this.decrypter;null==y&&(y=this.decrypter=new a.default(this.observer,this.config));var v=n();y.decrypt(t,e.key.buffer,e.iv.buffer,function(t){var a=n();g.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),o,s,l,u,c,d,f,h,p)})}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(r),o,s,l,u,c,d,f,h,p)},t.prototype.pushDecrypted=function(t,e,r,n,a,h,p,g,y,v,m,_){var b=this.demuxer;if(!b||(p||g)&&!this.probe(t)){for(var T=this.observer,E=this.typeSupported,S=this.config,w=[{demux:u.default,remux:d.default},{demux:l.default,remux:f.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],O=0,A=w.length;O<A;O++){var j=w[O],k=j.demux.probe;if(k(t)){var C=this.remuxer=new j.remux(T,S,E,this.vendor);b=new j.demux(T,C,S,E),this.probe=k;break}}if(!b)return void T.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=b}var R=this.remuxer;(p||g)&&(b.resetInitSegment(r,n,a,v),R.resetInitSegment()),p&&(b.resetTimeStamp(_),R.resetTimeStamp(_)),"function"==typeof b.setDecryptData&&b.setDecryptData(e),b.append(t,h,y,m)},t}();e.default=y},"./src/demux/demuxer-worker.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/demux/demuxer-inline.js"),i=r("./src/events.js"),o=r("./src/utils/logger.js"),a=r("./node_modules/events/events.js"),s=function(t){var e=new a.EventEmitter;e.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.removeListener.apply(e,[t].concat(r))};var r=function(e,r){t.postMessage({event:e,data:r})};t.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.demuxer=new n.default(e,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),r("init",null);break;case"demux":t.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),e.on(i.default.FRAG_DECRYPTED,r),e.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),e.on(i.default.FRAG_PARSED,r),e.on(i.default.ERROR,r),e.on(i.default.FRAG_PARSING_METADATA,r),e.on(i.default.FRAG_PARSING_USERDATA,r),e.on(i.default.INIT_PTS_FOUND,r),e.on(i.default.FRAG_PARSING_DATA,function(e,r){var n=[],i={event:e,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),t.postMessage(i,n)})};e.default=s},"./src/demux/demuxer.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r("./node_modules/webworkify-webpack/index.js"),i=r("./src/events.js"),o=r("./src/demux/demuxer-inline.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js"),u=r("./src/utils/get-self-scope.js"),c=r("./src/observer.js"),d=u.getSelfScope(),f=l.getMediaSource(),h=function(){function e(t,e){var r=this;this.hls=t,this.id=e;var l=this.observer=new c.Observer,u=t.config,h=function(e,n){n=n||{},n.frag=r.frag,n.id=r.id,t.trigger(e,n)};l.on(i.default.FRAG_DECRYPTED,h),l.on(i.default.FRAG_PARSING_INIT_SEGMENT,h),l.on(i.default.FRAG_PARSING_DATA,h),l.on(i.default.FRAG_PARSED,h),l.on(i.default.ERROR,h),l.on(i.default.FRAG_PARSING_METADATA,h),l.on(i.default.FRAG_PARSING_USERDATA,h),l.on(i.default.INIT_PTS_FOUND,h);var p={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(u.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var y=void 0;try{y=this.w=n("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),y.addEventListener("message",this.onwmsg),y.onerror=function(e){t.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},y.postMessage({cmd:"init",typeSupported:p,vendor:g,id:e,config:JSON.stringify(u)})}catch(t){a.logger.warn("Error in worker:",t),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),y&&d.URL.revokeObjectURL(y.objectURL),this.demuxer=new o.default(l,p,u,g),this.w=void 0}}else this.demuxer=new o.default(l,p,u,g)}return e.prototype.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,r,n,i,o,s,l,u){var c=this.w,d=t.isFinite(o.startDTS)?o.startDTS:o.start,f=o.decryptdata,h=this.frag,p=!(h&&o.cc===h.cc),g=!(h&&o.level===h.level),y=h&&o.sn===h.sn+1,v=!g&&y;if(p&&a.logger.log(this.id+":discontinuity detected"),g&&a.logger.log(this.id+":switch detected"),this.frag=o,c)c.postMessage({cmd:"demux",data:e,decryptdata:f,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:p,trackSwitch:g,contiguous:v,duration:s,accurateTimeOffset:l,defaultInitPTS:u},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,f,r,n,i,d,p,g,v,s,l,u)}},e.prototype.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":d.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},e}();e.default=h}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return t.prototype.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,n=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");n.set(t.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.prototype.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.prototype.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0&&this.bitsAvailable?r<<e|this.readBits(e):r},t.prototype.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},t.prototype.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},t.prototype.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.prototype.readBoolean=function(){return 1===this.readBits(1)},t.prototype.readUByte=function(){return this.readBits(8)},t.prototype.readUShort=function(){return this.readBits(16)},t.prototype.readUInt=function(){return this.readBits(32)},t.prototype.skipScalingList=function(t){var e,r,n=8,i=8;for(e=0;e<t;e++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},t.prototype.readSPS=function(){var t,e,r,n,i,o,a,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),y=this.skipEG.bind(this),v=this.skipUEG.bind(this),m=this.skipScalingList.bind(this);if(d(),t=d(),f(5),g(3),d(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var _=h();if(3===_&&g(1),v(),v(),g(1),p())for(o=3!==_?8:12,a=0;a<o;a++)p()&&m(a<6?16:64)}v();var b=h();if(0===b)h();else if(1===b)for(g(1),y(),y(),e=h(),a=0;a<e;a++)y();v(),g(1),r=h(),n=h(),i=f(1),0===i&&g(1),g(1),p()&&(s=h(),l=h(),u=h(),c=h());var T=[1,1];if(p()&&p()){switch(d()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[d()<<8|d(),d()<<8|d()]}}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(u+c),pixelRatio:T}},t.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}();e.default=i},"./src/demux/id3.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,r){for(var n=r,i=0;t.isHeader(e,r);){i+=10;i+=t._readSize(e,r+6),t.isFooter(e,r+10)&&(i+=10),r+=i}if(i>0)return e.subarray(n,n+i)},t._readSize=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},t.getTimeStamp=function(e){for(var r=t.getID3Frames(e),n=0;n<r.length;n++){var i=r[n];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var r=String.fromCharCode(e[0],e[1],e[2],e[3]),n=t._readSize(e,4);return{type:r,size:n,data:e.subarray(10,10+n)}},t.getID3Frames=function(e){for(var r=0,n=[];t.isHeader(e,r);){var i=t._readSize(e,r+6);r+=10;for(var o=r+i;r+8<o;){var a=t._getFrameData(e.subarray(r)),s=t._decodeFrame(a);s&&n.push(s),r+=a.size+10}t.isFooter(e,r)&&(r+=10)}return n},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var r=t._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(r.length+1));return{key:e.type,info:r,data:n.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var o=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:o}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var r=1,n=t._utf8ArrayToStr(e.data.subarray(r));r+=n.length+1;var i=t._utf8ArrayToStr(e.data.subarray(r));return{key:e.type,info:n,data:i}}var o=t._utf8ArrayToStr(e.data);return{key:e.type,data:o}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);for(var r,n,i,o=t.length,a="",s=0;s<o;){if(0===(r=t[s++])&&e)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:n=t[s++],a+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=t[s++],i=t[s++],a+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return a},t}(),i=n._utf8ArrayToStr;e.utf8ArrayToStr=i,e.default=n},"./src/demux/mp3demuxer.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/demux/id3.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/mpegaudio.js"),a=function(){function t(t,e,r){this.observer=t,this.config=r,this.remuxer=e}return t.prototype.resetInitSegment=function(t,e,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(t){var e,r,a=n.default.getID3Data(t,0);if(a&&void 0!==n.default.getTimeStamp(a))for(e=a.length,r=Math.min(t.length-1,e+100);e<r;e++)if(o.default.probe(t,e))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},t.prototype.append=function(t,e,r,i){for(var a=n.default.getID3Data(t,0),s=n.default.getTimeStamp(a),l=s?90*s:9e4*e,u=a.length,c=t.length,d=0,f=0,h=this._audioTrack,p=[{pts:l,dts:l,data:a}];u<c;)if(o.default.isHeader(t,u)){var g=o.default.appendFrame(h,t,u,l,d);if(!g)break;u+=g.length,f=g.sample.pts,d++}else n.default.isHeader(t,u)?(a=n.default.getID3Data(t,u),p.push({pts:f,dts:f,data:a}),u+=a.length):u++;this.remuxer.remux(h,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},e,r,i)},t.prototype.destroy=function(){},t}();e.default=a},"./src/demux/mp4demuxer.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/events.js"),o=Math.pow(2,32)-1,a=function(){function t(t,e){this.observer=t,this.remuxer=e}return t.prototype.resetTimeStamp=function(t){this.initPTS=t},t.prototype.resetInitSegment=function(e,r,n,o){if(e&&e.byteLength){var a=this.initData=t.parseInitSegment(e);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:o?e:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:o?e:null}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:o?e:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},t.probe=function(e){return t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r},t.writeUint32=function(t,e,r){t.data&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.findBox=function(e,r){var n,i,o,a,s,l,u,c=[];if(e.data?(l=e.start,a=e.end,e=e.data):(l=0,a=e.byteLength),!r.length)return null;for(n=l;n<a;)i=t.readUint32(e,n),o=t.bin2str(e.subarray(n+4,n+8)),u=i>1?n+i:a,o===r[0]&&(1===r.length?c.push({data:e,start:n+8,end:u}):(s=t.findBox({data:e,start:n+8,end:u},r.slice(1)),s.length&&(c=c.concat(s)))),n=u;return c},t.parseSegmentIndex=function(e){var r,n=t.findBox(e,["moov"])[0],i=n?n.end:null,o=0,a=t.findBox(e,["sidx"]);if(!a||!a[0])return null;r=[],a=a[0];var s=a.data[0];o=0===s?8:16;var l=t.readUint32(a,o);o+=4;o+=0===s?8:16,o+=2;var u=a.end+0,c=t.readUint16(a,o);o+=2;for(var d=0;d<c;d++){var f=o,h=t.readUint32(a,f);f+=4;var p=2147483647&h;if(1===(2147483648&h)>>>31)return;var g=t.readUint32(a,f);f+=4,r.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,f+=4,o=f}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:r,moovEndOffset:i}},t.parseInitSegment=function(e){var r=[];return t.findBox(e,["moov","trak"]).forEach(function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=t.readUint32(i,a),l=t.findBox(e,["mdia","mdhd"])[0];if(l){o=l.data[l.start],a=0===o?12:20;var u=t.readUint32(l,a),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var d=t.bin2str(c.data.subarray(c.start+8,c.start+12)),f={soun:"audio",vide:"video"}[d];if(f){var h=t.findBox(e,["mdia","minf","stbl","stsd"]);if(h.length){h=h[0];var p=t.bin2str(h.data.subarray(h.start+12,h.start+16));n.logger.log("MP4Demuxer:"+f+":"+p+" found")}r[s]={timescale:u,type:f},r[f]={timescale:u,id:s}}}}}}),r},t.getStartDTS=function(e,r){var n,i,o;return n=t.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return t.findBox(r,["tfhd"]).map(function(n){var i,o;return i=t.readUint32(n,4),o=e[i].timescale||9e4,t.findBox(r,["tfdt"]).map(function(e){var r,n;return r=e.data[e.start],n=t.readUint32(e,4),1===r&&(n*=Math.pow(2,32),n+=t.readUint32(e,8)),n})[0]/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},t.offsetStartDTS=function(e,r,n){t.findBox(r,["moof","traf"]).map(function(r){return t.findBox(r,["tfhd"]).map(function(i){var a=t.readUint32(i,4),s=e[a].timescale||9e4;t.findBox(r,["tfdt"]).map(function(e){var r=e.data[e.start],i=t.readUint32(e,4);if(0===r)t.writeUint32(e,4,i-n*s);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=n*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),l=Math.floor(i%(o+1));t.writeUint32(e,4,a),t.writeUint32(e,8,l)}})})})},t.prototype.append=function(e,r,n,o){var a=this.initData;a||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,l=this.initPTS;if(void 0===l){var u=t.getStartDTS(a,e);this.initPTS=l=u-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}t.offsetStartDTS(a,e,l),s=t.getStartDTS(a,e),this.remuxer.remux(a.audio,a.video,null,null,s,n,o,e)},t.prototype.destroy=function(){},t}();e.default=a},"./src/demux/mpegaudio.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,r,n,i){if(!(r+24>e.length)){var o=this.parseHeader(e,r);if(o&&r+o.frameLength<=e.length){var a=9e4*o.samplesPerFrame/o.sampleRate,s=n+i*a,l={unit:e.subarray(r,r+o.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=o.channelCount,t.samplerate=o.sampleRate,t.samples.push(l),t.len+=o.frameLength,{sample:l,length:o.frameLength}}}},parseHeader:function(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,o=t[e+2]>>4&15,a=t[e+2]>>2&3,s=t[e+2]>>1&1;if(1!==r&&0!==o&&15!==o&&3!==a){var l=3===r?3-i:3===i?3:4,u=1e3*n.BitratesMap[14*l+o-1],c=3===r?0:2===r?1:2,d=n.SamplingRateMap[3*c+a],f=t[e+3]>>6==3?1:2,h=n.SamplesCoefficients[r][i],p=n.BytesInSlot[i],g=8*h*p;return{sampleRate:d,channelCount:f,frameLength:parseInt(h*u/d+s,10)*p,samplesPerFrame:g}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var r=this.parseHeader(t,e),n=4;r&&r.frameLength&&(n=r.frameLength);var i=e+n;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}};e.default=n},"./src/demux/sample-aes.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/crypt/decrypter.js"),i=function(){function t(t,e,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(t,e,{removePKCS7Padding:!1})}return t.prototype.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},t.prototype.decryptAacSample=function(t,e,r,n){var i=t[e].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(t,e+1,r)})},t.prototype.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,n),!n)return}}},t.prototype.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),n=0,i=32;i<=t.length-16;i+=160,n+=16)r.set(t.subarray(i,i+16),n);return r},t.prototype.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var r=0,n=32;n<=t.length-16;n+=160,r+=16)t.set(e.subarray(r,r+16),n);return t},t.prototype.decryptAvcSample=function(t,e,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(t,e,r+1,n)})},t.prototype.decryptAvcSamples=function(t,e,r,n){for(;;e++,r=0){if(e>=t.length)return void n();for(var i=t[e].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,n,o,a),!a)return}}}},t}();e.default=i},"./src/demux/tsdemuxer.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/demux/mpegaudio.js"),o=r("./src/events.js"),a=r("./src/demux/exp-golomb.js"),s=r("./src/demux/sample-aes.js"),l=r("./src/utils/logger.js"),u=r("./src/errors.js"),c={video:1,audio:2,id3:3,text:4},d=function(){function t(t,e,r,n){this.observer=t,this.config=r,this.typeSupported=n,this.remuxer=e,this.sampleAes=null}return t.prototype.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new s.default(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var r=t._syncOffset(e);return!(r<0)&&(r&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:c[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},t.prototype.resetInitSegment=function(e,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},t.prototype.resetTimeStamp=function(){},t.prototype.append=function(e,r,n,i){var a,s,c,d,f,h=e.length,p=!1;this.contiguous=n;var g=this.pmtParsed,y=this._avcTrack,v=this._audioTrack,m=this._id3Track,_=y.pid,b=v.pid,T=m.pid,E=this._pmtId,S=y.pesData,w=v.pesData,O=m.pesData,A=this._parsePAT,j=this._parsePMT,k=this._parsePES,C=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),x=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),D=t._syncOffset(e);for(h-=(h+D)%188,a=D;a<h;a+=188)if(71===e[a]){if(s=!!(64&e[a+1]),c=((31&e[a+1])<<8)+e[a+2],(48&e[a+3])>>4>1){if((d=a+5+e[a+4])===a+188)continue}else d=a+4;switch(c){case _:s&&(S&&(f=k(S))&&void 0!==f.pts&&C(f,!1),S={data:[],size:0}),S&&(S.data.push(e.subarray(d,a+188)),S.size+=a+188-d);break;case b:s&&(w&&(f=k(w))&&void 0!==f.pts&&(v.isAAC?R(f):x(f)),w={data:[],size:0}),w&&(w.data.push(e.subarray(d,a+188)),w.size+=a+188-d);break;case T:s&&(O&&(f=k(O))&&void 0!==f.pts&&P(f),O={data:[],size:0}),O&&(O.data.push(e.subarray(d,a+188)),O.size+=a+188-d);break;case 0:s&&(d+=e[d]+1),E=this._pmtId=A(e,d);break;case E:s&&(d+=e[d]+1);var L=j(e,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);_=L.avc,_>0&&(y.pid=_),b=L.audio,b>0&&(v.pid=b,v.isAAC=L.isAAC),T=L.id3,T>0&&(m.pid=T),p&&!g&&(l.logger.log("reparse from beginning"),p=!1,a=D-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(f=k(S))&&void 0!==f.pts?(C(f,!0),y.pesData=null):y.pesData=S,w&&(f=k(w))&&void 0!==f.pts?(v.isAAC?R(f):x(f),v.pesData=null):(w&&w.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=w),O&&(f=k(O))&&void 0!==f.pts?(P(f),m.pesData=null):m.pesData=O,null==this.sampleAes?this.remuxer.remux(v,y,m,this._txtTrack,r,n,i):this.decryptAndRemux(v,y,m,this._txtTrack,r,n,i)},
t.prototype.decryptAndRemux=function(t,e,r,n,i,o,a){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,function(){s.decryptAndRemuxAvc(t,e,r,n,i,o,a)})}else this.decryptAndRemuxAvc(t,e,r,n,i,o,a)},t.prototype.decryptAndRemuxAvc=function(t,e,r,n,i,o,a){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,function(){s.remuxer.remux(t,e,r,n,i,o,a)})}else this.remuxer.remux(t,e,r,n,i,o,a)},t.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t.prototype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},t.prototype._parsePMT=function(t,e,r,n){var i,o,a,s,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&t[e+1])<<8|t[e+2],o=e+3+i-4,a=(15&t[e+10])<<8|t[e+11],e+=12+a;e<o;){switch(s=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){l.logger.log("unkown stream type:"+t[e]);break}case 15:-1===u.audio&&(u.audio=s);break;case 21:-1===u.id3&&(u.id3=s);break;case 219:if(!n){l.logger.log("unkown stream type:"+t[e]);break}case 27:-1===u.avc&&(u.avc=s);break;case 3:case 4:r?-1===u.audio&&(u.audio=s,u.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return u},t.prototype._parsePES=function(t){var e,r,n,i,o,a,s,u,c=0,d=t.data;if(!t||0===t.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(e=d[0],1===(e[0]<<16)+(e[1]<<8)+e[2]){if((n=(e[4]<<8)+e[5])&&n>t.size-6)return null;r=e[7],192&r&&(a=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,a>4294967295&&(a-=8589934592),64&r?(s=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,s>4294967295&&(s-=8589934592),a-s>54e5&&(l.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),i=e[8],u=i+9,t.size-=u,o=new Uint8Array(t.size);for(var h=0,p=d.length;h<p;h++){e=d[h];var g=e.byteLength;if(u){if(u>g){u-=g;continue}e=e.subarray(u),g-=u,u=0}o.set(e,c),c+=g}return n&&(n-=i+3),{data:o,pts:a,dts:s,len:n}}return null},t.prototype.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var r=e.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,r.push(t)):e.dropped++}t.debug.length&&l.logger.log(t.pts+"/"+t.dts+":"+t.debug)},t.prototype._parseAVCPES=function(t,e){var r,n,i,o=this,s=this._avcTrack,l=this._parseAVCNALu(t.data),u=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),f=function(t,e,r,n){return{key:t,pts:e,dts:r,units:[],debug:n}};t.data=null,u&&l.length&&!s.audFound&&(d(u,s),u=this.avcSample=f(!1,t.pts,t.dts,"")),l.forEach(function(e){switch(e.type){case 1:n=!0,u||(u=o.avcSample=f(!0,t.pts,t.dts,"")),u.frame=!0;var l=e.data;if(c&&l.length>4){var h=new a.default(l).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(u.key=!0)}break;case 5:n=!0,u||(u=o.avcSample=f(!0,t.pts,t.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0,r=new a.default(o.discardEPB(e.data)),r.readUByte();for(var p=0,g=0,y=!1,v=0;!y&&r.bytesAvailable>1;){p=0;do{v=r.readUByte(),p+=v}while(255===v);g=0;do{v=r.readUByte(),g+=v}while(255===v);if(4===p&&0!==r.bytesAvailable){y=!0;if(181===r.readUByte()){if(49===r.readUShort()){if(1195456820===r.readUInt()){if(3===r.readUByte()){var m=r.readUByte(),_=r.readUByte(),b=31&m,T=[m,_];for(i=0;i<b;i++)T.push(r.readUByte()),T.push(r.readUByte()),T.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:t.pts,bytes:T})}}}}}else if(g<r.bytesAvailable)for(i=0;i<g;i++)r.readUByte()}break;case 7:if(n=!0,c=!0,!s.sps){r=new a.default(e.data);var E=r.readSPS();s.width=E.width,s.height=E.height,s.pixelRatio=E.pixelRatio,s.sps=[e.data],s.duration=o._duration;var S=e.data.subarray(1,4),w="avc1.";for(i=0;i<3;i++){var O=S[i].toString(16);O.length<2&&(O="0"+O),w+=O}s.codec=w}break;case 8:n=!0,s.pps||(s.pps=[e.data]);break;case 9:n=!1,s.audFound=!0,u&&d(u,s),u=o.avcSample=f(!1,t.pts,t.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+e.type+" ")}if(u&&n){u.units.push(e)}}),e&&u&&(d(u,s),this.avcSample=null)},t.prototype._insertSampleInOrder=function(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var n=r-1;n>=0;n--)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},t.prototype._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var r=this._avcTrack,n=r.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t},t.prototype._parseAVCNALu=function(t){var e,r,n,i,o,a=0,s=t.byteLength,l=this._avcTrack,u=l.naluState||0,c=u,d=[],f=-1;for(-1===u&&(f=0,o=31&t[0],u=0,a=1);a<s;)if(e=t[a++],u)if(1!==u)if(e)if(1===e){if(f>=0)n={data:t.subarray(f,a-u-1),type:o},d.push(n);else{var h=this._getLastNalUnit();if(h&&(c&&a<=4-c&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),(r=a-u-1)>0)){var p=new Uint8Array(h.data.byteLength+r);p.set(h.data,0),p.set(t.subarray(0,r),h.data.byteLength),h.data=p}}a<s?(i=31&t[a],f=a,o=i,u=0):u=-1}else u=0;else u=3;else u=e?0:2;else u=e?0:1;if(f>=0&&u>=0&&(n={data:t.subarray(f,s),type:o,state:u},d.push(n)),0===d.length){var h=this._getLastNalUnit();if(h){var p=new Uint8Array(h.data.byteLength+t.byteLength);p.set(h.data,0),p.set(t,h.data.byteLength),h.data=p}}return l.naluState=u,d},t.prototype.discardEPB=function(t){for(var e,r,n=t.byteLength,i=[],o=1;o<n-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return t;e=n-i.length,r=new Uint8Array(e);var a=0;for(o=0;o<e;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=t[a];return r},t.prototype._parseAACPES=function(t){var e,r,i,a,s,c=this._audioTrack,d=t.data,f=t.pts,h=this.aacOverFlow,p=this.aacLastPTS;if(h){var g=new Uint8Array(h.byteLength+d.byteLength);g.set(h,0),g.set(d,h.byteLength),d=g}for(i=0,s=d.length;i<s-1&&!n.isHeader(d,i);i++);if(i){var y=void 0,v=void 0;if(i<s-1?(y="AAC PES did not start with ADTS header,offset:"+i,v=!1):(y="no ADTS header found in AAC PES",v=!0),l.logger.warn("parsing error:"+y),this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:y}),v)return}if(n.initTrackConfig(c,this.observer,d,i,this.audioCodec),r=0,e=n.getFrameDuration(c.samplerate),h&&p){var m=p+e;Math.abs(m-f)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((m-f)/90)),f=m)}for(;i<s;)if(n.isHeader(d,i)&&i+5<s){var _=n.appendFrame(c,d,i,f,r);if(!_)break;i+=_.length,a=_.sample.pts,r++}else i++;h=i<s?d.subarray(i,s):null,this.aacOverFlow=h,this.aacLastPTS=a},t.prototype._parseMPEGPES=function(t){for(var e=t.data,r=e.length,n=0,o=0,a=t.pts;o<r;)if(i.default.isHeader(e,o)){var s=i.default.appendFrame(this._audioTrack,e,o,a,n);if(!s)break;o+=s.length,n++}else o++},t.prototype._parseID3PES=function(t){this._id3Track.samples.push(t)},t}();e.default=d},"./src/errors.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},e.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]),s=function(){function t(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.hls=t,this.onEvent=this.onEvent.bind(this),this.handledEvents=e,this.useGenericHandler=!0,this.registerListeners()}return t.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.prototype.onHandlerDestroying=function(){},t.prototype.onHandlerDestroyed=function(){},t.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if(a.has(t))throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)},this)},t.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)},this)},t.prototype.onEvent=function(t,e){this.onEventGeneric(t,e)},t.prototype.onEventGeneric=function(t,e){var r=function(t,e){var r="on"+t.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,e)};try{r.call(this,t,e).call()}catch(e){n.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();e.default=s},"./src/events.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};e.default=n},"./src/hls.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=r("./src/errors.js"),a=r("./src/loader/playlist-loader.js"),s=r("./src/loader/fragment-loader.js"),l=r("./src/loader/key-loader.js"),u=r("./src/controller/fragment-tracker.js"),c=r("./src/controller/stream-controller.js"),d=r("./src/controller/level-controller.js"),f=r("./src/controller/id3-track-controller.js"),h=r("./src/is-supported.js"),p=r("./src/utils/logger.js"),g=r("./src/config.js"),y=r("./src/events.js"),v=r("./src/observer.js"),m=function(t){function e(r){void 0===r&&(r={});var n=t.call(this)||this,i=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in r||(r[o]=i[o]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');p.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var h=n.abrController=new r.abrController(n),g=new r.bufferController(n),y=new r.capLevelController(n),v=new r.fpsController(n),m=new a.default(n),_=new s.default(n),b=new l.default(n),T=new f.default(n),E=n.levelController=new d.default(n),S=new u.FragmentTracker(n),w=n.streamController=new c.default(n,S),O=[E,w],A=r.audioStreamController;A&&O.push(new A(n,S)),n.networkControllers=O;var j=[m,_,b,h,g,y,v,T,S];if(A=r.audioTrackController){var k=new A(n);n.audioTrackController=k,j.push(k)}if(A=r.subtitleTrackController){var C=new A(n);n.subtitleTrackController=C,j.push(C)}if(A=r.emeController){var R=new A(n);n.emeController=R,j.push(R)}return[r.subtitleStreamController,r.timelineController].forEach(function(t){t&&j.push(new t(n))}),n.coreComponents=j,n}return n(e,t),Object.defineProperty(e,"version",{get:function(){return"0.1.0-SNAPSHOT-078dda2"},enumerable:!0,configurable:!0}),e.isSupported=function(){return h.isSupported()},Object.defineProperty(e,"Events",{get:function(){return y.default},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ErrorTypes",{get:function(){return o.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ErrorDetails",{get:function(){return o.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DefaultConfig",{get:function(){return e.defaultConfig?e.defaultConfig:g.hlsDefaultConfig},set:function(t){e.defaultConfig=t},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){p.logger.log("destroy"),this.trigger(y.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(t){t.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(t){p.logger.log("attachMedia"),this.media=t,this.trigger(y.default.MEDIA_ATTACHING,{media:t})},e.prototype.detachMedia=function(){p.logger.log("detachMedia"),this.trigger(y.default.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(t){t=i.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),p.logger.log("loadSource:"+t),this.url=t,this.trigger(y.default.MANIFEST_LOADING,{url:t})},e.prototype.startLoad=function(t){void 0===t&&(t=-1),p.logger.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},e.prototype.stopLoad=function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(t){t.stopLoad()})},e.prototype.swapAudioCodec=function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){p.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)},Object.defineProperty(e.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(t){p.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(t){p.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(t){p.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){p.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(t){p.logger.log("set startLevel:"+t);var e=this;-1!==t&&(t=Math.max(t,e.minAutoLevel)),e.levelController.startLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(t){p.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minAutoLevel",{get:function(){for(var t=this,e=t.levels,r=t.config.minAutoBitrate,n=e?e.length:0,i=0;i<n;i++){if((e[i].realBitrate?Math.max(e[i].realBitrate,e[i].bitrate):e[i].bitrate)>r)return i}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxAutoLevel",{get:function(){var t=this,e=t.levels,r=t.autoLevelCapping;return-1===r&&e&&e.length?e.length-1:r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextAutoLevel",{get:function(){var t=this;return Math.min(Math.max(t.abrController.nextAutoLevel,t.minAutoLevel),t.maxAutoLevel)},set:function(t){var e=this;e.abrController.nextAutoLevel=Math.max(e.minAutoLevel,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioTracks",{get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioTrack",{get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleTracks",{get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleTrack",{get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subtitleDisplay",{get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)},enumerable:!0,configurable:!0}),e}(v.Observer);e.default=m},"./src/is-supported.js":function(t,e,r){"use strict";function n(){var t=i.getMediaSource(),e=window.SourceBuffer||window.WebKitSourceBuffer,r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!n}Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/utils/mediasource-helper.js");e.isSupported=n},"./src/loader/fragment-loader.js":function(t,e,r){"use strict";(function(t){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=function(e){function r(t){var r=e.call(this,t,i.default.FRAG_LOADING)||this;return r.loaders={},r}return n(r,e),r.prototype.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var r=e.frag,n=r.type,i=this.loaders,o=this.hls.config,a=o.fLoader,l=o.loader;r.loaded=0,r.loadTimer=(new Date).getTime();var u=i[n];u&&(s.logger.warn("abort previous fragment loader for type: "+n),u.abort()),u=i[n]=r.loader=o.fLoader?new a(o):new l(o);var c,d,f;c={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var h=r.byteRangeStartOffset,p=r.byteRangeEndOffset;t.isFinite(h)&&t.isFinite(p)&&(c.rangeStart=h,c.rangeEnd=p),d={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},u.load(c,d,f)},r.prototype.loadsuccess=function(t,e,r,n){void 0===n&&(n=null);var o=t.data,a=r.frag;a.loader=void 0,a.loadTimer=(new Date).getTime()-a.loadTimer,this.loaders[a.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:o,frag:a,stats:e,networkDetails:n})},r.prototype.loaderror=function(t,e,r){void 0===r&&(r=null);var n=e.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:r})},r.prototype.loadtimeout=function(t,e,r){void 0===r&&(r=null);var n=e.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:r})},r.prototype.loadprogress=function(t,e,r,n){void 0===n&&(n=null);var o=e.frag;o.loaded=t.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:o,stats:t,networkDetails:n})},r}(o.default);e.default=l}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/level-key.js"),o=function(){function e(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=(t={},t[e.ElementaryStreamTypes.AUDIO]=!1,t[e.ElementaryStreamTypes.VIDEO]=!1,t)}return Object.defineProperty(e,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var t=[];if(this.rawByteRange){var e=this.rawByteRange.split("@",2);if(1===e.length){var r=this.lastByteRangeEndOffset;t[0]=r||0}else t[0]=parseInt(e[1]);t[1]=parseInt(e[0])+t[0],this._byteRange=t}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endProgramDateTime",{get:function(){if(!t.isFinite(this.programDateTime))return null;var e=t.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),e.prototype.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.prototype.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},e.prototype.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},e.prototype.fragmentDecryptdataFromLevelkey=function(t,e){var r=t;return t&&t.method&&t.uri&&!t.iv&&(r=new i.default,r.method=t.method,r.baseuri=t.baseuri,r.reluri=t.reluri,r.iv=this.createInitializationVector(e)),r},e}();e.default=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var events_1=__webpack_require__("./src/events.js"),event_handler_1=__webpack_require__("./src/event-handler.js"),errors_1=__webpack_require__("./src/errors.js"),logger_1=__webpack_require__("./src/utils/logger.js"),destm_1=__webpack_require__("./src/utils/destm.js"),KeyLoader=function(_super){function KeyLoader(t){var e=_super.call(this,t,events_1.default.KEY_LOADING)||this;return e.loaders={},e.decryptkey=null,e.decrypturl=null,e}return __extends(KeyLoader,_super),KeyLoader.prototype.destroy=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={},event_handler_1.default.prototype.destroy.call(this)},KeyLoader.prototype.onKeyLoading=function(t){var e=t.frag,r=e.type,n=this.loaders[r],i=e.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;n&&(logger_1.logger.warn("abort previous key loader for type:"+r),n.abort()),e.loader=this.loaders[r]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,l=void 0,u=void 0;s={url:o,frag:e,responseType:""},l={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},e.loader.load(s,l,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(events_1.default.KEY_LOADED,{frag:e}))},KeyLoader.prototype.loadsuccess=function(response,stats,context){var frag=context.frag,string=destm_1.default(eval("("+response.data+")").data.info,1);this.decryptkey=frag.decryptdata.key=new Uint8Array(string),frag.loader=void 0,this.loaders[frag.type]=void 0,this.hls.trigger(events_1.default.KEY_LOADED,{frag:frag})},KeyLoader.prototype.loaderror=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(events_1.default.ERROR,{type:errors_1.ErrorTypes.NETWORK_ERROR,details:errors_1.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},KeyLoader.prototype.loadtimeout=function(t,e){var r=e.frag,n=r.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(events_1.default.ERROR,{type:errors_1.ErrorTypes.NETWORK_ERROR,details:errors_1.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},KeyLoader}(event_handler_1.default);exports.default=KeyLoader},"./src/loader/level-key.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function t(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(t.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),t}();e.default=i},"./src/loader/level.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}return Object.defineProperty(e.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!t.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),e}();e.default=r}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(t,e,r){"use strict";(function(t){function n(t,e){for(var r=t[e],n=e-1;n>=0;n--){var i=t[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function i(e,r){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):r&&r.programDateTime&&(e.programDateTime=r.endProgramDateTime),t.isFinite(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}Object.defineProperty(e,"__esModule",{value:!0});var o=r("./node_modules/url-toolkit/src/url-toolkit.js"),a=r("./src/loader/fragment.js"),s=r("./src/loader/level.js"),l=r("./src/loader/level-key.js"),u=r("./src/utils/attr-list.js"),c=r("./src/utils/logger.js"),d=r("./src/utils/codecs.js"),f=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),g=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,y=/\.(mp4|m4s|m4v|m4a)$/i,v=function(){function e(){}return e.findGroup=function(t,e){if(!t)return null;for(var r=null,n=0;n<t.length;n++){var i=t[n];i.id===e&&(r=i)}return r},e.convertAVC1ToAVCOTI=function(t){var e,r=t.split(".");return r.length>2?(e=r.shift()+".",e+=parseInt(r.shift()).toString(16),
e+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):e=t,e},e.resolve=function(t,e){return o.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,i=[];for(f.lastIndex=0;null!=(n=f.exec(t));){var o={},a=o.attrs=new u.default(n[1]);o.url=e.resolve(n[2],r);var s=a.decimalResolution("RESOLUTION");s&&(o.width=s.width,o.height=s.height),o.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),o.name=a.NAME,function(t,e){["video","audio"].forEach(function(r){var n=t.filter(function(t){return d.isCodecType(t,r)});if(n.length){var i=n.filter(function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)});e[r+"Codec"]=i.length>0?i[0]:n[0],t=t.filter(function(t){return-1===n.indexOf(t)})}}),e.unknownCodecs=t}([].concat((a.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=e.convertAVC1ToAVCOTI(o.videoCodec)),i.push(o)}return i},e.parseMasterPlaylistMedia=function(t,r,n,i){void 0===i&&(i=[]);var o,a=[],s=0;for(h.lastIndex=0;null!==(o=h.exec(t));){var l={},c=new u.default(o[1]);if(c.TYPE===n){if(l.groupId=c["GROUP-ID"],l.name=c.NAME,l.type=n,l.default="YES"===c.DEFAULT,l.autoselect="YES"===c.AUTOSELECT,l.forced="YES"===c.FORCED,c.URI&&(l.url=e.resolve(c.URI,r)),l.lang=c.LANGUAGE,l.name||(l.name=l.lang),i.length){var d=e.findGroup(i,l.groupId);l.audioCodec=d?d.codec:i[0].codec}l.id=s++,a.push(l)}}return a},e.parseLevelPlaylist=function(e,r,o,d,f){var h,v,m=0,_=0,b=new s.default(r),T=new l.default,E=0,S=null,w=new a.default,O=null;for(p.lastIndex=0;null!==(h=p.exec(e));){var A=h[1];if(A){w.duration=parseFloat(A);var j=(" "+h[2]).slice(1);w.title=j||null,w.tagList.push(j?["INF",A,j]:["INF",A])}else if(h[3]){if(t.isFinite(w.duration)){var k=m++;w.type=d,w.start=_,w.levelkey=T,w.sn=k,w.level=o,w.cc=E,w.urlId=f,w.baseurl=r,w.relurl=(" "+h[3]).slice(1),i(w,S),b.fragments.push(w),S=w,_+=w.duration,w=new a.default}}else if(h[4]){if(w.rawByteRange=(" "+h[4]).slice(1),S){var C=S.byteRangeEndOffset;C&&(w.lastByteRangeEndOffset=C)}}else if(h[5])w.rawProgramDateTime=(" "+h[5]).slice(1),w.tagList.push(["PROGRAM-DATE-TIME",w.rawProgramDateTime]),null===O&&(O=b.fragments.length);else{for(h=h[0].match(g),v=1;v<h.length&&void 0===h[v];v++);var R=(" "+h[v+1]).slice(1),x=(" "+h[v+2]).slice(1);switch(h[v]){case"#":w.tagList.push(x?[R,x]:[R]);break;case"PLAYLIST-TYPE":b.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":m=b.startSN=parseInt(R);break;case"TARGETDURATION":b.targetduration=parseFloat(R);break;case"VERSION":b.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":E++,w.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":E=parseInt(R);break;case"KEY":var P=R,D=new u.default(P),L=D.enumeratedString("METHOD"),I=D.URI,M=D.hexadecimalInteger("IV");L&&(T=new l.default,I&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(L)>=0&&(T.method=L,T.baseuri=r,T.reluri=I,T.key=null,T.iv=M));break;case"START":var F=R,N=new u.default(F),B=N.decimalFloatingPoint("TIME-OFFSET");t.isFinite(B)&&(b.startTimeOffset=B);break;case"MAP":var U=new u.default(R);w.relurl=U.URI,w.rawByteRange=U.BYTERANGE,w.baseurl=r,w.level=o,w.type=d,w.sn="initSegment",b.initSegment=w,w=new a.default,w.rawProgramDateTime=b.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+h)}}}return w=S,w&&!w.relurl&&(b.fragments.pop(),_-=w.duration),b.totalduration=_,b.averagetargetduration=_/b.fragments.length,b.endSN=m-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=E,!b.initSegment&&b.fragments.length&&b.fragments.every(function(t){return y.test(t.relurl)})&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),w=new a.default,w.relurl=b.fragments[0].relurl,w.baseurl=r,w.level=o,w.type=d,w.sn="initSegment",b.initSegment=w,b.needSidxRanges=!0),O&&n(b.fragments,O),b},e}();e.default=v}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(module,exports,__webpack_require__){"use strict";(function(Number){var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var events_1=__webpack_require__("./src/events.js"),event_handler_1=__webpack_require__("./src/event-handler.js"),errors_1=__webpack_require__("./src/errors.js"),logger_1=__webpack_require__("./src/utils/logger.js"),mp4demuxer_1=__webpack_require__("./src/demux/mp4demuxer.js"),m3u8_parser_1=__webpack_require__("./src/loader/m3u8-parser.js"),destm_1=__webpack_require__("./src/utils/destm.js"),performance=window.performance,ContextType={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},LevelType={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},PlaylistLoader=function(_super){function PlaylistLoader(t){var e=_super.call(this,t,events_1.default.MANIFEST_LOADING,events_1.default.LEVEL_LOADING,events_1.default.AUDIO_TRACK_LOADING,events_1.default.SUBTITLE_TRACK_LOADING)||this;return e.loaders={},e}return __extends(PlaylistLoader,_super),Object.defineProperty(PlaylistLoader,"ContextType",{get:function(){return ContextType},enumerable:!0,configurable:!0}),Object.defineProperty(PlaylistLoader,"LevelType",{get:function(){return LevelType},enumerable:!0,configurable:!0}),PlaylistLoader.canHaveQualityLevels=function(t){return t!==ContextType.AUDIO_TRACK&&t!==ContextType.SUBTITLE_TRACK},PlaylistLoader.mapContextToLevelType=function(t){switch(t.type){case ContextType.AUDIO_TRACK:return LevelType.AUDIO;case ContextType.SUBTITLE_TRACK:return LevelType.SUBTITLE;default:return LevelType.MAIN}},PlaylistLoader.getResponseUrl=function(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r},PlaylistLoader.prototype.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,n=e.loader,i=r||n,o=new i(e);return t.loader=o,this.loaders[t.type]=o,o},PlaylistLoader.prototype.getInternalLoader=function(t){return this.loaders[t.type]},PlaylistLoader.prototype.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},PlaylistLoader.prototype.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},PlaylistLoader.prototype.destroy=function(){this.destroyInternalLoaders(),_super.prototype.destroy.call(this)},PlaylistLoader.prototype.onManifestLoading=function(t){this.load(t.url,{type:ContextType.MANIFEST,level:0,id:null})},PlaylistLoader.prototype.onLevelLoading=function(t){this.load(t.url,{type:ContextType.LEVEL,level:t.level,id:t.id})},PlaylistLoader.prototype.onAudioTrackLoading=function(t){this.load(t.url,{type:ContextType.AUDIO_TRACK,level:null,id:t.id})},PlaylistLoader.prototype.onSubtitleTrackLoading=function(t){this.load(t.url,{type:ContextType.SUBTITLE_TRACK,level:null,id:t.id})},PlaylistLoader.prototype.load=function(t,e){var r=this.hls.config;logger_1.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var n=this.getInternalLoader(e);if(n){var i=n.context;if(i&&i.url===t)return logger_1.logger.trace("playlist request ongoing"),!1;logger_1.logger.warn("aborting previous loader for type: "+e.type),n.abort()}var o,a,s,l;switch(e.type){case ContextType.MANIFEST:o=r.manifestLoadingMaxRetry,a=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case ContextType.LEVEL:o=0,a=r.levelLoadingTimeOut;break;default:o=r.levelLoadingMaxRetry,a=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(e),e.url=t,e.responseType=e.responseType||"";var u={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return logger_1.logger.debug("Calling internal loader delegate for URL: "+t),n.load(e,u,c),!0},PlaylistLoader.prototype.loadsuccess=function(response,stats,context,networkDetails){if(void 0===networkDetails&&(networkDetails=null),context.isSidxRequest)return this._handleSidxRequest(response,context),void this._handlePlaylistLoaded(response,stats,context,networkDetails);this.resetInternalLoader(context.type);var mediadata=eval("("+response.data+")");if(!mediadata.data||!mediadata.data.info)return void this._handleManifestParsingError(response,context,"transcoding",networkDetails);var string=destm_1.default(mediadata.data.info);if(response.data=string,stats.tload=performance.now(),0!==string.indexOf("#EXTM3U"))return void this._handleManifestParsingError(response,context,"no EXTM3U delimiter",networkDetails);if(string.indexOf("#EXTINF:")>0||string.indexOf("#EXT-X-TARGETDURATION:")>0){if(!(string.indexOf("#EXTINF:")>0&&string.indexOf("#EXT-X-KEY:")>0))return void this._handleManifestParsingError(response,context,"no EXTM3U EXTINF",networkDetails);this._handleTrackOrLevelPlaylist(response,stats,context,networkDetails)}else this._handleMasterPlaylist(response,stats,context,networkDetails)},PlaylistLoader.prototype.loaderror=function(t,e,r){void 0===r&&(r=null),this._handleNetworkError(e,r)},PlaylistLoader.prototype.loadtimeout=function(t,e,r){void 0===r&&(r=null),this._handleNetworkError(e,r,!0)},PlaylistLoader.prototype._handleMasterPlaylist=function(t,e,r,n){var i=this.hls,o=t.data,a=PlaylistLoader.getResponseUrl(t,r),s=m3u8_parser_1.default.parseMasterPlaylist(o,a);if(!s.length)return void this._handleManifestParsingError(t,r,"no level found in manifest",n);var l=s.map(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),u=m3u8_parser_1.default.parseMasterPlaylistMedia(o,a,"AUDIO",l),c=m3u8_parser_1.default.parseMasterPlaylistMedia(o,a,"SUBTITLES");if(u.length){var d=!1;u.forEach(function(t){t.url||(d=!0)}),!1===d&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(logger_1.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),u.unshift({type:"main",name:"main"}))}i.trigger(events_1.default.MANIFEST_LOADED,{levels:s,audioTracks:u,subtitles:c,url:a,stats:e,networkDetails:n})},PlaylistLoader.prototype._handleTrackOrLevelPlaylist=function(t,e,r,n){var i=this.hls,o=r.id,a=r.level,s=r.type,l=PlaylistLoader.getResponseUrl(t,r),u=Number.isFinite(o)?o:0,c=Number.isFinite(a)?a:u,d=PlaylistLoader.mapContextToLevelType(r),f=m3u8_parser_1.default.parseLevelPlaylist(t.data,l,c,d,u);if(f.tload=e.tload,s===ContextType.MANIFEST){var h={url:l,details:f};i.trigger(events_1.default.MANIFEST_LOADED,{levels:[h],audioTracks:[],url:l,stats:e,networkDetails:n})}if(e.tparsed=performance.now(),f.needSidxRanges){var p=f.initSegment.url;return void this.load(p,{isSidxRequest:!0,type:s,level:a,levelDetails:f,id:o,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}r.levelDetails=f,this._handlePlaylistLoaded(t,e,r,n)},PlaylistLoader.prototype._handleSidxRequest=function(t,e){var r=mp4demuxer_1.default.parseSegmentIndex(new Uint8Array(t.data));if(r){var n=r.references,i=e.levelDetails;n.forEach(function(t,e){var r=t.info,n=i.fragments[e];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},PlaylistLoader.prototype._handleManifestParsingError=function(t,e,r,n){this.hls.trigger(events_1.default.ERROR,{type:errors_1.ErrorTypes.NETWORK_ERROR,details:errors_1.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:r,networkDetails:n})},PlaylistLoader.prototype._handleNetworkError=function(t,e,r){void 0===r&&(r=!1),logger_1.logger.info("A network error occured while loading a "+t.type+"-type playlist");var n,i,o=this.getInternalLoader(t);switch(t.type){case ContextType.MANIFEST:n=r?errors_1.ErrorDetails.MANIFEST_LOAD_TIMEOUT:errors_1.ErrorDetails.MANIFEST_LOAD_ERROR,i=!0;break;case ContextType.LEVEL:n=r?errors_1.ErrorDetails.LEVEL_LOAD_TIMEOUT:errors_1.ErrorDetails.LEVEL_LOAD_ERROR,i=!1;break;case ContextType.AUDIO_TRACK:n=r?errors_1.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:errors_1.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,i=!1;break;default:i=!1}o&&(o.abort(),this.resetInternalLoader(t.type)),this.hls.trigger(events_1.default.ERROR,{type:errors_1.ErrorTypes.NETWORK_ERROR,details:n,fatal:i,url:o.url,loader:o,context:t,networkDetails:e})},PlaylistLoader.prototype._handlePlaylistLoaded=function(t,e,r,n){var i=r.type,o=r.level,a=r.id,s=r.levelDetails;if(!s.targetduration)return void this._handleManifestParsingError(t,r,"invalid target duration",n);if(PlaylistLoader.canHaveQualityLevels(r.type))this.hls.trigger(events_1.default.LEVEL_LOADED,{details:s,level:o||0,id:a||0,stats:e,networkDetails:n});else switch(i){case ContextType.AUDIO_TRACK:this.hls.trigger(events_1.default.AUDIO_TRACK_LOADED,{details:s,id:a,stats:e,networkDetails:n});break;case ContextType.SUBTITLE_TRACK:this.hls.trigger(events_1.default.SUBTITLE_TRACK_LOADED,{details:s,id:a,stats:e,networkDetails:n})}},PlaylistLoader}(event_handler_1.default);exports.default=PlaylistLoader}).call(this,__webpack_require__("./src/polyfills/number.js").Number)},"./src/observer.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./node_modules/eventemitter3/index.js"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.emit.apply(this,[t,t].concat(e))},e}(i.EventEmitter);e.Observer=o},"./src/polyfills/number.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js"),i=n.getSelfScope(),o=i.Number;e.Number=o,o.isFinite=o.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},"./src/remux/aac-helper.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}();e.default=n},"./src/remux/mp4-generator.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function t(){}return t.init=function(){t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=o,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,a,l,a,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for(e=new Uint8Array(n),e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=255&n,e.set(t,4),i=0,n=8;i<o;i++)e.set(r[i],n),n+=r[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,r))},t.moov=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,n=[];r--;)n[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(n))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var r,n,i=e.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return t.box(t.types.sdtp,o)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,n,i,o=[],a=[];for(r=0;r<e.sps.length;r++)n=e.sps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)n=e.pps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=t.box(t.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|e.sps.length].concat(o).concat([e.pps.length]).concat(a))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,o=e.width,a=e.height,s=Math.floor(i/(n+1)),l=Math.floor(i%(n+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),o=e.id,a=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var n,i,o,a,s,l,u=e.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=u[n],o=i.duration,a=i.size,s=i.flags,l=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return t.box(t.types.trun,f)},t.initSegment=function(e){t.types||t.init();var r,n=t.moov(e);return r=new Uint8Array(t.FTYP.byteLength+n.byteLength),r.set(t.FTYP),r.set(n,t.FTYP.byteLength),r},t}();e.default=i},"./src/remux/mp4-remuxer.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/remux/aac-helper.js"),i=r("./src/remux/mp4-generator.js"),o=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=function(){function t(t,e,r,n){this.observer=t,this.config=e,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},t.prototype.resetInitSegment=function(){this.ISGenerated=!1},t.prototype.remux=function(t,e,r,n,i,a,l){if(this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated){var u=t.samples.length,c=e.samples.length,d=i,f=i;if(u&&c){var h=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale;d+=Math.max(0,h),f+=Math.max(0,-h)}if(u){t.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,i));var p=this.remuxAudio(t,d,a,l);if(c){var g=void 0;p&&(g=p.endPTS-p.startPTS),e.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,i)),this.remuxVideo(e,f,a,g,l)}}else if(c){var y=this.remuxVideo(e,f,a,0,l);y&&t.codec&&this.remuxEmptyAudio(t,d,a,y)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(o.default.FRAG_PARSED)},t.prototype.generateIS=function(t,e,r){var n,l,u=this.observer,c=t.samples,d=e.samples,f=this.typeSupported,h="audio/mp4",p={},g={tracks:p},y=void 0===this._initPTS;if(y&&(n=l=1/0),t.config&&c.length&&(t.timescale=t.samplerate,s.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(f.mpeg?(h="audio/mpeg",t.codec=""):f.mp3&&(t.codec="mp3")),p.audio={container:h,codec:t.codec,initSegment:!t.isAAC&&f.mpeg?new Uint8Array:i.default.initSegment([t]),metadata:{channelCount:t.channelCount}},y&&(n=l=c[0].pts-t.inputTimeScale*r)),e.sps&&e.pps&&d.length){var v=e.inputTimeScale;e.timescale=v,p.video={container:"video/mp4",codec:e.codec,initSegment:i.default.initSegment([e]),metadata:{width:e.width,height:e.height}},y&&(n=Math.min(n,d[0].pts-v*r),l=Math.min(l,d[0].dts-v*r),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(p).length?(u.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,y&&(this._initPTS=n,this._initDTS=l)):u.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.prototype.remuxVideo=function(t,e,r,n,l){var u,c,d,f,h,p,g,y=8,v=t.timescale,m=t.samples,_=[],b=m.length,T=this._PTSNormalize,E=this._initDTS,S=this.nextAvcDts,w=this.isSafari;if(0!==b){w&&(r|=m.length&&S&&(l&&Math.abs(e-S/v)<.1||Math.abs(m[0].pts-S-E)<v/5)),r||(S=e*v),m.forEach(function(t){t.pts=T(t.pts-E,S),t.dts=T(t.dts-E,S)}),m.sort(function(t,e){var r=t.dts-e.dts,n=t.pts-e.pts;return r||n||t.id-e.id});var O=m.reduce(function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(O<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(O/90)+" ms to overcome this issue");for(var A=0;A<m.length;A++)m[A].dts+=O}var j=m[0];h=Math.max(j.dts,0),f=Math.max(j.pts,0);var k=Math.round((h-S)/90);r&&k&&(k>1?s.logger.log("AVC:"+k+" ms hole between fragments detected,filling it"):k<-1&&s.logger.log("AVC:"+-k+" ms overlapping between fragments detected"),h=S,m[0].dts=h,f=Math.max(f-k,S),m[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(h/90)+",delta:"+k+" ms")),h,j=m[m.length-1],g=Math.max(j.dts,0),p=Math.max(j.pts,0,g),w&&(u=Math.round((g-h)/(m.length-1)));for(var C=0,R=0,A=0;A<b;A++){for(var x=m[A],P=x.units,D=P.length,L=0,I=0;I<D;I++)L+=P[I].data.length;R+=L,C+=D,x.length=L,x.dts=w?h+A*u:Math.max(x.dts,h),x.pts=Math.max(x.pts,x.dts)}var M=R+4*C+8;try{c=new Uint8Array(M)}catch(t){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:M,reason:"fail allocating video mdat "+M})}var F=new DataView(c.buffer);F.setUint32(0,M),c.set(i.default.types.mdat,4);for(var A=0;A<b;A++){for(var N=m[A],B=N.units,U=0,G=void 0,I=0,D=B.length;I<D;I++){var H=B[I],K=H.data,V=H.data.byteLength;F.setUint32(y,V),y+=4,c.set(K,y),y+=V,U+=4+V}if(w)G=Math.max(0,u*Math.round((N.pts-N.dts)/u));else{if(A<b-1)u=m[A+1].dts-N.dts;else{var W=this.config,Y=N.dts-m[A>0?A-1:A].dts;if(W.stretchShortVideoTrack){var q=W.maxBufferHole,X=Math.floor(q*v),z=(n?f+n*v:this.nextAudioPts)-N.pts;z>X?(u=z-Y,u<0&&(u=Y),s.logger.log("It is approximately "+z/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=Y}else u=Y}G=Math.round(N.pts-N.dts)}_.push({size:U,duration:u,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=g+u;var $=t.dropped;if(t.len=0,t.nbNalu=0,t.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var Q=_[0].flags;Q.dependsOn=2,Q.isNonSync=0}t.samples=_,d=i.default.moof(t.sequenceNumber++,h,t),t.samples=[];var J={data1:d,data2:c,startPTS:f/v,endPTS:(p+u)/v,startDTS:h/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:$};return this.observer.trigger(o.default.FRAG_PARSING_DATA,J),J}},t.prototype.remuxAudio=function(t,e,r,l){var u,c,d,f,h,p,g,y=t.inputTimeScale,v=t.timescale,m=y/v,_=t.isAAC?1024:1152,b=_*m,T=this._PTSNormalize,E=this._initDTS,S=!t.isAAC&&this.typeSupported.mpeg,w=t.samples,O=[],A=this.nextAudioPts;if(r|=w.length&&A&&(l&&Math.abs(e-A/y)<.1||Math.abs(w[0].pts-A-E)<20*b),w.forEach(function(t){t.pts=t.dts=T(t.pts-E,e*y)}),w=w.filter(function(t){return t.pts>=0}),0!==w.length){if(r||(A=l?e*y:w[0].pts),t.isAAC)for(var j=this.config.maxAudioFramesDrift,k=0,C=A;k<w.length;){var R,x=w[k],P=x.pts;R=P-C;var D=Math.abs(1e3*R/y);if(R<=-j*b)s.logger.warn("Dropping 1 audio frame @ "+(C/y).toFixed(3)+"s due to "+Math.round(D)+" ms overlap."),w.splice(k,1),t.len-=x.unit.length;else if(R>=j*b&&D<1e4&&C){var L=Math.round(R/b);s.logger.warn("Injecting "+L+" audio frame @ "+(C/y).toFixed(3)+"s due to "+Math.round(1e3*R/y)+" ms gap.");for(var I=0;I<L;I++){var M=Math.max(C,0);d=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),d||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=x.unit.subarray()),w.splice(k,0,{unit:d,pts:M,dts:M}),t.len+=d.length,C+=b,k++}x.pts=x.dts=C,C+=b,k++}else Math.abs(R),x.pts=x.dts=C,C+=b,k++}for(var I=0,F=w.length;I<F;I++){var N=w[I],B=N.unit,P=N.pts;if(void 0!==g)c.duration=Math.round((P-g)/m);else{var U=Math.round(1e3*(P-A)/y),G=0;if(r&&t.isAAC&&U){if(U>0&&U<1e4)G=Math.round((P-A)/b),s.logger.log(U+" ms hole between AAC samples detected,filling it"),G>0&&(d=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),d||(d=B.subarray()),t.len+=G*d.length);else if(U<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(A/y).toFixed(3)+"s/"+(P/y).toFixed(3)+"s/"+-U+"ms"),t.len-=B.byteLength;continue}P=A}if(p=P,!(t.len>0))return;var H=S?t.len:t.len+8;u=S?0:8;try{f=new Uint8Array(H)}catch(t){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:H,reason:"fail allocating audio mdat "+H})}if(!S){new DataView(f.buffer).setUint32(0,H),f.set(i.default.types.mdat,4)}for(var k=0;k<G;k++)d=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount),d||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=B.subarray()),f.set(d,u),u+=d.byteLength,c={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},O.push(c)}f.set(B,u);var K=B.byteLength;u+=K,c={size:K,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},O.push(c),g=P}var V=0,W=O.length;if(W>=2&&(V=O[W-2].duration,c.duration=V),W){this.nextAudioPts=A=g+m*V,t.len=0,t.samples=O,h=S?new Uint8Array:i.default.moof(t.sequenceNumber++,p/m,t),t.samples=[];var Y=p/y,q=A/y,X={data1:h,data2:f,startPTS:Y,endPTS:q,startDTS:Y,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.observer.trigger(o.default.FRAG_PARSING_DATA,X),X}return null}},t.prototype.remuxEmptyAudio=function(t,e,r,i){var o=t.inputTimeScale,a=t.samplerate?t.samplerate:o,l=o/a,u=this.nextAudioPts,c=(void 0!==u?u:i.startDTS*o)+this._initDTS,d=i.endDTS*o+this._initDTS,f=1024*l,h=Math.ceil((d-c)/f),p=n.default.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.logger.warn("remux empty Audio"),!p)return void s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var g=[],y=0;y<h;y++){var v=c+y*f;g.push({unit:p,pts:v,dts:v}),t.len+=p.length}t.samples=g,this.remuxAudio(t,e,r)},t.prototype.remuxID3=function(t,e){var r,n=t.samples.length,i=t.inputTimeScale,a=this._initPTS,s=this._initDTS;if(n){for(var l=0;l<n;l++)r=t.samples[l],r.pts=(r.pts-a)/i,r.dts=(r.dts-s)/i;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e},t.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var r,n=t.samples.length,i=t.inputTimeScale,a=this._initPTS;if(n){for(var s=0;s<n;s++)r=t.samples[s],r.pts=(r.pts-a)/i
;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e},t.prototype._PTSNormalize=function(t,e){var r;if(void 0===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t},t}();e.default=l},"./src/remux/passthrough-remuxer.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/events.js"),i=function(){function t(t){this.observer=t}return t.prototype.destroy=function(){},t.prototype.resetTimeStamp=function(){},t.prototype.resetInitSegment=function(){},t.prototype.remux=function(t,e,r,i,o,a,s,l){var u=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),u.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:o,startDTS:o,type:c,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),u.trigger(n.default.FRAG_PARSED)},t}();e.default=i},"./src/task-loop.js":function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=t.apply(this,[e].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return n(e,t),e.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.prototype.hasInterval=function(){return!!this._tickInterval},e.prototype.hasNextTick=function(){return!!this._tickTimer},e.prototype.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,t),!0)},e.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.prototype.tick=function(){1===++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},e.prototype.doTick=function(){},e}(i.default);e.default=o},"./src/utils/attr-list.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function e(t){"string"==typeof t&&(t=e.parseAttrList(t));for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])}return e.prototype.decimalInteger=function(e){var r=parseInt(this[e],10);return r>t.MAX_SAFE_INTEGER?1/0:r},e.prototype.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),n=0;n<e.length/2;n++)r[n]=parseInt(e.slice(2*n,2*n+2),16);return r}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var r=parseInt(this[e],16);return r>t.MAX_SAFE_INTEGER?1/0:r},e.prototype.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.prototype.enumeratedString=function(t){return this[t]},e.prototype.decimalResolution=function(t){var e=r.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},e.parseAttrList=function(t){var e,r={};for(n.lastIndex=0;null!==(e=n.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r},e}();e.default=i}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={search:function(t,e){for(var r=0,n=t.length-1,i=null,o=null;r<=n;){i=(r+n)/2|0,o=t[i];var a=e(o);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}};e.default=n},"./src/utils/buffer-helper.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var r=t.buffered,n=0;n<r.length;n++)if(e>=r.start(n)&&e<=r.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,r){try{if(t){var n=t.buffered,i=[],o=void 0;for(o=0;o<n.length;o++)i.push({start:n.start(o),end:n.end(o)});return this.bufferedInfo(i,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,r){var n,i,o,a,s,l=[];for(t.sort(function(t,e){var r=t.start-e.start;return r||e.end-t.end}),s=0;s<t.length;s++){var u=l.length;if(u){var c=l[u-1].end;t[s].start-c<r?t[s].end>c&&(l[u-1].end=t[s].end):l.push(t[s])}else l.push(t[s])}for(s=0,n=0,i=o=e;s<l.length;s++){var d=l[s].start,f=l[s].end;if(e+r>=d&&e<f)i=d,o=f,n=o-e;else if(e+r<d){a=d;break}}return{len:n,start:i,end:o,nextStart:a}},t}();e.BufferHelper=n},"./src/utils/cea-608-parser.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(t){var e=t;return n.hasOwnProperty(t)&&(e=n[t]),String.fromCharCode(e)},o=15,a=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseFilter[t];this.verboseLevel}},h=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},p=function(){function t(t,e,r,n,i){this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}return t.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.prototype.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var n=e[r];t.hasOwnProperty(n)&&(this[n]=t[n])}},t.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.prototype.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.prototype.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),g=function(){function t(t,e,r,n,i,o){this.uchar=t||" ",this.penState=new p(e,r,n,i,o)}return t.prototype.reset=function(){this.uchar=" ",this.penState.reset()},t.prototype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},t.prototype.setPenState=function(t){this.penState.copy(t)},t.prototype.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.prototype.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),y=function(){function t(){this.chars=[];for(var t=0;t<a;t++)this.chars.push(new g);this.pos=0,this.currPenState=new p}return t.prototype.equals=function(t){for(var e=!0,r=0;r<a;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<a;e++)this.chars[e].copy(t.chars[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<a;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},t.prototype.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>a&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=a)},t.prototype.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},t.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.prototype.insertChar=function(t){t>=144&&this.backSpace();var e=i(t);if(this.pos>=a)return void f.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1)},t.prototype.clearFromPos=function(t){var e;for(e=t;e<a;e++)this.chars[e].reset()},t.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.prototype.getTextString=function(){for(var t=[],e=!0,r=0;r<a;r++){var n=this.chars[r].uchar;" "!==n&&(e=!1),t.push(n)}return e?"":t.join("")},t.prototype.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),v=function(){function t(){this.rows=[];for(var t=0;t<o;t++)this.rows.push(new y);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return t.prototype.reset=function(){for(var t=0;t<o;t++)this.rows[t].clear();this.currRow=o-1},t.prototype.equals=function(t){for(var e=!0,r=0;r<o;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},t.prototype.copy=function(t){for(var e=0;e<o;e++)this.rows[e].copy(t.rows[e])},t.prototype.isEmpty=function(){for(var t=!0,e=0;e<o;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},t.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},t.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},t.prototype.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},t.prototype.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},t.prototype.setCursor=function(t){f.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.prototype.setPAC=function(t){f.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<o;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&&a<f.time)for(var r=0;r<this.nrRollUpRows;r++)this.rows[e-this.nrRollUpRows+r+1].copy(i.rows[n+r])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,u=Math.max(l-1,0);s.setCursor(t.indent),t.color=s.chars[u].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},t.prototype.setBkgData=function(t){f.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},t.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void f.log("DEBUG","roll_up but nrRollUpRows not set yet");f.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),f.log("INFO","Rolling up")},t.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],r="",n=-1,i=0;i<o;i++){var a=this.rows[i].getTextString();a&&(n=i+1,t?e.push("Row "+n+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},t.prototype.getTextAndFormat=function(){return this.rows},t}(),m=function(){function t(t,e){this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new v,this.nonDisplayedMemory=new v,this.lastOutputScreen=new v,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return t.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},t.prototype.getHandler=function(){return this.outputFilter},t.prototype.setHandler=function(t){this.outputFilter=t},t.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},t.prototype.setBkgData=function(t){this.writeScreen.setBkgData(t)},t.prototype.setMode=function(t){t!==this.mode&&(this.mode=t,f.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.prototype.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.prototype.ccAOF=function(){},t.prototype.ccAON=function(){},t.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.prototype.ccRU=function(t){f.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},t.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.prototype.ccTO=function(t){f.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.prototype.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=n[r]}f.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},t.prototype.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=f.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},t.prototype.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),_=function(){function t(t,e,r){this.field=t||1,this.outputs=[e,r],this.channels=[new m(1,e),new m(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return t.prototype.getHandler=function(t){return this.channels[t].getHandler()},t.prototype.setHandler=function(t,e){this.channels[t].setHandler(e)},t.prototype.addData=function(t,e){var r,n,i,o=!1;this.lastTime=t,f.setTime(t);for(var a=0;a<e.length;a+=2)if(n=127&e[a],i=127&e[a+1],0!==n||0!==i){if(f.log("DATA","["+h([e[a],e[a+1]])+"] -> ("+h([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(o=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else f.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+h([n,i])+" orig: "+h([e[a],e[a+1]])))}else this.dataCounters.padding+=2},t.prototype.parseCmd=function(t,e){var r=null,n=(20===t||28===t)&&e>=32&&e<=47,i=(23===t||31===t)&&e>=33&&e<=35;if(!n&&!i)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+h([t,e])+") is dropped"),!0;r=20===t||23===t?1:2;var o=this.channels[r-1];return 20===t||28===t?32===e?o.ccRCL():33===e?o.ccBS():34===e?o.ccAOF():35===e?o.ccAON():36===e?o.ccDER():37===e?o.ccRU(2):38===e?o.ccRU(3):39===e?o.ccRU(4):40===e?o.ccFON():41===e?o.ccRDC():42===e?o.ccTR():43===e?o.ccRTD():44===e?o.ccEDM():45===e?o.ccCR():46===e?o.ccENM():47===e&&o.ccEOC():o.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.parseMidrow=function(t,e){var r=null;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currChNr)return f.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[r-1].ccMIDROW(e),f.log("DEBUG","MIDROW ("+h([t,e])+")"),!0}return!1},t.prototype.parsePAC=function(t,e){var r=null,n=null,i=(t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127,o=(16===t||24===t)&&e>=64&&e<=95;if(!i&&!o)return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=t<=23?1:2,n=e>=64&&e<=95?1===r?s[t]:u[t]:1===r?l[t]:c[t];var a=this.interpretPAC(n,e);return this.channels[r-1].setPAC(a),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=r,!0},t.prototype.interpretPAC=function(t,e){var r=e,n={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.prototype.parseChars=function(t,e){var r=null,n=null,o=null;if(t>=25?(r=2,o=t-8):(r=1,o=t),o>=17&&o<=19){var a=e;a=17===o?e+80:18===o?e+112:e+144,f.log("INFO","Special char '"+i(a)+"' in channel "+r),n=[a]}else t>=32&&t<=127&&(n=0===e?[t]:[t,e]);if(n){var s=h(n);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},t.prototype.parseBackgroundAttributes=function(t,e){var r,n,i,o,a=(16===t||24===t)&&e>=32&&e<=47,s=(23===t||31===t)&&e>=45&&e<=47;return!(!a&&!s)&&(r={},16===t||24===t?(n=Math.floor((e-32)/2),r.background=d[n],e%2==1&&(r.background=r.background+"_semi")):45===e?r.background="transparent":(r.foreground="black",47===e&&(r.underline=!0)),i=t<24?1:2,o=this.channels[i-1],o.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},t.prototype.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},t.prototype.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}();e.default=_},"./src/utils/codecs.js":function(t,e,r){"use strict";function n(t,e){var r=o[e];return!!r&&!0===r[t.slice(0,4)]}function i(t,e){return window.MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}Object.defineProperty(e,"__esModule",{value:!0});var o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};e.isCodecType=n,e.isCodecSupportedInMp4=i},"./src/utils/cues.js":function(t,e,r){"use strict";function n(t,e,r,n){for(var o,a,s,l,u,c=window.VTTCue||window.TextTrackCue,d=0;d<n.rows.length;d++)if(o=n.rows[d],s=!0,l=0,u="",!o.isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?l++:(u+=o.chars[f].uchar,s=!1);o.cueStartTime=e,e===r&&(r+=1e-4),a=new c(e,r,i.fixLineBreaks(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),t.addCue(a)}}Object.defineProperty(e,"__esModule",{value:!0});var i=r("./src/utils/vttparser.js");e.newCue=n},"./src/utils/destm.js":function(t,e,r){"use strict";function n(t,e){function r(t,e){var r="";if("object"==typeof t)for(var n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);t=r||t;for(var i,o,a=new Uint8Array(t.length),s=e.length,n=0;n<t.length;n++)o=n%s,i=t[n],i=i.toString().charCodeAt(0),a[n]=i^e.charCodeAt(o);return a}function n(t){var e="";if("object"==typeof t)for(var r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);t=e||t;var n=new Uint8Array(t.length);for(r=0;r<t.length;r++)n[r]=t[r].toString().charCodeAt(0);var i,o,r=0;for(r=0;r<n.length;r++)0!=(i=n[r]%3)&&r+i<n.length&&(o=n[r+1],n[r+1]=n[r+i],n[r+i]=o,r=r+i+1);return n}function i(t){var e="";if("object"==typeof t)for(var r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);t=e||t;var n=new Uint8Array(t.length);for(r=0;r<t.length;r++)n[r]=t[r].toString().charCodeAt(0);var r=0,i=0,o=0,a=0;for(r=0;r<n.length;r++)o=n[r]%2,o&&r++,a++;var s=new Uint8Array(a);for(r=0;r<n.length;r++)o=n[r]%2,s[i++]=o?n[r++]:n[r];return s}function o(t,e){var r=0,n=0,i=0,o=0,a="";if("object"==typeof t)for(var r=0;r<t.length;r++)a+=String.fromCharCode(t[r]);t=a||t;var s=new Uint8Array(t.length);for(r=0;r<t.length;r++)s[r]=t[r].toString().charCodeAt(0);for(r=0;r<t.length;r++)if(0!=(o=s[r]%5)&&1!=o&&r+o<s.length&&(i=s[r+1],n=r+2,s[r+1]=s[r+o],s[o+r]=i,(r=r+o+1)-2>n))for(;n<r-2;n++)s[n]=s[n]^e.charCodeAt(n%e.length);for(r=0;r<t.length;r++)s[r]=s[r]^e.charCodeAt(r%e.length);return s}for(var a={data:{info:t}},s={q:r,h:n,m:i,k:o},l=a.data.info,u=l.substring(l.length-4).split(""),c=0;c<u.length;c++)u[c]=u[c].toString().charCodeAt(0)%4;u.reverse();for(var d=[],c=0;c<u.length;c++)d.push(l.substring(u[c]+1,u[c]+2)),l=l.substring(0,u[c]+1)+l.substring(u[c]+2);a.data.encrypt_table=d,a.data.key_table=[];for(var c in a.data.encrypt_table)"q"!=a.data.encrypt_table[c]&&"k"!=a.data.encrypt_table[c]||(a.data.key_table.push(l.substring(l.length-12)),l=l.substring(0,l.length-12));a.data.key_table.reverse(),a.data.info=l;var f=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);a.data.info=function(t){var e,r,n,i,o,a,s;for(a=t.length,o=0,s="";o<a;){do{e=f[255&t.charCodeAt(o++)]}while(o<a&&-1==e);if(-1==e)break;do{r=f[255&t.charCodeAt(o++)]}while(o<a&&-1==r);if(-1==r)break;s+=String.fromCharCode(e<<2|(48&r)>>4);do{if(61==(n=255&t.charCodeAt(o++)))return s;n=f[n]}while(o<a&&-1==n);if(-1==n)break;s+=String.fromCharCode((15&r)<<4|(60&n)>>2);do{if(61==(i=255&t.charCodeAt(o++)))return s;i=f[i]}while(o<a&&-1==i);if(-1==i)break;s+=String.fromCharCode((3&n)<<6|i)}return s}(a.data.info);for(var c in a.data.encrypt_table){var h=a.data.encrypt_table[c];if("q"==h||"k"==h){var p=a.data.key_table.pop();a.data.info=s[a.data.encrypt_table[c]](a.data.info,p)}else a.data.info=s[a.data.encrypt_table[c]](a.data.info)}if(e)return a.data.info;var g="";for(c=0;c<a.data.info.length;c++)g+=String.fromCharCode(a.data.info[c]);return g}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},"./src/utils/discontinuities.js":function(t,e,r){"use strict";(function(t){function n(t,e){for(var r=null,n=0;n<t.length;n+=1){var i=t[n];if(i&&i.cc===e){r=i;break}}return r}function i(t,e){return d.default.search(t,function(t){return t.cc<e?1:t.cc>e?-1:0})}function o(t,e,r){var n=!1;return e&&e.details&&r&&(r.endCC>r.startCC||t&&t.cc<r.startCC)&&(n=!0),n}function a(t,e){var r=t.fragments,i=e.fragments;if(!i.length||!r.length)return void f.logger.log("No fragments to align");var o=n(r,i[0].cc);return!o||o&&!o.startPTS?void f.logger.log("No frag in previous level to align on"):o}function s(t,e){e.fragments.forEach(function(e){if(e){var r=e.start+t;e.start=e.startPTS=r,e.endPTS=r+e.duration}}),e.PTSKnown=!0}function l(t,e,r){u(t,r,e),!r.PTSKnown&&e&&c(r,e.details)}function u(t,e,r){if(o(t,r,e)){var n=a(r.details,e);n&&(f.logger.log("Adjusting PTS using last level due to CC increase within current level"),s(n.start,e))}}function c(e,r){if(r&&r.fragments.length){if(!e.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,i=e.fragments[0].programDateTime,o=(i-n)/1e3+r.fragments[0].start;t.isFinite(o)&&(f.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),s(o,e))}}Object.defineProperty(e,"__esModule",{value:!0});var d=r("./src/utils/binary-search.js"),f=r("./src/utils/logger.js");e.findFirstFragWithCC=n,e.findFragWithCC=i,e.shouldAlignOnDiscontinuities=o,e.findDiscontinuousReferenceFrag=a,e.adjustPts=s,e.alignStream=l,e.alignDiscontinuities=u,e.alignPDT=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/ewma.js"),i=function(){function t(t,e,r,i){this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(e),this.fast_=new n.default(r)}return t.prototype.sample=function(t,e){t=Math.max(t,this.minDelayMs_);var r=8e3*e/t,n=t/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.prototype.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.prototype.destroy=function(){},t}();e.default=i},"./src/utils/ewma.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return t.prototype.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},t.prototype.getTotalWeight=function(){return this.totalWeight_},t.prototype.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}();e.default=n},"./src/utils/get-self-scope.js":function(t,e,r){"use strict";function n(){return"undefined"==typeof window?self:window}Object.defineProperty(e,"__esModule",{value:!0}),e.getSelfScope=n},"./src/utils/logger.js":function(t,e,r){"use strict";function n(){}function i(t,e){return e="["+t+"] > "+e}function o(t){var e=c.console[t];return e?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=i(t,r[0])),e.apply(c.console,r)}:n}function a(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];e.forEach(function(e){u[e]=t[e]?t[e].bind(t):o(e)})}Object.defineProperty(e,"__esModule",{value:!0});var s=r("./src/utils/get-self-scope.js"),l={trace:n,debug:n,log:n,warn:n,info:n,error:n},u=l,c=s.getSelfScope();e.enableLogs=function(t){if(!0===t||"object"==typeof t){a(t,"debug","log","info","warn","error");try{u.log()}catch(t){u=l}}else u=l},e.logger=u},"./src/utils/mediakeys-helper.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();e.requestMediaKeySystemAccess=n},"./src/utils/mediasource-helper.js":function(t,e,r){"use strict";function n(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}Object.defineProperty(e,"__esModule",{value:!0}),e.getMediaSource=n},"./src/utils/output-filter.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.timelineController=t,this.trackName=e,this.startTime=null,this.endTime=null,this.screen=null}return t.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.prototype.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t}();e.default=n},"./src/utils/texttrack-utils.js":function(t,e,r){"use strict";function n(t,e){var r=null;try{r=new window.Event("addtrack")}catch(t){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function i(t){if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}Object.defineProperty(e,"__esModule",{value:!0}),e.sendAddTrackEvent=n,e.clearCurrentCues=i},"./src/utils/time-ranges.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={toString:function(t){for(var e="",r=t.length,n=0;n<r;n++)e+="["+t.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}};e.default=n},"./src/utils/vttcue.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){function t(t){return"string"==typeof t&&(!!o[t.toLowerCase()]&&t.toLowerCase())}function e(t){return"string"==typeof t&&(!!a[t.toLowerCase()]&&t.toLowerCase())}function r(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function n(n,o,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=n,h=o,p=a,g=null,y="",v=!0,m="auto",_="start",b=50,T="middle",E=50,S="middle";if(Object.defineProperty(s,"id",r({},u,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(s,"pauseOnExit",r({},u,{get:function(){return d},set:function(t){d=!!t}})),Object.defineProperty(s,"startTime",r({},u,{get:function(){return f},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},u,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},u,{
get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},u,{get:function(){return g},set:function(t){g=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},u,{get:function(){return y},set:function(e){var r=t(e);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");y=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},u,{get:function(){return v},set:function(t){v=!!t,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},u,{get:function(){return m},set:function(t){if("number"!=typeof t&&t!==i)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},u,{get:function(){return _},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");_=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},u,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},u,{get:function(){return T},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},u,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},u,{get:function(){return S},set:function(t){var r=e(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");S=r,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",o={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}()},"./src/utils/vttparser.js":function(t,e,r){"use strict";function n(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new c,this.regionList=[]}function i(t){function e(t,e,r,n){return 3600*(0|t)+60*(0|e)+(0|r)+(0|n)/1e3}var r=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function o(){this.values=Object.create(null)}function a(t,e,r,n){var i=n?t.split(n):[t];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],l=a[1];e(s,l)}}}function s(t,e,r){function n(){var e=i(t);if(null===e)throw new Error("Malformed timestamp: "+l);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(){t=t.replace(/^\s+/,"")}var l=t;if(s(),e.startTime=n(),s(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+l);t=t.substr(3),s(),e.endTime=n(),s(),function(t,e){var n=new o;a(t,function(t,e){switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){n.set(t,r[i].region);break}break;case"vertical":n.alt(t,e,["rl","lr"]);break;case"line":var o=e.split(","),a=o[0];n.integer(t,a),n.percent(t,a)&&n.set("snapToLines",!1),n.alt(t,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",f,"end"]);break;case"position":o=e.split(","),n.percent(t,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",f,"end","line-left","line-right","auto"]);break;case"size":n.percent(t,e);break;case"align":n.alt(t,e,["start",f,"end","left","right"])}},/:/,/\s/),e.region=n.get("region",null),e.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===d.line&&(i=-1),e.line=i,e.lineAlign=n.get("lineAlign","start"),e.snapToLines=n.get("snapToLines",!0),e.size=n.get("size",100),e.align=n.get("align",f);var s=n.get("position","auto");"auto"===s&&50===d.position&&(s="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=s}(t,e)}function l(t){return t.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(e,"__esModule",{value:!0});var u=r("./src/utils/vttcue.js"),c=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};o.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var d=new u.default(0,0,0),f="middle"===d.align?"middle":"center";e.fixLineBreaks=l,n.prototype={parse:function(t){function e(){var t=r.buffer,e=0;for(t=l(t);e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var n=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,r.buffer=t.substr(e),n}var r=this;t&&(r.buffer+=r.decoder.decode(t,{stream:!0}));try{var n=void 0;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;n=e();var i=n.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var o=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:n=e(),r.state){case"HEADER":/:/.test(n)?function(t){a(t,function(t,e){},/:/)}(n):n||(r.state="ID");continue;case"NOTE":n||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){r.state="NOTE";break}if(!n)continue;if(r.cue=new u.default(0,0,""),r.state="CUE",-1===n.indexOf("--\x3e")){r.cue.id=n;continue}case"CUE":try{s(n,r.cue,r.regionList)}catch(t){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var c=-1!==n.indexOf("--\x3e");if(!n||c&&(o=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=n;continue;case"BADCUE":n||(r.state="ID");continue}}}catch(t){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return t.onflush&&t.onflush(),this}},e.default=n},"./src/utils/webvtt-parser.js":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js"),i=r("./src/demux/id3.js"),o=function(t,e,r){return t.substr(r||0,e.length)===e},a=function(e){var r=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),o=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return t.isFinite(r)&&t.isFinite(n)&&t.isFinite(i)&&t.isFinite(o)?(r+=1e3*n,r+=6e4*i,r+=36e5*o):-1},s=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},l=function(t,e,r){var n=t[e],i=t[n.prevCC];if(!i||!i.new&&n.new)return t.ccOffset=t.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)t.ccOffset+=n.start-i.start,n.new=!1,n=i,i=t[n.prevCC];t.presentationOffset=r},u={parse:function(t,e,r,u,c,d){var f,h=/\r\n|\n\r|\n|\r/g,p=i.utf8ArrayToStr(new Uint8Array(t)).trim().replace(h,"\n").split("\n"),g="00:00.000",y=0,v=0,m=0,_=[],b=!0,T=new n.default;T.oncue=function(t){var e=r[u],n=r.ccOffset;e&&e.new&&(void 0!==v?n=r.ccOffset=e.start:l(r,u,m)),m&&(n=m+r.ccOffset-r.presentationOffset),t.startTime+=n-v,t.endTime+=n-v,t.id=s(t.startTime.toString())+s(t.endTime.toString())+s(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),t.endTime>0&&_.push(t)},T.onparsingerror=function(t){f=t},T.onflush=function(){if(f&&d)return void d(f);c(_)},p.forEach(function(t){if(b){if(o(t,"X-TIMESTAMP-MAP=")){b=!1,t.substr(16).split(",").forEach(function(t){o(t,"LOCAL:")?g=t.substr(6):o(t,"MPEGTS:")&&(y=parseInt(t.substr(7)))});try{e=e<0?e+8589934592:e,y-=e,v=a(g)/1e3,m=y/9e4,-1===v&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){f=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(b=!1)}T.parse(t+"\n")}),T.flush()}};e.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=window.performance,o=window.XMLHttpRequest,a=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return t.prototype.destroy=function(){this.abort(),this.loader=null},t.prototype.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.prototype.load=function(t,e,r){this.context=t,this.config=e,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},t.prototype.loadInternal=function(){var t,e=this.context;t=this.loader=new o;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(t,e.url)}catch(r){t.open("GET",e.url,!0),n(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.prototype.readystatechange=function(t){var e=t.currentTarget,r=e.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===r){var l=e.status;if(l>=200&&l<300){o.tload=Math.max(o.tfirst,i.now());var u=void 0,c=void 0;"arraybuffer"===a.responseType?(u=e.response,c=u.byteLength):(u=e.responseText,c=u.length),o.loaded=o.total=c;var d={url:e.responseURL,data:u};this.callbacks.onSuccess(d,o,a,e)}else o.retry>=s.maxRetry||l>=400&&l<499?(n.logger.error(l+" while loading "+a.url),this.callbacks.onError({code:l,text:e.statusText},a,e)):(n.logger.warn(l+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},t.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.prototype.loadprogress=function(t){var e=t.currentTarget,r=this.stats;r.loaded=t.loaded,t.lengthComputable&&(r.total=t.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,e)},t}();e.default=a}}).default}),function(t){var e,r,n,i,o,a,s,l,u=t.html5=function(){},c=0,d=-1,f="",h={},p=0,g=0,y=0,v=0,m=0,_=30,b=0,T=function(t,e){for(var r=window.location.search.substring(1),n=r.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]==t)return"undefined"==o[1]?void 0:o[1]}return e},E=function(t,n){if(Hls.isSupported())e&&(e.destroy(),e.bufferTimer&&(clearInterval(e.bufferTimer),e.bufferTimer=void 0),e=null),r={url:t,t0:performance.now(),load:[],buffer:[],video:[],level:[],bitrate:[]},e=new Hls({debug:!1,enableWorker:!0,defaultAudioCodec:void 0}),e.loadSource(t),-1==d?e.autoLevelCapping=d:e.loadLevel=d,e.attachMedia(n),e.on(Hls.Events.LEVEL_LOADED,function(t,e){b=e.details.totalduration}),e.on(Hls.Events.FRAG_BUFFERED,function(t,e){P(e.frag.loadTimer),G()}),e.on(Hls.Events.ERROR,function(t,e){var r="";switch(e.details){case Hls.ErrorDetails.MANIFEST_LOAD_ERROR:e.fatal&&!y&&(y=1,r="H0x10001");break;case Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:e.fatal&&!y&&(y=1,r="H0x20001");break;case Hls.ErrorDetails.MANIFEST_PARSING_ERROR:e.fatal&&!y&&(y=1,r="transcoding"==e.reason?"H0x10007":"H0x10002");break;case Hls.ErrorDetails.LEVEL_LOAD_ERROR:e.fatal&&!y&&(y=1,r="H0x20002");break;case Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT:e.fatal&&!y&&(y=1,r="H0x20003");break;case Hls.ErrorDetails.LEVEL_LOAD_RENAME:r="00x10007",N();break;case Hls.ErrorDetails.LEVEL_SWITCH_ERROR:e.fatal&&(r="H0x20004");break;case Hls.ErrorDetails.FRAG_LOAD_ERROR:if(1==g)return;e.fatal&&!p?(p=1,F()):e.fatal||(p=0);break;case Hls.ErrorDetails.FRAG_LOAD_TIMEOUT:e.fatal&&!p?(p=1,g=0,U()):e.fatal?p=0:(g=1,p=0);break;case Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case Hls.ErrorDetails.FRAG_DECRYPT_ERROR:case Hls.ErrorDetails.FRAG_PARSING_ERROR:case Hls.ErrorDetails.KEY_LOAD_ERROR:case Hls.ErrorDetails.KEY_LOAD_TIMEOUT:case Hls.ErrorDetails.BUFFER_APPEND_ERROR:case Hls.ErrorDetails.BUFFER_ADD_CODEC_ERROR:case Hls.ErrorDetails.BUFFER_APPENDING_ERROR:break;case Hls.ErrorDetails.BUFFER_STALLED_ERROR:f.currentTime=f.currentTime+.5}""!=r&&h.events.onError(r)});else if(h.model.flash){var i={primary:"flash",cdn:0,level:0,html5:!1};v&&(i.cdn=D,i.lockCdnChange=!0),switchPlayer(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?h.events.onError("00x10004"):h.events.onError("00x10005")}else-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?h.events.onError("H0x10004"):h.events.onError("H0x10005")},S=function(t){t.addEventListener("resize",w),t.addEventListener("seeking",w),t.addEventListener("seeked",w),t.addEventListener("pause",w),t.addEventListener("play",w),t.addEventListener("canplay",w),t.addEventListener("canplaythrough",w),t.addEventListener("ended",w),t.addEventListener("playing",w),t.addEventListener("ratechange",w),t.addEventListener("volumechange",w),t.addEventListener("error",w),t.addEventListener("loadedmetadata",w),t.addEventListener("loadeddata",w),t.addEventListener("durationchange",w)},w=function(e){var o="";switch(e.type){case"durationchange":if(e.target.duration-l<=.5)return;l=e.target.duration,o=Math.round(1e3*e.target.duration);break;case"resize":o=e.target.videoWidth+"/"+e.target.videoHeight;break;case"ended":n.pause(),L||(i.onComplete(),$(".mocoplayer-right-pause").remove());break;case"loadedmetadata":case"loadeddata":break;case"canplay":h.currentTime&&(n.currentTime(h.currentTime),h.currentTime=0);break;case"canplaythrough":break;case"seeking":n.paused()||n.pause(),m=1,s=e.target.currentTime;break;case"seeked":m=0,e.target.currentTime!=e.target.duration&&n.paused()&&n.play();break;case"play":m=0,$(".mocoplayer-right-pause").hide(),i.onPlay();break;case"playing":m=0,$(".mocoplayer-error").length&&$(".mocoplayer-error").remove(),s=e.target.currentTime;break;case"pause":m||(H(),i.onPause());break;case"waiting":break;case"ratechange":i.onRateChange();break;case"volumechange":i.volumeChange();break;case"stalled":break;case"error":if(o=Math.round(1e3*e.target.currentTime),"error"===e.type){var u,d=e.currentTarget.error;switch(d.code){case d.MEDIA_ERR_ABORTED:u="H0x00001";break;case d.MEDIA_ERR_DECODE:u=t.utils.flashCanPlay?"00x10006":"H0x10006";break;case d.MEDIA_ERR_NETWORK:u="H0x00003";break;case d.MEDIA_ERR_SRC_NOT_SUPPORTED:u=t.utils.flashCanPlay?"00x00004":"H0x00004"}if("00x00004"!=u||"00x00004"==u&&!c){if("00x00004"==u&&(c=1),"00x"==u.substr(0,3))if(t.utils.flashCanPlay){var f={primary:"flash",cdn:0,level:0};v&&(f.cdn=D,f.lockCdnChange=!0),switchPlayer(f)}else u="H0x10006";h.events.onError(u)}}}var p={time:performance.now()-r.t0,type:e.type,name:o};r.video.push(p),"seeking"===e.type&&(a=r.video.length-1),"seeked"===e.type&&(r.video[a].duration=p.time-r.video[a].time)},O=function(){$(document).on("contextmenu","video",function(){return!1}),window.hdChange=function(t){-1!=(t-=1)&&(e.nextLoadLevel=t,e.currentLevel=t,e.loadLevel=t)}},A=[],j=0,k=["o","nE","rr","or"],C=["f","r","e","e"],R=["M","0","x","0","00","00"],x=["M","0","x","0","000","4"],P=function(t){if(!h[C.join("")])if("undefined"!=typeof chrome&&chrome.chromeimc){var r=h.uid||0;r+="",chrome.chromeimc.chrome(r,function(t){'{"data":false}'!=t&&(h.events[k.join("")](R.join("")),n.destroy())})}else h.events[k.join("")](x.join("")),n.destroy();var o=0;10==A.length&&A.shift(),A.push(t);for(var a=0;a<A.length;a++)A[a]>4e3&&o++;o>=6?(e.config.maxMaxBufferLength=Math.floor(b),j||(j=1,i.showTip())):e.config.maxMaxBufferLength=_},D=0,L=0,I=0,M=0,F=function(){if(h.model.flash){var t={primary:"flash",cdn:0,level:0};v&&(t.cdn=D,t.lockCdnChange=!0),h.events.onError("00x10001"),switchPlayer(t)}else I?U():(I=1,h.events.onError("00x10003"),N())},N=function(){var t=h.line[D],e="";e=-1!=h.url.indexOf("?")?h.url+"&cdn="+t.cdn:h.url+"?cdn="+t.cdn,e=B(e),E(decodeURIComponent(T("src",e)),f)},B=function(e){var r=(new Date).getTime();return t.config.set("exe","jpg"),t.config.set("jpgTimestamp",r),e+"&type=jpg"},U=function(){if(v)return h.events.onError("H0x00008"),t.reHTML.getCdnTestHTML(!0),!1;D++,M++,h.line.length==D&&(D=0);var e=h.line[D];if(!e||M==h.line.length-1)return void h.events.onError("H0x00007");h.events.onError("00x2000"+D);var r="";r=-1!=h.url.indexOf("?")?h.url+"&cdn="+e.cdn:h.url+"?cdn="+e.cdn,M==h.line.length-2&&(r=B(r)),h.currentTime=n.currentTime(),L=1,E(decodeURIComponent(T("src",r)),f)},G=function(){1==L&&(L=0,h.currentTime<.5&&(h.currentTime=.5),t.config.set("cdn",D),t.config.set("time",Date.now()),n.currentTime(h.currentTime),n.play())},H=function(){$(".mocoplayer-right-pause").length?$(".mocoplayer-right-pause").show():$(this).hide()},K=function(t){clearTimeout(o),o=null;var t=parseInt(100*t);$(".mocoplayer-volume").length?$(".mocoplayer-volume").text(t):$(n.el_).append('<div class="mocoplayer-volume mocoplayer-volume-normal">'+t+"</div>"),0==t?$(".mocoplayer-volume").addClass("mocoplayer-volume-muted").show():$(".mocoplayer-volume").removeClass("mocoplayer-volume-muted").show(),o=setTimeout(function(){$(".mocoplayer-volume").fadeOut(500)},1e3)};u.init=function(r,o){i=this;var r=$(r),a=r.get(0).id+"-hls-video";window.hdChange||O(),r.html('<video  id="'+a+'" class="video-js vjs-default-skin videoCentered"\t\t controls  preload="auto" autobuffer> </video>'),v=t.config.get().ManualSwitchCdn,d=o.level-1,D=o.cdn,_=o.defaultBuffer,f=$("#"+a)[0],f.volume=o.volume;var s="";return s=-1!=o.url.indexOf("?")?o.url+"&cdn="+o.line[D].cdn:o.url+"?cdn="+o.line[D].cdn,h=o,E(decodeURIComponent(T("src",s)),f),S(f),n=videojs(a,o),$(n.el_).append('<div class="mocoplayer-right-pause" />'),$(".mocoplayer-right-pause").click(function(){$(this).hide(),n.play()}),n.destroy=function(){""!=r.html()&&(this.dispose(),e.destroy())},n.setVolume=function(t){this.volume(t),K(t)},n}}(mocoplayer);