var mocoplayer=function(e,t){var n={url:"",image:"",volume:1,rate:1,title:"",showAd:!1,free:1,currentTime:0,events:{onReady:function(){},onPlay:function(){},onPause:function(){},onbeforeComplete:function(){},onComplete:function(){}},plugin:{}},n=$.extend(!0,n,t),r=function(e){var t=mocoplayer.config.get();$.ajax({url:"//moco.imooc.com/player/api/visitlog.html",data:{code:e,level:t.level,cdn:t.cdn,primary:"flash"==t.primary?1:0,rate:t.rate},cache:!1,dataType:"jsonp"})},i=function(){};return t.events&&t.events.onError&&(i=t.events.onError),n.events.onError=function(t){r(t);var n=mocoplayer.error(e,t);i(n)},r("00000000"),new mocoplayer.init(e,n)};!function(e){var t=e.utils=function(){};t.styleLoader=function(e,t){if(this.checkStyle(e))return void t();t=t||function(){};var n=document.getElementsByTagName("head")[0];if(n){var r=document.createElement("link");r.setAttribute("href",e),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css");var i=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||t()};r.onreadystatechange=i,r.onload=t,n.appendChild(r)}},t.scriptLoader=function(e,t){t=t||function(){};var n=document.getElementsByTagName("head")[0];if(n){var r=document.createElement("script");r.setAttribute("src",e),r.setAttribute("type","text/javascript");var i=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||t()};r.onreadystatechange=i,r.onload=t,n.appendChild(r)}},t.getScriptPath=function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var r=t[n].src;if(r&&r.indexOf(e)>=0)return r.substr(0,r.indexOf(e))}return""},t.checkStyle=function(e){for(var t=0,n=document.getElementsByTagName("link"),r=0;r<n.length;r++){n[r].href==e&&(t=1)}return t},t.isSafari=function(){var e=navigator.vendor,t=navigator.userAgent;return e&&e.indexOf("Apple")>-1&&t&&!t.match("CriOS")},t.isIOS=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},t.isIE=function(){var e=0;if(window.ActiveXObject||"ActiveXObject"in window){var t=navigator.userAgent;if(/MSIE \d+\.\d+/.test(t)){var n=/MSIE (\d+\.\d+)/.exec(t);e=n[1]}else if(t.match(/Trident/)&&t.match(/rv/)){var n=/rv:(\d+\.\d+)/.exec(t);e=n[1]}}return e},t.isEdge=function(){var e=0;return-1!=navigator.userAgent.indexOf("Edge")&&(e=1),e},t.hlsSupported=function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},t.ieTest=function(){var e=!1,n=navigator.userAgent;return t.isIE()&&(e=!0,t.isIE()>=11&&(n.indexOf("Windows NT 6.4")>-1||n.indexOf("Windows NT 10")>-1)&&(e=!1)),e},t.html5CanPlay=function(){var e=!1;navigator.userAgent.toLowerCase();if(document.createElement("video").canPlayType){e=!0;(navigator.userAgent.toLowerCase().match(/chrome\/(\d+)/)&&parseInt(RegExp.$1,10)<45||t.ieTest())&&(e=!1)}return e},t.flashCanPlay=function(){return swfobject.hasFlashPlayerVersion("11")},t.setCookie=function(e,t,n){var r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+t+";domain=imooc.com;path=/;expires="+r},t.getCookie=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},t.EventEmitter=function(){this.fns={},this.on=function(e,t,n){"function"==typeof t&&(n=t,t=this),this.fns[e]||(this.fns[e]=[]),n.ctx=t,this.fns[e].push(n)},this.emit=function(e,t){var n=this.fns[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)n[r].call(n[r].ctx,t)}},t.isFeesCourse=function(t){return t=t||e.config.get().feesCourse,t.indexOf(location.hostname)>=0},t.getProtocol=function(){return window.location.protocol}}(mocoplayer);var swfobject=function(){function e(){if(!V){try{var e=O.getElementsByTagName("body")[0].appendChild(h("span"));e.parentNode.removeChild(e)}catch(e){return}V=!0;for(var t=B.length,n=0;n<t;n++)B[n]()}}function t(e){V?e():B[B.length]=e}function n(e){if(typeof I.addEventListener!=A)I.addEventListener("load",e,!1);else if(typeof O.addEventListener!=A)O.addEventListener("load",e,!1);else if(typeof I.attachEvent!=A)y(I,"onload",e);else if("function"==typeof I.onload){var t=I.onload;I.onload=function(){t(),e()}}else I.onload=e}function r(){H?i():o()}function i(){var e=O.getElementsByTagName("body")[0],t=h($);t.setAttribute("type",L);var n=e.appendChild(t);if(n){var r=0;!function(){if(typeof n.GetVariable!=A){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),X.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,o()}()}else o()}function o(){var e=_.length;if(e>0)for(var t=0;t<e;t++){var n=_[t].id,r=_[t].callbackFn,i={success:!1,id:n};if(X.pv[0]>0){var o=v(n);if(o)if(!g(_[t].swfVersion)||X.wk&&X.wk<312)if(_[t].expressInstall&&l()){var u={};u.data=_[t].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));for(var f={},d=o.getElementsByTagName("param"),p=d.length,m=0;m<p;m++)"movie"!=d[m].getAttribute("name").toLowerCase()&&(f[d[m].getAttribute("name")]=d[m].getAttribute("value"));s(u,f,n,r)}else c(o),r&&r(i);else b(n,!0),r&&(i.success=!0,i.ref=a(n),r(i))}else if(b(n,!0),r){var h=a(n);h&&typeof h.SetVariable!=A&&(i.success=!0,i.ref=h),r(i)}}}function a(e){var t=null,n=v(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=A)t=n;else{var r=n.getElementsByTagName($)[0];r&&(t=r)}return t}function l(){return!W&&g("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function s(e,t,n,r){W=!0,S=r||null,E={success:!1,id:n};var i=v(n);if(i){"OBJECT"==i.nodeName?(x=u(i),T=null):(x=i,T=n),e.id=N,(typeof e.width==A||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==A||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),O.title=O.title.slice(0,47)+" - Flash Player Installation";var o=X.ie&&X.win?"ActiveX":"PlugIn",a="MMredirectURL="+I.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+O.title;if(typeof t.flashvars!=A?t.flashvars+="&"+a:t.flashvars=a,X.ie&&X.win&&4!=i.readyState){var l=h("div");n+="SWFObjectNew",l.setAttribute("id",n),i.parentNode.insertBefore(l,i),i.style.display="none",function(){4==i.readyState?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)}()}f(e,t,n)}}function c(e){if(X.ie&&X.win&&4!=e.readyState){var t=h("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=h("div");if(X.win&&X.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName($)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,o=0;o<i;o++)1==r[o].nodeType&&"PARAM"==r[o].nodeName||8==r[o].nodeType||t.appendChild(r[o].cloneNode(!0))}}return t}function f(e,t,n){var r,i=v(n);if(X.wk&&X.wk<312)return r;if(i)if(typeof e.id==A&&(e.id=n),X.ie&&X.win){var o="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?o+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(o+=" "+a+'="'+e[a]+'"'));var l="";for(var s in t)t[s]!=Object.prototype[s]&&(l+='<param name="'+s+'" value="'+t[s]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+l+"</object>",D[D.length]=e.id,r=v(e.id)}else{var c=h($);c.setAttribute("type",L);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var f in t)t[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&d(c,f,t[f]);i.parentNode.replaceChild(c,i),r=c}return r}function d(e,t,n){var r=h("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function p(e){var t=v(e);t&&"OBJECT"==t.nodeName&&(X.ie&&X.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=v(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function v(e){var t=null;try{t=O.getElementById(e)}catch(e){}return t}function h(e){return O.createElement(e)}function y(e,t,n){e.attachEvent(t,n),R[R.length]=[e,t,n]}function g(e){var t=X.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function w(e,t,n,r){if(!X.ie||!X.mac){var i=O.getElementsByTagName("head")[0];if(i){var o=n&&"string"==typeof n?n:"screen";if(r&&(k=null,j=null),!k||j!=o){var a=h("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),k=i.appendChild(a),X.ie&&X.win&&typeof O.styleSheets!=A&&O.styleSheets.length>0&&(k=O.styleSheets[O.styleSheets.length-1]),j=o}X.ie&&X.win?k&&typeof k.addRule==$&&k.addRule(e,t):k&&typeof O.createTextNode!=A&&k.appendChild(O.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(z){var n=t?"visible":"hidden";V&&v(e)?v(e).style.visibility=n:w("#"+e,"visibility:"+n)}}function C(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=A?encodeURIComponent(e):e}var x,T,S,E,k,j,A="undefined",$="object",M="Shockwave Flash",L="application/x-shockwave-flash",N="SWFObjectExprInst",P="onreadystatechange",I=window,O=document,F=navigator,H=!1,B=[r],_=[],D=[],R=[],V=!1,W=!1,z=!0,X=function(){var e=typeof O.getElementById!=A&&typeof O.getElementsByTagName!=A&&typeof O.createElement!=A,t=F.userAgent.toLowerCase(),n=F.platform.toLowerCase(),r=/win/.test(n?n:t),i=/mac/.test(n?n:t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,l=[0,0,0],s=null;if(typeof F.plugins!=A&&typeof F.plugins[M]==$)!(s=F.plugins[M].description)||typeof F.mimeTypes!=A&&F.mimeTypes[L]&&!F.mimeTypes[L].enabledPlugin||(H=!0,a=!1,s=s.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(s.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(s.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(s)?parseInt(s.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof I.ActiveXObject!=A)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");c&&(s=c.GetVariable("$version"))&&(a=!0,s=s.split(" ")[1].split(","),l=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}catch(e){}return{w3:e,pv:l,wk:o,ie:a,win:r,mac:i}}();(function(){X.w3&&((typeof O.readyState!=A&&"complete"==O.readyState||typeof O.readyState==A&&(O.getElementsByTagName("body")[0]||O.body))&&e(),V||(typeof O.addEventListener!=A&&O.addEventListener("DOMContentLoaded",e,!1),X.ie&&X.win&&(O.attachEvent(P,function(){"complete"==O.readyState&&(O.detachEvent(P,arguments.callee),e())}),I==top&&function(){if(!V){try{O.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),X.wk&&function(){if(!V)/loaded|complete/.test(O.readyState)?e():setTimeout(arguments.callee,0)}(),n(e)))})(),function(){X.ie&&X.win&&window.attachEvent("onunload",function(){for(var e=R.length,t=0;t<e;t++)R[t][0].detachEvent(R[t][1],R[t][2]);for(var n=D.length,r=0;r<n;r++)p(D[r]);for(var i in X)X[i]=null;X=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(X.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,_[_.length]=i,b(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(X.w3)return a(e)},embedSWF:function(e,n,r,i,o,a,c,u,d,p){var m={success:!1,id:n};X.w3&&!(X.wk&&X.wk<312)&&e&&n&&r&&i&&o?(b(n,!1),t(function(){r+="",i+="";var t={};if(d&&typeof d===$)for(var v in d)t[v]=d[v];t.data=e,t.width=r,t.height=i;var h={};if(u&&typeof u===$)for(var y in u)h[y]=u[y];if(c&&typeof c===$)for(var w in c)typeof h.flashvars!=A?h.flashvars+="&"+w+"="+c[w]:h.flashvars=w+"="+c[w];if(g(o)){var C=f(t,h,n);t.id==n&&b(n,!0),m.success=!0,m.ref=C}else{if(a&&l())return t.data=a,void s(t,h,n,p);b(n,!0)}p&&p(m)})):p&&p(m)},switchOffAutoHideShow:function(){z=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(e,t,n){return X.w3?f(e,t,n):void 0},showExpressInstall:function(e,t,n,r){X.w3&&l()&&s(e,t,n,r)},removeSWF:function(e){X.w3&&p(e)},createCSS:function(e,t,n,r){X.w3&&w(e,t,n,r)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=O.location.search||O.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return C(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return C(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=v(N);e&&x&&(e.parentNode.replaceChild(x,e),T&&(b(T,!0),X.ie&&X.win&&(x.style.display="block")),S&&S(E)),W=!1}}}}();!function(e,t){e.store=function(){var e,t={},n="undefined"!=typeof window?window:global,r=n.document,i="localStorage";if(t.disabled=!1,t.version="1.3.20",t.set=function(e,t){},t.get=function(e,t){},t.has=function(e){return void 0!==t.get(e)},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){null==r&&(r=n,n=null),null==n&&(n={});var i=t.get(e,n);r(i),t.set(e,i)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return i in n&&n[i]}catch(e){return!1}}())e=n[i],t.set=function(n,r){return void 0===r?t.remove(n):(e.setItem(n,t.serialize(r)),r)},t.get=function(n,r){var i=t.deserialize(e.getItem(n));return void 0===i?r:i},t.remove=function(t){e.removeItem(t)},t.clear=function(){e.clear()},t.getAll=function(){var e={};return t.forEach(function(t,n){e[t]=n}),e},t.forEach=function(n){for(var r=0;r<e.length;r++){var i=e.key(r);n(i,t.get(i))}};else if(r&&r.documentElement.addBehavior){var o,a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),a.close(),o=a.w.frames[0].document,e=o.createElement("div")}catch(t){e=r.createElement("div"),o=r.body}var l=function(n){return function(){var r=Array.prototype.slice.call(arguments,0);r.unshift(e),o.appendChild(e),e.addBehavior("#default#userData"),e.load(i);var a=n.apply(t,r);return o.removeChild(e),a}},s=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),c=function(e){return e.replace(/^d/,"___$&").replace(s,"___")};t.set=l(function(e,n,r){return n=c(n),void 0===r?t.remove(n):(e.setAttribute(n,t.serialize(r)),e.save(i),r)}),t.get=l(function(e,n,r){n=c(n);var i=t.deserialize(e.getAttribute(n));return void 0===i?r:i}),t.remove=l(function(e,t){t=c(t),e.removeAttribute(t),e.save(i)}),t.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=t.length-1;n>=0;n--)e.removeAttribute(t[n].name);e.save(i)}),t.getAll=function(e){var n={};return t.forEach(function(e,t){n[e]=t}),n},t.forEach=l(function(e,n){for(var r,i=e.XMLDocument.documentElement.attributes,o=0;r=i[o];++o)n(r.name,t.deserialize(e.getAttribute(r.name)))})}try{var u="__storejs__";t.set(u,u),t.get(u)!=u&&(t.disabled=!0),t.remove(u)}catch(e){t.disabled=!0}return t.enabled=!t.disabled,t}()}(this),function(e){var t={M0x00000:"视频播放器错误。异常反馈群：230569067",M0x00001:"视频地址错误。异常反馈群：230569067",M0x00002:"can not found container。异常反馈群：230569067",M0x00003:"未安装Flash或Flash版本过低，为了更好的播放体验，建议安装最新版chrome或firefox浏览器 <a href='//www.imooc.com/static/html/browser.html'>下载浏览器</a>",M0x00004:"请使用慕课网浏览器播放视频。异常反馈群：230569067",H0x00001:"You aborted the video playback",H0x00003:"A network error caused the video download to fail part-way。异常反馈群：230569067",H0x00004:"视频解析失败，推荐使用最新版chrome或者firefox浏览器观看视频。异常反馈群：230569067",H0x00007:"CDN连接失败，请联系慕课网。异常反馈群：230569067",H0x00008:"CDN连接失败，请重新选择CDN线路。异常反馈群：230569067",H0x10000:"视频播放器错误：HlsError。异常反馈群：230569067",H0x10001:"LoadError：视频资源加载错误。异常反馈群：230569067",H0x10002:"ParsingError：视频解析错误。异常反馈群：230569067",H0x10003:"视频加载失败。异常反馈群：230569067",H0x10004:"您使用的火狐浏览器没有开启MediaSource。请在浏览器栏输入about:config做如下设置<br>media.mediasource.enabled=true<br>media.mediasource.mp4.enabled=true<br>media.mediasource.whitelist=false",H0x10005:"您的浏览器不支持MediaSourceExtension / MP4 mediasource，建议安装最新版chrome或firefox浏览器 <a href='//www.imooc.com/static/html/browser.html'>下载浏览器</a>",H0x10006:"播放器报错。异常反馈群：230569067",H0x10007:"课程正在准备中, 请稍后刷新试试 ^_^。异常反馈群：230569067",F0x00007:"CDN连接失败，请联系慕课网。异常反馈群：230569067",F0x10002:"ParsingError：视频解析错误。异常反馈群：230569067",F0x00001:"参数错误",F0x00002:"没有域名",F0x00008:"CDN连接失败，请重新选择CDN线路。异常反馈群：230569067"};e.error=function(e,n){if("object"==typeof n){if(1==n.length&&"00x"==n[0].substr(0,3))return n}else if("00x"==n.substr(0,3))return n;var r=$(e);if(r.length){var i=r.width(),o=r.height(),a=n,l=[];if("object"==typeof n){a=n.join(",");for(var s=0;s<n.length;s++)t[n[s]]&&l.push(t[n[s]]);0==l.length&&l.push(t.M0x00000)}else l.push(t[a]||t.M0x00000);$(".mocoplayer-error").length&&$(".mocoplayer-error").remove(),$(e).prepend('<div class="mocoplayer-error" style="width:'+i+"px;height:"+o+'px">\t\t\t\t\t\t\t\t\t<div class="mocoplayer-error-content">\t\t\t\t\t\t\t\t\t\t<span>'+a+"</span>"+l.join("<br>")+'<br><a href="//www.imooc.com/help" target="_blank">常见问题</a>　<a href="//www.imooc.com/user/feedback" target="_blank">意见反馈</a>　<a href="javascript:;" class="acdn" onclick="mocoplayer.reHTML.getCdnTestHTML(true);" target="_blank">选择CDN线路</a></div>\t\t\t\t\t\t\t\t</div>')}return n}}(mocoplayer),function(e){var t={version:"3.0.6.2",playbackRates:["0.75","1.0","1.25","1.5","2.0"],line:[{name:"线路1",cdn:"aliyun",disabled:!1},{name:"线路2",cdn:"letv",disabled:!1},{name:"线路3",cdn:"aliyun1",disabled:!1},{name:"错误上报",cdn:"error",disabled:!0}],levels:[{id:"L",name:"普清",disabled:!1},{id:"M",name:"高清",disabled:!1},{id:"H",name:"超清",disabled:!1}],level:e.utils.isFeesCourse(["coding.imooc.com","class.imooc.com"])?3:2,cdn:2,defaultBuffer:e.utils.isFeesCourse(["coding.imooc.com","class.imooc.com"])?60:30,model:{flash:e.utils.flashCanPlay(),html5:e.utils.html5CanPlay()},exe:"m3u8",feesCourse:["coding.imooc.com","class.imooc.com"]};e.config={playerSrc:{html5:e.utils.getScriptPath("mocoplayer.js")+"mocoplayer.html5.js?v="+t.version,css:e.utils.getScriptPath("mocoplayer.js")+"mocoplayer.css?v="+t.version,flash:e.utils.getScriptPath("mocoplayer.js")+"mocoplayer.flash.js?v="+t.version,swf:e.utils.getScriptPath("mocoplayer.js")+"mocoplayer.swf?v="+t.version,ios:e.utils.getScriptPath("mocoplayer.js")+"mocoplayer.ios.js?v="+t.version,iosnoplay:e.utils.getScriptPath("mocoplayer.js")+"iosnoplay.jpg?v="+t.version},levelToInt:function(e){for(var n=0,r=0;r<t.levels.length;r++)t.levels[r].id==e&&(n=r);return n+1},levelToString:function(e){var n="A";return t.levels[e]&&(n=t.levels[e].id),n},get:function(){var e=store.get("mocoplayer_conf")||{level:t.level};if(e.level?(isNaN(e.level)||e.level>3||e.level<0?e.level=1:e.level=parseInt(e.level),0===e.level&&(e.level=t.level)):e.level=t.level,e.cdn&&(isNaN(e.cdn)||e.cdn>t.line.length-1||e.cdn<0?e.cdn=t.cdn:e.cdn=parseInt(e.cdn)),e.primary&&"html5"!=e.primary&&"flash"!=e.primary&&(e.primary="html5"),e.rate){for(var n=0,r=0;r<t.playbackRates.length;r++)e.rate==t.playbackRates[r]&&(n=1);n||(e.rate=1)}return $.extend(t,e)},set:function(e,t){var n=store.get("mocoplayer_conf")||{};n[e]=t,store.set("mocoplayer_conf",n)},rm:function(e){var t=store.get("mocoplayer_conf")||{};delete t[e],store.set("mocoplayer_conf",t)},setLevelsState:function(e){for(var n=t.levels,r=0;r<n.length;r++)n[r].id==e&&(t.levels[r].disabled=!0)}}}(mocoplayer),function(e){e.reHTML={getCdnTestHTML:function(t){var n=store.get("mocoplayer_conf")||{},r="";if(n.ManualSwitchCdn)var r=n.cdn||0;var i=['<div class="switch-cdn-line-wrap" id="switchCdnLineWrap">','<iframe class="report-wrap" src="/mocoplayer/report2.html?cdn='+r+'"></iframe>',"</div>"].join("");return t?$("#switchCdnLineWrap")[0]?($("#switchCdnLineWrap").remove(),!1):void $(e.container).css("position","relative").append(i):i},switchHtmlPlayerBut:function(t){if(t)return void $(".switch-html-button").remove();var n=function(){var t=$(e.container).height()/2+60;$(".switch-html-button").css("top",t)};$(e.container).prepend('<div class="switch-html-button">切换到html播放器</div>'),n(),$(window).on("resize",n),$(".switch-html-button").on("click",function(){e.config.set("primary","html5"),window.location.reload(!0)})}}}(mocoplayer),function(e){e.init=function(t,n){var r=this,i=0;if(this.container=t,e.container=t,""==n.url)return void n.events.onError("M0x00001");if(!$(t).length)return void n.events.onError("M0x00002");var o=e.utils.getCookie("mocoplayer_cdn"),a=e.utils.getCookie("mocoplayer_exe");o&&("auto"==o?(e.config.set("ManualSwitchCdn",0),e.config.rm("cdn")):(e.config.set("cdn",o),e.config.set("ManualSwitchCdn",1)),e.config.set("cdntest",1),e.utils.setCookie("mocoplayer_cdn","0",-1)),a&&("jpg"==a?e.config.set("exe","jpg"):e.config.set("exe","ts"),e.utils.setCookie("mocoplayer_exe","0",-1)),e.utils.isFeesCourse()||e.config.setLevelsState("H");var l=e.config.get(),s=(new Date).getTime();"jpg"==l.exe&&(l.jpgTimestamp?s-l.jpgTimestamp>=36e5&&(e.config.set("jpgTimestamp",""),e.config.set("exe","ts")):e.config.set("jpgTimestamp",s)),"1"==l.tip&&(l.tipTimestamp?s-l.tipTimestamp>=2592e6&&(e.config.set("tipTimestamp",""),e.config.set("tip","0")):e.config.set("tipTimestamp",s));var c=store.get("mocoplayer_conf");if(c&&Number(c.cdn)>=0)if(c.cdnTimestamp){if(s-c.cdnTimestamp>=6048e5){var u,f={},d=["cdn","ManualSwitchCdn","cdnTimestamp","cdntest"];for(u in c)d.indexOf(u)<0&&(f[u]=c[u]);store.set("mocoplayer_conf",f)}}else e.config.set("cdnTimestamp",s);"flash"==l.primary?l.flashTimestamp?s-l.flashTimestamp>=432e5&&(e.config.set("flashTimestamp",""),e.config.set("primary","html5")):e.config.set("flashTimestamp",s):l.flashTimestamp&&e.config.set("flashTimestamp","");var l=e.config.get();$.extend(n,l),"jpg"==n.exe&&(-1!=n.url.indexOf("?")?n.url=n.url+"&type=jpg":n.url=n.url+"?type=jpg"),l.ManualSwitchCdn&&(n.lockCdnChange=1),0==l.level&&e.config.set("level",e.utils.isFeesCourse()?3:2);var p=function(t){var n=$(t.target);if(!n.is("textarea")&&!n.is("input")&&!n.is("object")){if(r.getPlayState&&"complete"==r.getPlayState())return;switch(t.keyCode){case 32:r.getPlayState&&("playing"==r.getPlayState()?r.pause():r.play3(),t.preventDefault());break;case 37:if(!e.utils.isEdge()&&r.getCurrentTime){var i=r.getCurrentTime()||0;i-=5,i>=0&&r.seek(i)}break;case 39:if(e.utils.isEdge())t.preventDefault();else if(r.getCurrentTime){var i=r.getCurrentTime()||0;i+=5,r.getDuration&&i<r.getDuration()-1&&r.seek(i)}break;case 70:r.fullscreen&&r.fullscreen();break;case 38:r.isFullscreen&&r.isFullscreen()&&r.volume(.1);break;case 40:r.isFullscreen&&r.isFullscreen()&&r.volume(-.1)}}},m=function(){if(!n.model.html5||"flash"==n.primary&&n.model.flash){if(!n.model.flash)return n.events.onError("M0x00003"),!1;e.flash?y():e.utils.scriptLoader(e.config.playerSrc.flash,function(){y()})}else e.html5?v():e.utils.scriptLoader(e.config.playerSrc.html5,function(){v()});$(document).unbind("keydown"),$(document).on("keydown",p)},v=function(){var o=e.html5.init.call(r,t,n);o.ready(function(){n.events.onReady.call(r)}),o.playbackRate(n.rate),r.onPlay=function(){i=0,$(".mocoplayer-error").length&&$(".mocoplayer-error").remove(),n.events.onPlay.call(r)},r.onPause=function(){n.events.onPause.call(r)},r.onComplete=function(){o.isFullscreen()&&o.exitFullscreen(),i=1,n.events.onComplete.call(r)},r.isFullscreen=function(){return o.isFullscreen()},r.onRateChange=function(){e.config.set("rate",o.playbackRate())},r.volumeChange=function(){n.volume=o.volume(),e.config.set("volume",n.volume)},r.volume=function(e){var t=Math.round(10*o.volume())/10+e;t<0&&(t=0),t>1&&(t=1),o.setVolume(t)},r.getDuration=function(){return o.duration()},r.play=function(){o.play()},r.play3=function(){o.play()},r.pause=function(){o.pause()},r.fullscreen=function(){o.requestFullscreen()},r.seek=function(e){o.currentTime(e)},r.playbackRate=function(e){o.playbackRate(e)},r.getCurrentTime=function(){return o.currentTime()},r.getPlayType=function(){return"html5"},r.getPlayRate=function(){return o.playbackRate()},r.getPlayState=r.getState=function(){var e=o.paused()?"paused":"playing";return i&&(e="complete"),e},r.destroy=function(){o.destroy(),o=null,$(t).html("")}},h=function(){e.ios.init.call(r,t,n)},y=function(){var o=e.flash.init.call(r,t,n);r.play=function(){o.play2()},r.play3=function(){o.play3()},r.pause=function(){o.pause()},r.seek=function(e){o.seek(e)},r.getCurrentTime=function(){return o.getCurrentTime()},r.getPlayType=function(){return"flash"},r.getPlayState=r.getState=function(){var e=o.getState();return i&&(e="complete"),e},r.onPlay=function(){i=0,$(".mocoplayer-error").length&&$(".mocoplayer-error").remove(),e.reHTML.switchHtmlPlayerBut(!0)},r.onComplete=function(){o.blur(),i=1,n.events.onComplete.call(r)},r.onPause=function(){n.events.onPause.call(r)},r.volumeChange=function(t){n.volume=t,e.config.set("volume",t)},r.destroy=function(){o.destroy(),$(t).html("")}};window.switchPlayer=function(t){e.config.set("cdn",t.cdn),e.config.set("level",t.level),e.config.set("primary",t.primary),"flash"==t.primary?(r.switchPlayer("flash",t),e.config.set("flashTimestamp",(new Date).getTime())):window.hdChange(t.level)},this.switchPlayer=function(t,i){var o=r.getCurrentTime();n.primary=t,n.cdn=i.cdn,n.rate=e.config.get().rate,n.currentTime=o,n.level=i.level,i.lockCdnChange&&(n.lockCdnChange=i.lockCdnChange),r.pause(),r.destroy(),m()},this.showTip=function(){var t=e.config.get();if(!$(".js-mocoplayer-tip").length&&!t.cdntest&&1!=t.tip){n.events.onError("00x10002");var r=$(this.container);"static"==r.css("position")&&r.css("position","relative"),r.append('<div class="mocoplayer-tip js-mocoplayer-tip">系统检测到您的网速缓慢，点击<a href="javascript:void(0);">线路检测</a>，自动选择合适线路<span class="mocoplayer-tip-close imv2-close"><span></div>'),$(".js-mocoplayer-tip a").one("click",function(){e.reHTML.getCdnTestHTML(!0),e.config.set("tip",1)}),$(".mocoplayer-tip-close").one("click",function(){$(".js-mocoplayer-tip").remove(),e.config.set("tip",1)})}};var g=function(){if(n.model.html5){if(!e.utils.hlsSupported()){if(!n.model.flash)return e.utils.isIOS()?void e.utils.scriptLoader(e.config.playerSrc.ios,function(){h()}):void(-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?n.events.onError("H0x10004"):n.events.onError("H0x10005"));n.primary="flash",n.model.html5=!1,-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?n.events.onError("00x10004"):n.events.onError("00x10005")}e.utils.isSafari()&&n.currentTime<.5&&(n.currentTime=.5)}var r=$(t).get(0).id+"-mocoplayer";t.html('<div id="'+r+'" class="mocoplayer" />'),t="#"+r,m()};e.utils.styleLoader(e.config.playerSrc.css,function(){e.styleComplete=1,g()})}}(mocoplayer);