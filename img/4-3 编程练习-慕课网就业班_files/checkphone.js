define("common/js/checkphone",["require","exports","module"],function(){var e='<div class="rl-modal"><form id="signup-form" class="rl-modal-body" autocomplete="off">    <div class="rl-modal-title"><h2>小慕提示</h2><p>非中国大陆用户输入手机号码时请选取正确区域前缀，如：中国台湾：+886********</p></div>    <div class="rlf-group pr">    <input type="text" value="" maxlength="37" name="phone" autocomplete="off" class="ipt js-phone" placeholder="请输入手机号">    <p class="rlf-tip-wrap errorHint color-red" data-error-hint="请输入正确的手机号"></p>    </div>    <div class="rlf-group pr phoneVerityBox">        <input type="text" id="js-phoneVerity"  data-minlength="4" class="ipt js-code" placeholder="请输入短信验证码" maxlength="4" autocomplete="off">        <p class="reSend pa active js-checkcode-box">        <span class="js-check-send">获取验证码</span></p>        <p class="rlf-tip-wrap errorHint color-red" data-error-hint="请输入正确验证码"></p>    </div>    <div class="rlf-group clearfix">    <input type="button" value="提交" hidefocus="true" class="moco-btn moco-btn-red moco-btn-lg btn-full js-checkphone-submit">     <p class="rlf-tip-globle color-red" id="signin-globle-error"></p>    </div>    </form></div>',o=function(e){var o=$(".js-phone").val(),n=W.Validater.validateRules["require-mobile-phone"].regex;return n.lastIndex=0,o.length&&(0==o.indexOf("+")||n.test(o))?void $.ajax({url:"/passport/user/getphonelogincode",data:{phone:o,noverify:1,typecode:e,type:0},method:"post",dataType:"json",success:function(e){10001==e.status?r():$(".js-phone").parents(".rlf-group").find(".rlf-tip-wrap").html(e.msg)},error:function(){$(".js-phone").parents(".rlf-group").find(".rlf-tip-wrap").html("服务错误，稍后重试")}}):void $(".js-phone").parents(".rlf-group").find(".rlf-tip-wrap").html("手机号格式错误")},n=0,r=function(){var e=60,o="",r=$(".js-phone").val();-1==r.indexOf("+")&&(o='<span class="voicecode-send js-check-voice-send"><i class="imv2-vol_up"></i>语音接听</span>'),clearInterval(n);var t=$(".js-checkcode-box");t.removeClass("active").html("重新发送 "+e),n=setInterval(function(){t.removeClass("active").html("重新发送 "+e),0==e?(t.addClass("active"),t.html('<span class="js-check-send">重新发送</span>'+o),clearInterval(n)):t.removeClass("active").html("重新发送 "+e),e--},1e3)},t=0,l=function(){if(!t){$(".js-checkphone-submit").text("正在提交...");var e=$(".js-phone").val(),o=$(".js-code").val(),n=W.Validater.validateRules["require-mobile-phone"].regex;if(n.lastIndex=0,!e.length)return void $(".js-phone").parents(".rlf-group").find(".rlf-tip-wrap").html("手机号格式错误");if(0!=e.indexOf("+")&&!n.test(e))return void $(".js-phone").parents(".rlf-group").find(".rlf-tip-wrap").html("手机号格式错误");if(4!=o.length)return void $(".js-code").parents(".rlf-group").find(".rlf-tip-wrap").html("验证码输入错误");t=1,$.ajax({url:"/passport/user/bindphone",dataType:"json",data:{phone:e,code:o,noverify:1},success:function(e){10001==e.status?window.location.reload():$("#signin-globle-error").html(e.msg)},error:function(){$("#signin-globle-error").html("系统出错，请稍后重试！")},complete:function(){$(".js-checkphone-submit").text("提交")}})}},s=function(){$(document).on("blur",".js-phone",function(){$(".js-phone").parents(".rlf-group").find(".rlf-tip-wrap").html("");var e=$(".js-phone").val(),o=W.Validater.validateRules["require-mobile-phone"].regex;return o.lastIndex=0,e.length&&(0==e.indexOf("+")||o.test(e))?void 0:void $(".js-phone").parents(".rlf-group").find(".rlf-tip-wrap").html("手机号格式错误")}).on("click"," .js-check-send",function(){o(0)}).on("click"," .js-check-voice-send",function(){o(1)}).on("click",".js-checkphone-submit",l)},i=function(){if("undefined"!=typeof phone_invalid&&phone_invalid){{$.dialog(e,{modal:!0})}s()}};i()});