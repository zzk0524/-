define("lesson/js/common",["require"],function(n){function e(n){var e=80,t=null,i=this;this.x=0,this.leftPannel=$(n.left),this.rightPannel=$(n.right),this.dragger=$(n.dragger),this.container=$(n.container),this.init=function(){this.dragger.on("mousedown",function(r){i.x=r.clientX,i.lw=i.leftPannel.width(),i.rw=i.rightPannel.width(),i.mw=i.container.width(),i.minw={l:i.leftPannel.data("minw"),r:i.rightPannel.data("minw")},i.container.css({"user-select":"none"}).attr("unselectable","on"),"function"==typeof n.start&&n.start(),document.onmousemove=function(r){var o=r.clientX-i.x,a=i.lw;o&&(a=Math.max(i.minw.l,a+o),a=Math.min(a,i.mw-i.minw.r),"function"==typeof n.resize&&n.resize(),i.leftPannel.width(a),i.rightPannel.css("left",a),n.move&&n.move(),t&&clearTimeout(t),t=setTimeout(function(){n.stop&&n.stop()},e))},document.onmouseup=function(){i.x=0,i.container.css({"user-select":"inherit"}).removeAttr("unselectable"),document.onmousemove=document.onmouseup=null,n.stop&&n.stop()}})},this.init()}function t(n,e){var n=n,e=e||{},t=e.curr||0,i=e.menu||".menu",r=e.event||"click",o=e.block||"block",a=e.currClass||"active",c=$(n).find(i),s=$(n).find(o);c.each(function(n){$(this).attr("data-index",n)}),$(n).find(i).eq(t).show(),$(n).find(o).eq(t).show(),$(n).on(r,i,function(){l($(this))});var l=function(n){var e=n.attr("data-index");c.removeClass(a),n.addClass(a),s.hide().eq(e).show()}}var i={},r=jQuery({});i={on:function(){r.on.apply(r,arguments)},removeEvent:function(){r.off.apply(r,arguments)},emit:function(){r.trigger.apply(r,arguments)},escapeHtml:function(n){var e=$("<div/>").text(n);return e.html()},unescapeHtml:function(n){var e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return n.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(n,t){return e[t]})},isOrcodeBand:!1,RenderQrcodeTpl:function(n){var e=new Date;return this.isOrcodeBand||this.refreshOrcode(),['<div class="verify-box js-verify-box-wrap clearfix">','<input type="text" class="verify-text" placeholder="请输入验证码" />','<img data-src="'+n+'" src="'+n+"&v="+e.getTime()+'" class="codeimg js-codeimg" />','<i class="imv2-refresh js-imv2-refresh"></i>','<div class="errtip"></div>',"</div>"].join("")},refreshOrcode:function(){this.isOrcodeBand=!0,$("#lessonwrap").on("click",".js-codeimg",function(){n($(this))}),$("#lessonwrap").on("click",".js-imv2-refresh",function(){n($(this))});var n=function(n){var e=n.parents(".js-verify-box-wrap").find(".codeimg");if(e[0]){var t=new Date,i=e.attr("data-src");e.attr("src",i+"&v="+t.getTime())}}},Pannel:{show:function(){"video"==App.MEDIAMODE&&($("#lessonwrap").removeClass("min"),i.emit("lesson.resize"))},hide:function(){"video"==App.MEDIAMODE&&($("#lessonwrap").addClass("min"),i.emit("lesson.resize"))},isPannelShow:function(){return $("#lessonRight").is(":visible")},PannelNum:0,wenda:{show:function(){i.Pannel.isPannelShow()&&($("#qa-pannel").css("z-index",100+i.Pannel.PannelNum).addClass("active"),i.Pannel.PannelNum++,i.Pannel.note.hide(),i.Pannel.show())},hide:function(){$("#qa-pannel").removeClass("z-index",0).removeClass("active"),i.Pannel.PannelNum--,i.Pannel.PannelNum<=0&&i.Pannel.hide()}},note:{show:function(){i.Pannel.isPannelShow()&&($("#note-pannel").css("z-index",100+i.Pannel.PannelNum).addClass("active"),i.Pannel.PannelNum++,i.Pannel.wenda.hide(),i.Pannel.show())},hide:function(){$("#note-pannel").removeClass("z-index",0).removeClass("active"),i.Pannel.PannelNum--,i.Pannel.PannelNum<=0&&i.Pannel.hide()}}},converType:function(n){switch(n){case 0:return"A";case 1:return"B";case 2:return"C";case 3:return"D";case 4:return"E";case 5:return"F"}},isArray:function(n){return"[object Array]"===Object.prototype.toString.apply(n)}},i.idrag={create:function(n){return new e(n)}},i.tabSlider={create:function(n,e){return new t(n,e)}},$.hash=function(n,e){function t(n){return"string"==typeof n||"[object String]"===Object.prototype.toString.call(n)}if(t(n)&&""!=n){var i=new RegExp("(&"+n+"=[^&]*)|(\\b"+n+"=[^&]*&)|(\\b"+n+"=[^&]*)","ig"),r=new RegExp("&*\\b"+n+"=[^&]*","i");if("undefined"==typeof e){var o=location.hash.match(r);return o?decodeURIComponent($.trim(o[0].split("=")[1])):null}if(null===e)location.hash=location.hash.replace(i,"");else{e+="";var a=location.hash.replace(i,"");a+=(-1!=a.indexOf("=")?"&":"")+n+"="+encodeURIComponent(e),location.hash=a}}},function(n,e,t){function i(n){return n=n||location.href,"#"+n.replace(/^[^#]*#?(.*)$/,"$1")}var r,o="hashchange",a=document,c=n.event.special,s=a.documentMode,l="on"+o in e&&(s===t||s>7);n.fn[o]=function(n){return n?this.bind(o,n):this.trigger(o)},n.fn[o].delay=50,c[o]=n.extend(c[o],{setup:function(){return l?!1:void n(r.start)},teardown:function(){return l?!1:void n(r.stop)}}),r=function(){function r(){var t=i(),a=p(u);t!==u?(d(u=t,a),n(e).trigger(o)):a!==u&&(location.href=location.href.replace(/#.*/,"")+a),c=setTimeout(r,n.fn[o].delay)}var c,s={},u=i(),f=function(n){return n},d=f,p=f;return s.start=function(){c||r()},s.stop=function(){c&&clearTimeout(c),c=t},n.support.boxModel&&n.support.leadingWhitespace&&!l&&function(){var e,t;s.start=function(){e||(t=n.fn[o].src,t=t&&t+i(),e=n('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){t||d(i()),r()}).attr("src",t||"javascript:0").insertAfter("body")[0].contentWindow,a.onpropertychange=function(){try{"title"===event.propertyName&&(e.document.title=a.title)}catch(n){}})},s.stop=f,p=function(){return i(e.location.href)},d=function(t,i){var r=e.document,c=n.fn[o].domain;t!==i&&(r.title=a.title,r.open(),c&&r.write('<script>document.domain="'+c+'"</script>'),r.close(),e.location.hash=t)}}(),s}()}(jQuery,window);var o=function(){function e(e,t){var i=e,r=i.find(".scroller"),o=i.height(),a=r.height();return i.hasClass("ps-container")?void setTimeout(function(){var n=i.scrollTop()||0;i[0].scrollTop=t===!0?0:n,i.perfectScrollbar("update")},0):void(a>o&&n(["scrollbar"],function(){setTimeout(function(){i.perfectScrollbar({wheelSpeed:70,wheelPropagation:!1}),"function"==typeof t&&t()},0)}))}function t(n){n.perfectScrollbar&&n.perfectScrollbar("destroy"),n.removeClass("ps-container")}function i(n){n.perfectScrollbar&&n.perfectScrollbar("update")}return{init:e,destroy:t,update:i}}();i.scrollbar=o;var a=[];return i.pannelScrollbarInit=function(n){for(var e=0;e<n.length;e++)i.scrollbar.init($(n[e])),$(n[e]).scrollTop(0),a.indexOf(n[e])<0&&a.push(n[e])},i.on("lesson.resize",function(){if(a.length<=0)return!1;for(var n=0;n<a.length;n++)i.scrollbar.init($(a[n]))}),i});